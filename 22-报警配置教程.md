# 🚨 FUXA 报警配置教程

---

## 📋 概述

报警是 FUXA 中用于监控设备状态和异常情况的重要功能。通过配置报警，您可以及时了解系统中的异常情况，并采取相应的措施。

---

## 🎯 访问报警配置

### 步骤 1：打开编辑器

进入 FUXA 编辑器界面。

### 步骤 2：进入报警设置

点击编辑器中的 **"Alarms"**（报警）。

![报警设置](images/setup-alarms.png)

---

## 🔧 配置报警

### 报警绑定

报警绑定到一个标签（Tag），可以为该标签定义 4 种类型的条件，对应不同的报警级别。

![配置报警](images/fuxa-alarms.gif)

### 报警级别

| 报警级别 | 说明 | 优先级 | 应用场景 |
|----------|------|--------|----------|
| **High High** | 高高报警 | 最高 | 严重异常，需要立即处理 |
| **High** | 高报警 | 高 | 重要异常，需要尽快处理 |
| **Low** | 低报警 | 中 | 一般异常，需要关注 |
| **Message** | 消息 | 低 | 信息提示，仅供参考 |

### 报警条件

| 条件类型 | 说明 | 示例 |
|----------|------|------|
| **大于** | 值大于设定值 | 温度 > 100 |
| **小于** | 值小于设定值 | 压力 < 10 |
| **等于** | 值等于设定值 | 状态 = 3 |
| **不等于** | 值不等于设定值 | 状态 != 0 |
| **范围内** | 值在设定范围内 | 20 <= 温度 <= 80 |
| **范围外** | 值在设定范围外 | 温度 < 20 或 温度 > 80 |

### 配置示例

```javascript
// 报警配置示例
{
  "tagId": "temperature",
  "alarms": [
    {
      "level": "High High",
      "condition": "value > 100",
      "message": "温度过高！",
      "actions": [
        {
          "type": "setTag",
          "tagId": "emergencyShutdown",
          "value": 1
        }
      ]
    },
    {
      "level": "High",
      "condition": "value > 80",
      "message": "温度偏高！",
      "actions": [
        {
          "type": "showPopup",
          "message": "温度偏高，请检查设备！"
        }
      ]
    },
    {
      "level": "Low",
      "condition": "value < 20",
      "message": "温度偏低！",
      "actions": []
    },
    {
      "level": "Message",
      "condition": "value >= 50 && value <= 60",
      "message": "温度正常",
      "actions": []
    }
  ]
}
```

---

## 📊 显示报警

### 活动报警和历史记录

通过从菜单或标题栏上的按钮配置视图，可以显示活动报警和历史记录。

![显示报警](images/fuxa-alarms2.gif)

### 视图配置

#### 布局设置

1. 进入 **"Settings"**（设置）→ **"Layout"**（布局）
2. 配置报警显示选项
3. 选择要显示的报警视图

#### 配置选项

| 选项 | 说明 | 推荐值 |
|------|------|--------|
| **显示活动报警** | 是否显示活动报警 | 是 |
| **显示报警历史** | 是否显示报警历史 | 是 |
| **报警刷新间隔** | 报警刷新间隔（秒） | 5 |
| **最大报警数量** | 最大显示的报警数量 | 100 |

---

## 🎯 报警动作

### 动作类型

可以为每个报警配置多个动作，例如显示弹出对话框或设置标签值。

![报警动作](images/fuxa-alarms3.gif)

### 支持的动作

| 动作类型 | 说明 | 应用场景 |
|----------|------|----------|
| **showPopup** | 显示弹出对话框 | 提示用户注意 |
| **setTag** | 设置标签值 | 执行控制操作 |
| **sendEmail** | 发送邮件 | 通知相关人员 |
| **playSound** | 播放声音 | 提醒操作员 |
| **executeScript** | 执行脚本 | 执行自定义逻辑 |

### 动作配置示例

```javascript
// 报警动作配置
{
  "tagId": "tankLevel",
  "alarms": [
    {
      "level": "High High",
      "condition": "value > 90",
      "message": "液位过高！",
      "actions": [
        {
          "type": "showPopup",
          "title": "警告",
          "message": "液位过高，请立即检查！"
        },
        {
          "type": "setTag",
          "tagId": "pumpStatus",
          "value": 0
        },
        {
          "type": "sendEmail",
          "to": "admin@example.com",
          "subject": "液位过高报警",
          "body": "储罐液位超过 90%，请立即处理！"
        },
        {
          "type": "playSound",
          "sound": "alarm.mp3"
        }
      ]
    }
  ]
}
```

---

## 💡 完整示例

### 示例 1：温度监控

```javascript
// 温度监控报警配置
{
  "tagId": "temperature",
  "name": "主泵温度",
  "unit": "°C",
  "alarms": [
    {
      "level": "High High",
      "condition": "value > 100",
      "message": "温度过高，紧急停机！",
      "actions": [
        {
          "type": "showPopup",
          "title": "紧急警告",
          "message": "温度超过 100°C，系统将紧急停机！"
        },
        {
          "type": "setTag",
          "tagId": "emergencyShutdown",
          "value": 1
        },
        {
          "type": "sendEmail",
          "to": "admin@example.com",
          "subject": "紧急报警：温度过高",
          "body": "主泵温度超过 100°C，系统已紧急停机！"
        }
      ]
    },
    {
      "level": "High",
      "condition": "value > 80",
      "message": "温度偏高",
      "actions": [
        {
          "type": "showPopup",
          "title": "警告",
          "message": "温度偏高，请检查设备！"
        }
      ]
    },
    {
      "level": "Low",
      "condition": "value < 20",
      "message": "温度偏低",
      "actions": []
    }
  ]
}
```

### 示例 2：液位监控

```javascript
// 液位监控报警配置
{
  "tagId": "tankLevel",
  "name": "储罐液位",
  "unit": "%",
  "alarms": [
    {
      "level": "High High",
      "condition": "value > 90",
      "message": "液位过高",
      "actions": [
        {
          "type": "setTag",
          "tagId": "pumpStatus",
          "value": 0
        },
        {
          "type": "sendEmail",
          "to": "operator@example.com",
          "subject": "液位过高报警",
          "body": "储罐液位超过 90%，泵已停止！"
        }
      ]
    },
    {
      "level": "High",
      "condition": "value > 80",
      "message": "液位偏高",
      "actions": []
    },
    {
      "level": "Low",
      "condition": "value < 20",
      "message": "液位偏低",
      "actions": [
        {
          "type": "setTag",
          "tagId": "pumpStatus",
          "value": 1
        }
      ]
    }
  ]
}
```

### 示例 3：压力监控

```javascript
// 压力监控报警配置
{
  "tagId": "pressure",
  "name": "管道压力",
  "unit": "bar",
  "alarms": [
    {
      "level": "High High",
      "condition": "value > 10",
      "message": "压力过高",
      "actions": [
        {
          "type": "showPopup",
          "title": "紧急警告",
          "message": "压力超过 10 bar，请立即泄压！"
        },
        {
          "type": "setTag",
          "tagId": "valveOpen",
          "value": 1
        },
        {
          "type": "playSound",
          "sound": "alarm.mp3"
        }
      ]
    },
    {
      "level": "High",
      "condition": "value > 8",
      "message": "压力偏高",
      "actions": []
    },
    {
      "level": "Low",
      "condition": "value < 2",
      "message": "压力偏低",
      "actions": []
    }
  ]
}
```

---

## 🔧 故障排除

### 常见问题

#### ❓ 报警不触发

**可能原因**：
- 报警条件不正确
- 标签未更新
- 报警未启用

**解决方案**：
1. 检查报警条件是否正确
2. 确认标签是否正常更新
3. 验证报警是否已启用

---

#### ❓ 动作不执行

**可能原因**：
- 动作配置错误
- 权限不足
- 资源不可用

**解决方案**：
1. 检查动作配置是否正确
2. 验证用户权限
3. 确认所需资源是否可用

---

#### ❓ 邮件未发送

**可能原因**：
- 邮件配置错误
- 网络连接问题
- 邮件服务器限制

**解决方案**：
1. 检查邮件配置
2. 验证网络连接
3. 联系邮件服务提供商

---

## 📚 最佳实践

### 1️⃣ 报警级别设置

- **High High**：用于严重异常，需要立即处理
- **High**：用于重要异常，需要尽快处理
- **Low**：用于一般异常，需要关注
- **Message**：用于信息提示，仅供参考

### 2️⃣ 报警条件设计

- 使用合理的阈值
- 避免过于频繁的报警
- 考虑滞后性（hysteresis）

### 3️⃣ 动作配置

- 为严重报警配置多个动作
- 避免动作冲突
- 测试所有动作是否正常执行

### 4️⃣ 报警管理

- 定期审查报警配置
- 调整不合理的报警
- 记录报警处理流程

---

## 🎉 总结

通过本教程，您已经学会了：

✅ 访问报警配置  
✅ 配置报警条件和级别  
✅ 显示活动报警和历史记录  
✅ 配置报警动作  
✅ 应用完整示例  
✅ 故障排除  
✅ 应用最佳实践  

现在您可以在 FUXA 中配置强大的报警系统了！

---

## 📚 快速参考

### 报警级别对照表

| 报警级别 | 优先级 | 说明 | 应用场景 |
|----------|--------|------|----------|
| **High High** | 最高 | 严重异常 | 需要立即处理 |
| **High** | 高 | 重要异常 | 需要尽快处理 |
| **Low** | 中 | 一般异常 | 需要关注 |
| **Message** | 低 | 信息提示 | 仅供参考 |

### 报警动作对照表

| 动作类型 | 说明 | 应用场景 |
|----------|------|----------|
| **showPopup** | 显示弹出对话框 | 提示用户注意 |
| **setTag** | 设置标签值 | 执行控制操作 |
| **sendEmail** | 发送邮件 | 通知相关人员 |
| **playSound** | 播放声音 | 提醒操作员 |
| **executeScript** | 执行脚本 | 执行自定义逻辑 |

---

> 💡 **提示**：建议在实际应用中为每个报警配置合理的阈值和动作，避免报警过于频繁或遗漏重要异常。

---

**关注我们，获取更多工业自动化技术干货！** 🎯

<div style="display: flex; justify-content: center; align-items: center; gap: 40px; margin: 30px 0;">
    <div style="text-align: center;">
        <img src="images/微信公众号.jpg" alt="微信公众号" style="width: 200px; height: 200px; object-fit: contain;">
        <p style="margin: 10px 0 0 0; font-size: 14px; color: #666;">微信公众号</p>
    </div>
    <div style="text-align: center;">
        <img src="images/单人二维码.png" alt="技术支持" style="width: 200px; height: 200px; object-fit: contain;">
        <p style="margin: 10px 0 0 0; font-size: 14px; color: #666;">技术支持</p>
    </div>
</div>

