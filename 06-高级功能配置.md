# 🎛️ FUXA 高级功能配置教程

---

## 📋 概述

本教程将介绍 FUXA 的高级功能，包括：

- 📊 **图表控制** - 实时数据可视化
- 🖼️ **UI 布局** - 自定义用户界面
- ⚡ **事件配置** - 交互逻辑和动作
- 🚨 **报警系统** - 实时监控和通知

---

## 📊 图表控制

### 添加图表控件

在编辑器中选择视图，添加图表控件来显示实时数据趋势。

![](images/fuxa-chart.gif)

### 配置图表

在 **折线图**（Line charts）中，您可以定义要附加到图表控件的数据图表。

![](images/setup-charts.png)

#### 图表配置步骤

1. **选择图表控件**
   - 在工具栏中找到图表控件
   - 拖拽到视图中

2. **绑定数据标签**
   - 在属性面板中点击"图表"选项
   - 添加要显示的数据标签
   - 设置每个数据系列的颜色和样式

3. **配置图表属性**

| 属性 | 说明 | 示例 |
|------|------|------|
| **标题** | 图表标题 | "温度趋势" |
| **X 轴标签** | X 轴说明 | "时间" |
| **Y 轴标签** | Y 轴说明 | "温度 (℃)" |
| **刷新间隔** | 数据更新频率 | 1000ms |
| **数据点数** | 显示的数据点数量 | 100 |
| **显示网格** | 是否显示网格线 | true |
| **显示图例** | 是否显示图例 | true |

4. **高级选项**
   - 设置 Y 轴最小值/最大值
   - 配置数据缩放
   - 自定义图表样式

![](images/fuxa-chart2.gif)

---

## 🖼️ UI 布局配置

### 进入布局设置

在编辑器中进入 **"布局设置"**（Layout settings）。

![](images/setup-layout.png)

### 常规设置（General）

在 **常规** 选项卡中，您可以定义：

| 设置 | 说明 | 示例 |
|------|------|------|
| **起始视图** | 访问 http://localhost:1881 时显示的第一个视图（主页） | `Home` |
| **缩放** | 如果启用，可以使用鼠标滚轮缩放视图，用鼠标左键移动视图 | `true` |
| **输入字段对话框模式** | 如果启用，输入值控件时将显示对话框 | `true` |
| **显示导航** | 设置显示或隐藏标题栏和导航菜单 | `true` |
| **隐藏开发按钮** | 隐藏编辑和主页之间的切换按钮 | `false` |

#### 输入字段对话框模式

![](images/fuxa-layout-input.gif)

#### 导航栏设置

![](images/fuxa-layout.png)

### 侧边导航菜单（Navigation Side Menu）

在 **侧边导航菜单** 选项卡中，您可以定义菜单项和不同的样式属性。

![](images/fuxa-layout2.png)

#### 菜单配置

1. **添加菜单项**
   - 点击"添加菜单项"按钮
   - 设置菜单项名称
   - 选择要打开的视图
   - 设置图标（可选）

2. **样式设置**
   - 背景颜色
   - 文字颜色
   - 悬停效果
   - 菜单项大小

### 顶部导航栏（Header Navigation Bar）

在 **顶部导航栏** 选项卡中，您可以定义是否以及如何显示报警通知项，以及不同的样式属性。

![](images/fuxa-layout3.png)

#### 报警通知设置

| 设置 | 说明 | 示例 |
|------|------|------|
| **显示报警** | 是否在标题栏显示报警通知 | `true` |
| **报警位置** | 报警通知的位置 | `left` / `right` |
| **报警样式** | 报警通知的样式 | `icon` / `text` |
| **报警数量** | 显示的报警数量 | `5` |

---

## ⚡ 事件配置

在图形和按钮控件中，您可以配置鼠标 **事件**（click、mouseDown、mouseUp）来执行任务。

### 可用事件类型

| 事件 | 说明 |
|------|------|
| **click** | 点击事件 |
| **mouseDown** | 鼠标按下事件 |
| **mouseUp** | 鼠标释放事件 |

### 可用动作

- [打开页面](#打开页面)
- [打开卡片](#打开卡片)
- [打开对话框](#打开对话框)
- [打开 iframe](#打开-iframe)
- [打开窗口](#打开窗口)
- [设置值](#设置值)
- [切换值](#切换值)
- [从输入设置并关闭](#从输入设置并关闭)

---

### 打开页面

用于在 **主** 窗口中显示视图。

![](images/fuxa-events1.gif)

**使用场景**：
- 导航到不同的页面
- 返回主页
- 切换视图

**配置步骤**：
1. 选择控件（如按钮）
2. 在属性面板中找到"事件"选项
3. 添加 click 事件
4. 选择"打开页面"动作
5. 选择要打开的视图

---

### 打开卡片

用于将视图作为弹出窗口显示。**卡片**将在事件发生时显示在鼠标旁边，可以同时显示多个卡片。同一个 **卡片** 可以用于显示多个泵的值。

![](images/fuxa-events2.gif)

**使用场景**：
- 显示设备详细信息
- 显示传感器读数
- 显示状态信息

**配置步骤**：
1. 选择控件
2. 添加 click 事件
3. 选择"打开卡片"动作
4. 选择要显示的视图
5. 设置卡片大小和位置

---

### 打开对话框

用于将视图作为对话框显示，通常用于配置值。**对话框**将显示在屏幕顶部。同一个 **对话框** 可以用于配置多个泵的值。

![](images/fuxa-events3.gif)

**使用场景**：
- 配置设备参数
- 输入设定值
- 修改系统设置

**配置步骤**：
1. 选择控件
2. 添加 click 事件
3. 选择"打开对话框"动作
4. 选择要显示的视图
5. 设置对话框大小和标题

---

### 打开 iframe

用于将窗口作为 **iframe** 打开（来自外部源的嵌入 HTML 文档）。您可以定义窗口大小和缩放比例。

![](images/fuxa-events4.gif)

**使用场景**：
- 嵌入外部网页
- 显示第三方仪表盘
- 集成其他系统

**配置步骤**：
1. 选择控件
2. 添加 click 事件
3. 选择"打开 iframe"动作
4. 输入 URL 地址
5. 设置窗口大小和缩放比例

---

### 打开窗口

用于在新浏览器中打开 **窗口**。您可以定义 **窗口** 大小。

![](images/fuxa-events5.gif)

**使用场景**：
- 打开新标签页
- 显示独立窗口
- 打印报表

**配置步骤**：
1. 选择控件
2. 添加 click 事件
3. 选择"打开窗口"动作
4. 输入 URL 地址
5. 设置窗口大小

---

### 设置值

用于设置标签值或增加和减少当前值。

![](images/fuxa-events6.gif)

**使用场景**：
- 设置设备参数
- 调整设定值
- 控制设备状态

**配置步骤**：
1. 选择控件
2. 添加 click 事件
3. 选择"设置值"动作
4. 选择要设置的标签
5. 设置值或增量

**选项**：
- **固定值**：设置一个固定的值
- **增量**：在当前值基础上增加或减少
- **表达式**：使用表达式计算值

---

### 切换值

用于 **切换** 标签值 1/0（如果是 1 则设置为 0，如果是 0 则设置为 1）。

![](images/fuxa-events7.gif)

**使用场景**：
- 开关控制
- 启动/停止设备
- 切换状态

**配置步骤**：
1. 选择控件
2. 添加 click 事件
3. 选择"切换值"动作
4. 选择要切换的标签

---

### 从输入设置并关闭

可以组合使用，通过带有 OK 确认的对话框设置一些值。

![](images/fuxa-events8.gif)

**使用场景**：
- 确认设置
- 批量修改参数
- 安全操作

**配置步骤**：
1. 创建包含输入控件的对话框视图
2. 添加"从输入设置并关闭"事件
3. 配置要设置的标签
4. 设置确认按钮

---

## 🚨 报警系统

### 配置报警

在编辑器中进入 **"报警"**（Alarms）。

![](images/setup-alarms.png)

### 报警类型

报警绑定到一个标签，可以为该标签定义 4 种类型的条件，对应不同的级别：

| 报警级别 | 说明 | 示例 |
|---------|------|------|
| **高高报警（High High）** | 严重超限 | 温度 > 90℃ |
| **高报警（High）** | 超限 | 温度 > 80℃ |
| **低报警（Low）** | 低于下限 | 温度 < 20℃ |
| **消息（Message）** | 信息提示 | 设备启动 |

![](images/fuxa-alarms.gif)

### 配置步骤

1. **选择标签**
   - 在报警配置页面选择要监控的标签

2. **设置报警条件**
   - 高高高报警：设置阈值和条件
   - 高报警：设置阈值和条件
   - 低报警：设置阈值和条件
   - 消息：设置触发条件

3. **配置报警动作**
   - 显示弹出对话框
   - 设置标签值
   - 发送通知
   - 执行脚本

4. **设置报警属性**

| 属性 | 说明 | 示例 |
|------|------|------|
| **报警名称** | 报警标识 | "温度过高" |
| **报警级别** | 报警严重程度 | High High |
| **阈值** | 触发阈值 | 90 |
| **延迟时间** | 报警延迟（秒） | 5 |
| **确认要求** | 是否需要确认 | true |
| **报警动作** | 触发时的动作 | 显示对话框 |

### 显示报警

可以通过从菜单或标题栏上的按钮配置视图来显示活动报警和历史记录。详见 [布局设置](https://github.com/frangoteam/FUXA/wiki/HowTo-View-Layout)。

![](images/fuxa-alarms2.gif)

### 报警动作

还可以为每个报警配置多个动作，例如显示弹出对话框或为标签设置值。

![](images/fuxa-alarms3.gif)

#### 可用动作

| 动作 | 说明 |
|------|------|
| **显示弹出对话框** | 显示报警信息对话框 |
| **设置标签值** | 自动设置标签值 |
| **发送通知** | 发送通知消息 |
| **执行脚本** | 执行自定义脚本 |

---

## 💡 最佳实践

### 图表配置

1. **合理设置刷新间隔**
   - 实时数据：500-1000ms
   - 趋势数据：2000-5000ms
   - 历史数据：10000-60000ms

2. **限制数据点数**
   - 避免显示过多数据点影响性能
   - 建议 50-200 个数据点

3. **使用合适的颜色**
   - 使用对比度高的颜色
   - 遵循颜色编码规范（红色=报警，绿色=正常）

### UI 布局

1. **清晰的导航结构**
   - 使用逻辑分组
   - 提供面包屑导航
   - 保持菜单简洁

2. **一致的样式**
   - 统一的颜色方案
   - 统一的字体和大小
   - 统一的间距和布局

3. **响应式设计**
   - 考虑不同屏幕尺寸
   - 使用相对单位
   - 测试不同分辨率

### 事件配置

1. **明确的事件触发**
   - 使用合适的事件类型
   - 避免事件冲突
   - 提供视觉反馈

2. **错误处理**
   - 验证输入值
   - 处理异常情况
   - 提供错误提示

3. **用户确认**
   - 重要操作需要确认
   - 提供撤销功能
   - 记录操作日志

### 报警配置

1. **合理的报警阈值**
   - 基于实际工艺要求
   - 避免误报和漏报
   - 定期调整阈值

2. **报警优先级**
   - 使用不同的报警级别
   - 优先处理严重报警
   - 设置报警延迟

3. **报警通知**
   - 多种通知方式
   - 报警确认机制
   - 报警历史记录

---

## ❓ 常见问题

### ❓ 图表不显示数据

**可能原因**：
1. 标签未绑定
2. 数据类型不匹配
3. 刷新间隔设置过大

**解决方案**：
1. 检查标签绑定是否正确
2. 确认数据类型一致
3. 调整刷新间隔

### ❓ 事件不触发

**可能原因**：
1. 事件未正确配置
2. 控件未启用
3. JavaScript 错误

**解决方案**：
1. 检查事件配置
2. 确认控件已启用
3. 查看浏览器控制台错误

### ❓ 报警不触发

**可能原因**：
1. 报警条件不满足
2. 报警未启用
3. 标签数据未更新

**解决方案**：
1. 检查报警条件
2. 确认报警已启用
3. 确认标签数据正常更新

---

## 🎉 总结

通过本教程，您已经学会了：

✅ 配置图表控件显示实时数据  
✅ 自定义 UI 布局和导航  
✅ 配置事件和交互逻辑  
✅ 设置报警系统和通知  
✅ 遵循最佳实践优化系统  

现在您可以创建功能完善的工业可视化系统了！

---

> 💡 **提示**：建议在实际项目中逐步实现这些功能，先从简单的图表和事件开始，再逐步添加复杂的报警和交互逻辑。

---

**关注我们，获取更多工业自动化技术干货！** 🎯

<div style="display: flex; justify-content: center; align-items: center; gap: 40px; margin: 30px 0;">
    <div style="text-align: center;">
        <img src="images/微信公众号.jpg" alt="微信公众号" style="width: 200px; height: 200px; object-fit: contain;">
        <p style="margin: 10px 0 0 0; font-size: 14px; color: #666;">微信公众号</p>
    </div>
    <div style="text-align: center;">
        <img src="images/单人二维码.png" alt="技术支持" style="width: 200px; height: 200px; object-fit: contain;">
        <p style="margin: 10px 0 0 0; font-size: 14px; color: #666;">技术支持</p>
    </div>
</div>

