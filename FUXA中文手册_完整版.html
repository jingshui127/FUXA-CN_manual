<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>FUXA 完整汉化文档</title>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: -apple-system, BlinkMacSystemFont, "Segoe UI", Roboto, "Helvetica Neue", Arial, "Microsoft YaHei", sans-serif;
            line-height: 1.6;
            color: #333;
            background: #f5f5f5;
        }

        .container {
            display: flex;
            min-height: 100vh;
        }

        .sidebar {
            width: 320px;
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            color: #fff;
            padding: 20px;
            overflow-y: auto;
            position: fixed;
            height: 100vh;
            box-shadow: 2px 0 10px rgba(0,0,0,0.1);
            z-index: 1000;
        }

        .sidebar h1 {
            font-size: 24px;
            margin-bottom: 20px;
            padding-bottom: 15px;
            border-bottom: 2px solid rgba(255,255,255,0.3);
            text-align: center;
        }

        .search-box {
            margin-bottom: 20px;
        }

        .search-box input {
            width: 100%;
            padding: 12px;
            border: none;
            border-radius: 25px;
            font-size: 14px;
            background: rgba(255,255,255,0.2);
            color: #fff;
            outline: none;
            transition: background 0.3s;
        }

        .search-box input::placeholder {
            color: rgba(255,255,255,0.7);
        }

        .search-box input:focus {
            background: rgba(255,255,255,0.3);
        }

        .nav-menu {
            list-style: none;
        }

        .nav-item {
            padding: 12px 15px;
            cursor: pointer;
            border-radius: 8px;
            margin-bottom: 5px;
            transition: all 0.3s;
            font-size: 14px;
        }

        .nav-item:hover {
            background: rgba(255,255,255,0.2);
            transform: translateX(5px);
        }

        .nav-item.active {
            background: rgba(255,255,255,0.3);
            font-weight: bold;
        }

        .main-content {
            flex: 1;
            margin-left: 320px;
            padding: 40px;
            background: #fff;
            max-width: 1200px;
        }

        .content-section {
            display: none;
            animation: fadeIn 0.3s ease-in;
        }

        .content-section.active {
            display: block;
        }

        @keyframes fadeIn {
            from { opacity: 0; transform: translateY(10px); }
            to { opacity: 1; transform: translateY(0); }
        }

        .content-section h1 {
            color: #667eea;
            border-bottom: 3px solid #667eea;
            padding-bottom: 15px;
            margin-bottom: 30px;
            font-size: 32px;
        }

        .content-section h2 {
            color: #764ba2;
            margin-top: 40px;
            margin-bottom: 20px;
            padding-left: 15px;
            border-left: 4px solid #667eea;
            font-size: 24px;
        }

        .content-section h3 {
            color: #333;
            margin-top: 30px;
            margin-bottom: 15px;
            font-size: 20px;
        }

        .content-section p {
            margin-bottom: 15px;
            line-height: 1.8;
            color: #555;
        }

        .content-section ul, .content-section ol {
            margin: 15px 0 15px 30px;
            color: #555;
        }

        .content-section li {
            margin-bottom: 8px;
        }

        .content-section table {
            width: 100%;
            border-collapse: collapse;
            margin: 20px 0;
            box-shadow: 0 2px 8px rgba(0,0,0,0.1);
            border-radius: 8px;
            overflow: hidden;
        }

        .content-section th, .content-section td {
            padding: 12px 15px;
            text-align: left;
            border-bottom: 1px solid #eee;
        }

        .content-section th {
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            color: #fff;
            font-weight: bold;
            text-transform: uppercase;
            font-size: 12px;
            letter-spacing: 0.5px;
        }

        .content-section tr:hover {
            background: #f8f9fa;
        }

        .content-section pre {
            background: #2c3e50;
            color: #ecf0f1;
            padding: 20px;
            border-radius: 8px;
            overflow-x: auto;
            margin: 20px 0;
            box-shadow: 0 2px 8px rgba(0,0,0,0.1);
        }

        .content-section code {
            background: #f4f4f4;
            padding: 2px 6px;
            border-radius: 3px;
            font-family: 'Courier New', monospace;
            color: #e74c3c;
            font-size: 0.9em;
        }

        .content-section pre code {
            background: none;
            color: inherit;
            padding: 0;
            font-size: 14px;
        }

        .content-section img {
            max-width: 100%;
            height: auto;
            border-radius: 8px;
            box-shadow: 0 4px 12px rgba(0,0,0,0.15);
            margin: 20px 0;
        }

        .content-section blockquote {
            border-left: 4px solid #667eea;
            padding: 15px 20px;
            margin: 20px 0;
            background: linear-gradient(135deg, rgba(102,126,234,0.1) 0%, rgba(118,75,162,0.1) 100%);
            color: #555;
            border-radius: 0 8px 8px 0;
        }

        .content-section hr {
            border: none;
            border-top: 2px solid #eee;
            margin: 40px 0;
        }

        .back-to-top {
            position: fixed;
            bottom: 30px;
            right: 30px;
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            color: #fff;
            width: 50px;
            height: 50px;
            border-radius: 50%;
            text-align: center;
            line-height: 50px;
            cursor: pointer;
            box-shadow: 0 4px 12px rgba(0,0,0,0.2);
            display: none;
            transition: all 0.3s;
            font-size: 24px;
            z-index: 1000;
        }

        .back-to-top:hover {
            transform: translateY(-5px);
            box-shadow: 0 6px 16px rgba(0,0,0,0.3);
        }

        @media (max-width: 768px) {
            .sidebar {
                width: 100%;
                height: auto;
                position: relative;
            }

            .main-content {
                margin-left: 0;
                padding: 20px;
            }

            .content-section h1 {
                font-size: 24px;
            }

            .content-section h2 {
                font-size: 20px;
            }
        }
    </style>
</head>
<body>
    <div class="container">
        <div class="sidebar">
            <h1>📚 FUXA 文档</h1>
            <div class="search-box">
                <input type="text" id="searchInput" placeholder="🔍 搜索文档...">
            </div>
            <ul class="nav-menu" id="navMenu">
                <li class="nav-item" data-section="01-主页介绍">01 主页介绍</li><li class="nav-item" data-section="02-快速入门指南">02 快速入门指南</li><li class="nav-item" data-section="03-安装和运行指南">03 安装和运行指南</li><li class="nav-item" data-section="04-设备和标签配置">04 设备和标签配置</li><li class="nav-item" data-section="05-组件开发教程">05 组件开发教程</li><li class="nav-item" data-section="06-高级功能配置">06 高级功能配置</li><li class="nav-item" data-section="07-系统设置与使用技巧">07 系统设置与使用技巧</li><li class="nav-item" data-section="08-Node-RED集成教程">08 Node RED集成教程</li><li class="nav-item" data-section="09-ODBC数据库集成教程">09 ODBC数据库集成教程</li><li class="nav-item" data-section="10-调度器使用教程">10 调度器使用教程</li><li class="nav-item" data-section="11-视图管理教程">11 视图管理教程</li><li class="nav-item" data-section="12-WebSocket通信教程">12 WebSocket通信教程</li><li class="nav-item" data-section="13-图表控制教程">13 图表控制教程</li><li class="nav-item" data-section="14-UI布局设置教程">14 UI布局设置教程</li><li class="nav-item" data-section="15-管道动画教程">15 管道动画教程</li><li class="nav-item" data-section="16-控件绑定教程">16 控件绑定教程</li><li class="nav-item" data-section="17-形状绑定教程">17 形状绑定教程</li><li class="nav-item" data-section="18-脚本配置教程">18 脚本配置教程</li><li class="nav-item" data-section="19-事件配置教程">19 事件配置教程</li><li class="nav-item" data-section="20-系统配置教程">20 系统配置教程</li><li class="nav-item" data-section="21-视图复用教程">21 视图复用教程</li><li class="nav-item" data-section="22-报警配置教程">22 报警配置教程</li><li class="nav-item" data-section="23-项目管理教程">23 项目管理教程</li><li class="nav-item" data-section="24-自定义形状定义教程">24 自定义形状定义教程</li><li class="nav-item" data-section="25-脚本配置教程">25 脚本配置教程</li><li class="nav-item" data-section="26-事件配置教程">26 事件配置教程</li><li class="nav-item" data-section="27-形状绑定教程">27 形状绑定教程</li><li class="nav-item" data-section="28-控件绑定教程">28 控件绑定教程</li><li class="nav-item" data-section="29-小组件开发教程">29 小组件开发教程</li><li class="nav-item" data-section="30-视图创建教程">30 视图创建教程</li><li class="nav-item" data-section="31-编辑器快捷键技巧">31 编辑器快捷键技巧</li><li class="nav-item" data-section="32-Node-RED及OPC实现SCADA系统">32 Node RED及OPC实现SCADA系统</li>
            </ul>
        </div>

        <div class="main-content" id="mainContent">
            
        <div class="content-section" id="section-01-主页介绍">
            <h1>🎯 FUXA 文档 - 欢迎使用 FUXA</h1><hr><h2>📖 什么是 FUXA？</h2><p>FUXA 是一款强大的<strong>基于 Web</strong> 的软件，能够快速构建和部署可扩展的 SCADA、HMI、仪表板或 IIoT 系统。</p><p>使用 FUXA，您可以：
<ul><li>✅ 为您的机器创建现代化的过程可视化界面</li>
<li>✅ 实现个性化设计</li>
<li>✅ 实时数据显示</li>
<li>✅ 控制自动化工业设备</li>
</ul>
<img src="images/fuxa-editor.png" alt=""></p><hr><h2>🔌 通信协议支持</h2><p>FUXA 支持常用的工业通信标准，包括西门子 S7 协议和 OPC UA，允许连接第三方 OPC 服务器。支持的通信标准列表可以通过开发额外的驱动程序来扩展。</p><h3>支持的协议包括：</h3><table>
<tr><th>协议类型</th><th>说明</th></tr>
<tr><td><strong>OPC UA</strong></td><td>工业自动化标准协议</td></tr>
<tr><td><strong>Siemens S7</strong></td><td>西门子 PLC 通信协议（支持 200/300/400/1200/1500 系列）</td></tr>
<tr><td><strong>Modbus RTU/TCP</strong></td><td>通用工业通信协议</td></tr>
<tr><td><strong>BACnet IP</strong></td><td>楼宇自动化协议</td></tr>
<tr><td><strong>MQTT</strong></td><td>物联网消息协议</td></tr>
<tr><td><strong>Ethernet/IP</strong></td><td>Allen Bradley 设备协议</td></tr>
<tr><td><strong>WebAPI</strong></td><td>Web 接口集成</td></tr>
</table><hr><h2>💻 软件架构</h2><p>FUXA 基于 <strong>Node.js</strong> 运行时开发，您可以通过 Web 浏览器访问编辑器来创建应用程序（SCADA/HMI/仪表板），作为客户端运行可视化界面。</p><hr><h2>🖥️ 用户界面</h2><p>FUXA 由两个不同的视图组成：</p><p><h3>1️⃣ FUXA 编辑器（Editor）</h3>
用于编辑和设计项目</p><p><h3>2️⃣ FUXA 视图（View）</h3>
用于展示可视化项目的最终产品</p><p><img src="images/fuxa-home.png" alt=""></p><hr><h2>✨ 核心特性</h2><p><h3>🆓 无运行时许可证限制</h3>
FUXA 不需要任何运行时许可证！您可以构建任意数量和规模的 HMI 项目，无需担心运行时环境的额外许可费用。</p><p><h3>🌐 跨平台全栈解决方案</h3>
该系统设计为在各种操作系统中运行，安装简便。</p><table>
<tr><th>技术栈</th><th>说明</th></tr>
<tr><td><strong>后端</strong></td><td>Node.js 开发</td></tr>
<tr><td><strong>前端</strong></td><td>可扩展的 HTML5 Web 前端</td></tr>
<tr><td><strong>技术</strong></td><td>HTML5、CSS、JavaScript、Angular、SVG</td></tr>
<tr><td><strong>兼容性</strong></td><td>支持所有现代浏览器</td></tr>
</table><p><h3>🚀 灵活部署</h3>
<ul><li>支持 Windows、Mac、Linux 全平台</li>
<li>支持 Docker 容器化部署</li>
<li>支持本地安装和云端部署</li>
</ul>
<hr></p><h2>🎯 适用场景</h2><p>FUXA 适用于以下场景：</p><p><ul><li>🏭 <strong>工业自动化</strong>：工厂设备监控、生产线管理</li>
<li>🌡️ <strong>过程控制</strong>：温度、压力、流量等参数监控</li>
<li>📊 <strong>数据可视化</strong>：实时数据仪表板、趋势分析</li>
<li>🏠 <strong>楼宇自动化</strong>：空调、照明、安防系统集成</li>
<li>🌐 <strong>物联网应用</strong>：IIoT 设备数据采集与展示</li>
<li>📱 <strong>远程监控</strong>：多终端访问、移动端支持</li>
</ul>
<hr></p><h2>📚 文档导航</h2><p>为了帮助您快速上手，我们提供了详细的文档：</p><table>
<tr><th>文档</th><th>说明</th></tr>
<tr><td>📖 <a href="#section-02-快速入门指南" class="internal-link">入门指南</a></td><td>快速开始使用 FUXA</td></tr>
<tr><td>🔧 <a href="#section-03-安装和运行指南" class="internal-link">安装和运行</a></td><td>详细的安装教程</td></tr>
<tr><td>🔌 <a href="#section-04-设备和标签配置" class="internal-link">设备和标签配置</a></td><td>连接设备和配置标签</td></tr>
<tr><td>🎨 <a href="#section-29-小组件开发教程" class="internal-link">组件使用</a></td><td>使用各种可视化组件</td></tr>
<tr><td>🚨 <a href="#section-22-报警配置教程" class="internal-link">报警设置</a></td><td>配置报警系统</td></tr>
<tr><td>📊 <a href="#section-13-图表控制教程" class="internal-link">图表控制</a></td><td>创建数据图表</td></tr>
<tr><td>🎭 <a href="#section-26-事件配置教程" class="internal-link">事件配置</a></td><td>配置交互事件</td></tr>
<tr><td>💻 <a href="#section-25-脚本配置教程" class="internal-link">脚本配置</a></td><td>使用脚本增强功能</td></tr>
</table><hr><h2>💡 快速开始</h2><h3>第一步：安装 FUXA</h3><p>选择适合您的安装方式：</p><p><li><strong>Docker 部署</strong>（推荐生产环境）</li>
<li><strong>NPM 安装</strong>（适合开发者）</li>
<li><strong>预编译版本</strong>（最简单）</li>
<li><strong>源码编译</strong>（高级用户）</li></p><p>详细安装教程请参考：<a href="#section-03-安装和运行指南" class="internal-link">安装和运行指南</a></p><h3>第二步：访问 FUXA</h3><p>安装完成后，在浏览器中访问：</p><p>
<pre><code class="">http://localhost:1881
</code></pre></p><p>默认登录账号：
<ul><li>用户名：<code>admin</code></li>
<li>密码：<code>admin</code></li>
</ul>
<h3>第三步：创建项目</h3></p><p><li>进入编辑器界面</li>
<li>连接您的设备</li>
<li>创建标签</li>
<li>设计可视化界面</li>
<li>部署运行</li></p><hr><h2>🤝 社区支持</h2><p><ul><li>🌐 <strong>官方网站</strong>：https://fuxa.io/</li>
<li>📦 <strong>GitHub 仓库</strong>：https://github.com/frangoteam/FUXA</li>
<li>💬 <strong>问题反馈</strong>：在 GitHub 提交 Issue</li>
<li>📧 <strong>技术支持</strong>：查看 Wiki 文档和社区讨论</li>
</ul>
<hr></p><h2>🎉 开始您的 FUXA 之旅</h2><p>准备好开始了吗？查看我们的 <a href="#section-02-快速入门指南" class="internal-link">入门指南</a>，几分钟内即可创建您的第一个可视化项目！</p><hr><blockquote>💡 <strong>提示</strong>：FUXA 是开源免费的，您可以自由使用和修改。欢迎为项目贡献代码！</blockquote><hr><p><strong>关注我们，获取更多工业自动化技术干货！</strong> 🎯</p><p><div style="display: flex; justify-content: center; align-items: center; gap: 40px; margin: 30px 0;">
    <div style="text-align: center;">
        <img src="images/微信公众号.jpg" alt="微信公众号" style="width: 200px; height: 200px; object-fit: contain;">
        <p style="margin: 10px 0 0 0; font-size: 14px; color: #666;">微信公众号</p>
    </div>
    <div style="text-align: center;">
        <img src="images/单人二维码.png" alt="技术支持" style="width: 200px; height: 200px; object-fit: contain;">
        <p style="margin: 10px 0 0 0; font-size: 14px; color: #666;">技术支持</p>
    </div>
</div></p>
        </div>
        <div class="content-section" id="section-02-快速入门指南">
            <h1>🚀 FUXA 快速入门指南</h1><hr><h2>📚 教程目标</h2><p>本教程将演示 FUXA 最流行功能的基本用法。通过本教程，您将学会：</p><p>✅ 连接设备到 FUXA  
✅ 从设备推送数据到 FUXA  
✅ 构建实时 GUI SCADA/HMI/仪表板  
✅ 定义阈值并触发报警  </p><hr><h2>🔧 前置准备</h2><p>在开始之前，您需要：</p><h3>1️⃣ 安装 FUXA 服务器</h3><p>请按照 <a href="#section-Installing-and-Running" class="internal-link"><strong>安装和运行指南</strong></a> 完成 FUXA 的安装。</p><h3>2️⃣ 访问 FUXA 界面</h3><p>安装完成后，FUXA UI 将通过以下 URL 访问：</p><p>
<pre><code class="">http://localhost:1881
</code></pre></p><p>FUXA Web 服务器提供两个主要页面：</p><table>
<tr><th>页面</th><th>URL</th><th>说明</th></tr>
<tr><td><strong>可视化界面</strong></td><td>http://localhost:1881/home</td><td>终端用户查看界面</td></tr>
<tr><td><strong>编辑器</strong></td><td>http://localhost:1881/editor</td><td>项目设计和开发界面</td></tr>
</table><hr><h2>📝 完整步骤概览</h2><pre><code class="">┌─────────────────────────────────────────────────────────┐
│  步骤 1：连接设备并配置标签                               │
├─────────────────────────────────────────────────────────┤
│  步骤 2：创建可视化界面                                   │
│    ├─ 2.1 创建空视图                                     │
│    ├─ 2.2 绑定控件到视图                                 │
│    ├─ 2.3 绑定形状到视图                                 │
│    └─ 2.4 绑定图表控件到视图                             │
├─────────────────────────────────────────────────────────┤
│  步骤 3：配置 UI 布局                                    │
├─────────────────────────────────────────────────────────┤
│  步骤 4：配置报警系统                                    │
├─────────────────────────────────────────────────────────┤
│  步骤 5：激活并创建自定义用户                             │
└─────────────────────────────────────────────────────────┘
</code></pre><hr><h2>步骤 1：连接设备并配置标签</h2><h3>🔌 支持的设备类型</h3><p>FUXA 支持多种工业设备：</p><table>
<tr><th>设备类型</th><th>协议</th><th>适用场景</th></tr>
<tr><td><strong>Modbus</strong></td><td>RTU/TCP</td><td>通用工业设备</td></tr>
<tr><td><strong>Siemens S7</strong></td><td>S7 协议</td><td>西门子 PLC</td></tr>
<tr><td><strong>OPC UA</strong></td><td>OPC UA</td><td>工业自动化标准</td></tr>
<tr><td><strong>BACnet IP</strong></td><td>BACnet</td><td>楼宇自动化</td></tr>
<tr><td><strong>MQTT</strong></td><td>MQTT</td><td>物联网设备</td></tr>
<tr><td><strong>Ethernet/IP</strong></td><td>Allen Bradley</td><td>罗克韦尔设备</td></tr>
</table><h3>📋 配置步骤</h3><p><li><strong>获取设备凭证</strong></li>
   - IP 地址
   - 端口号
   - 认证信息
   - 寄存器地址</p><p><li><strong>添加设备连接</strong></li>
   - 进入编辑器的"连接"（Connections）页面
   - 添加设备
   - 配置通信参数</p><p><li><strong>配置标签</strong></li>
   - 创建数据标签
   - 绑定到设备寄存器
   - 设置数据类型和单位</p><p>📖 <strong>详细配置指南</strong>：<a href="#section-HowTo-Devices-and-Tags" class="internal-link">设备和标签配置教程</a></p><hr><h2>步骤 2：创建可视化界面</h2><h3>2.1 创建空视图 📺</h3><p>创建一个新的视图作为可视化界面的基础。</p><p>📖 <strong>详细教程</strong>：<a href="#section-HowTo-View" class="internal-link">如何创建视图</a></p><h3>2.2 绑定控件到视图 🎛️</h3><p>添加各种交互控件（按钮、开关、滑块等）并绑定数据标签。</p><p>📖 <strong>详细教程</strong>：<a href="#section-HowTo-bind-Controls" class="internal-link">如何绑定控件</a></p><h3>2.3 绑定形状到视图 🔷</h3><p>添加图形元素（矩形、圆形、管道等）并绑定数据以实现动态效果。</p><p>📖 <strong>详细教程</strong>：<a href="#section-HowTo-bind-Shapes" class="internal-link">如何绑定形状</a></p><h3>2.4 绑定图表控件到视图 📊</h3><p>添加数据图表以显示实时趋势和历史数据。</p><p>📖 <strong>详细教程</strong>：<a href="#section-HowTo-Chart-Control" class="internal-link">如何使用图表控件</a></p><hr><h2>步骤 3：配置 UI 布局 🎨</h2><p>设计用户界面的整体布局，包括：</p><p><ul><li>顶部导航栏</li>
<li>侧边栏菜单</li>
<li>主内容区域</li>
<li>底部状态栏</li>
</ul>
📖 <strong>详细教程</strong>：<a href="#section-HowTo-UI-Layout" class="internal-link">如何配置 UI 布局</a></p><hr><h2>步骤 4：配置报警系统 🚨</h2><p>设置报警规则，当数据超出阈值时自动触发报警。</p><h3>报警类型</h3><table>
<tr><th>报警级别</th><th>说明</th><th>应用场景</th></tr>
<tr><td><strong>High High</strong></td><td>高高报警</td><td>严重超标</td></tr>
<tr><td><strong>High</strong></td><td>高报警</td><td>超标预警</td></tr>
<tr><td><strong>Low</strong></td><td>低报警</td><td>低于下限</td></tr>
<tr><td><strong>Message</strong></td><td>消息报警</td><td>信息提示</td></tr>
</table><h3>报警功能</h3><p><ul><li>✅ 实时弹窗提示</li>
<li>✅ 声音报警</li>
<li>✅ 报警历史记录</li>
<li>✅ 短信/邮件通知</li>
</ul>
📖 <strong>详细教程</strong>：<a href="#section-HowTo-setup-Alarms" class="internal-link">如何设置报警</a></p><hr><h2>步骤 5：激活并创建自定义用户 👥</h2><h3>用户管理</h3><p><li><strong>激活系统</strong></li>
   - 配置系统参数
   - 设置访问权限</p><p><li><strong>创建用户</strong></li>
   - 添加用户账号
   - 分配角色和权限
   - 设置访问密码</p><p><li><strong>用户角色</strong></li>
   - 管理员：完全访问权限
   - 操作员：查看和控制权限
   - 访客：仅查看权限</p><hr><h2>💡 实用技巧</h2><h3>🎯 最佳实践</h3><p><li><strong>项目规划</strong></li>
   - 先设计整体架构
   - 划分功能模块
   - 制定命名规范</p><p><li><strong>标签管理</strong></li>
   - 使用清晰的标签名称
   - 添加描述和单位
   - 合理组织标签分组</p><p><li><strong>界面设计</strong></li>
   - 保持界面简洁
   - 使用一致的配色
   - 考虑移动端适配</p><p><li><strong>性能优化</strong></li>
   - 合理设置数据更新频率
   - 避免过多动画效果
   - 使用缓存减少请求</p><h3>⚠️ 常见问题</h3><table>
<tr><th>问题</th><th>解决方案</th></tr>
<tr><td>设备连接失败</td><td>检查 IP 地址、端口、网络连接</td></tr>
<tr><td>数据不更新</td><td>检查标签配置、设备通信状态</td></tr>
<tr><td>界面显示异常</td><td>清除浏览器缓存、检查浏览器兼容性</td></tr>
<tr><td>报警不触发</td><td>检查报警条件、阈值设置</td></tr>
</table><hr><h2>🎉 恭喜！</h2><p>您已经完成了 FUXA 的快速入门学习！</p><h3>下一步学习</h3><p>📚 <strong>进阶教程</strong>：
<ul><li><a href="#section-HowTo-configure-Script" class="internal-link">脚本配置</a> - 使用 JavaScript 增强功能</li>
<li><a href="#section-HowTo-configure-events" class="internal-link">事件配置</a> - 配置交互事件</li>
<li><a href="#section-HowTo-Scheduler" class="internal-link">调度器</a> - 设置定时任务</li>
<li><a href="#section-HowTo-WebSockets" class="internal-link">WebSocket</a> - 实时数据推送</li>
</ul>
🌟 <strong>高级功能</strong>：
<ul><li>自定义组件开发</li>
<li>第三方系统集成</li>
<li>数据库集成</li>
<li>移动端优化</li>
</ul>
<hr></p><h2>📞 获取帮助</h2><p>遇到问题？这里有一些资源可以帮助您：</p><p><ul><li>📖 <strong>完整文档</strong>：查看 FUXA Wiki</li>
<li>💬 <strong>社区讨论</strong>：GitHub Issues</li>
<li>🎥 <strong>视频教程</strong>：官方 YouTube 频道</li>
<li>📧 <strong>技术支持</strong>：联系开发团队</li>
</ul>
<hr></p><blockquote>💡 <strong>提示</strong>：实践是最好的学习方式！建议您跟随教程动手操作，创建自己的第一个 FUXA 项目。</blockquote><hr><p><strong>关注我们，获取更多工业自动化技术干货！</strong> 🎯</p><p><div style="display: flex; justify-content: center; align-items: center; gap: 40px; margin: 30px 0;">
    <div style="text-align: center;">
        <img src="images/微信公众号.jpg" alt="微信公众号" style="width: 200px; height: 200px; object-fit: contain;">
        <p style="margin: 10px 0 0 0; font-size: 14px; color: #666;">微信公众号</p>
    </div>
    <div style="text-align: center;">
        <img src="images/单人二维码.png" alt="技术支持" style="width: 200px; height: 200px; object-fit: contain;">
        <p style="margin: 10px 0 0 0; font-size: 14px; color: #666;">技术支持</p>
    </div>
</div></p>
        </div>
        <div class="content-section" id="section-03-安装和运行指南">
            <h1>🔧 FUXA 安装和运行指南</h1><hr><h2>📋 技术架构</h2><p>FUXA 采用以下技术栈开发：</p><table>
<tr><th>组件</th><th>技术</th><th>说明</th></tr>
<tr><td><strong>后端</strong></td><td>Node.js</td><td>服务器端运行环境</td></tr>
<tr><td><strong>前端</strong></td><td>Angular</td><td>Web 应用框架</td></tr>
</table><hr><h2>🎯 安装方式总览</h2><p>FUXA 提供多种安装方式，您可以根据需求选择最适合的一种：<pre><code class="">┌─────────────────────────────────────────────────────────┐
│  FUXA 安装方式                                            │
├─────────────────────────────────────────────────────────┤
│  1️⃣ 预编译 Electron 应用（推荐新手）                      │
│  2️⃣ Docker Compose（推荐生产环境）                       │
│  3️⃣ Docker（灵活部署）                                   │
│  4️⃣ 从源码构建自定义 Docker 镜像（高级用户）             │
│  5️⃣ NPM 安装（适合开发者）                                │
│  6️⃣ 最新发布版本（最简单）                                │
└─────────────────────────────────────────────────────────┘
</code></pre><hr><h2>方式 1️⃣：预编译 Electron 应用（推荐新手）</h2><h3>📥 下载步骤</h3><p><li>访问 GitHub Actions 页面：</li>
   <pre><code class="">   https://github.com/frangoteam/FUXA/actions/workflows/electron_latest.yml
   </code></pre><li>点击工作流程，滚动到底部的"Artifacts"部分</li></p><p><li>点击适合您系统的下载图标</li></p><p><img src="https://github.com/user-attachments/assets/cf0e5282-f1ef-48b3-a122-de2a2754cf19" alt=""></p><p><h3>✅ 优点</h3>
<ul><li>✅ 开箱即用，无需配置</li>
<li>✅ 包含所有依赖</li>
<li>✅ 适合 Windows/Mac/Linux</li>
<li>✅ 新手友好</li>
</ul>
<h3>🌐 访问 FUXA</h3></p><p>安装完成后，通过浏览器访问：</p><p>
<pre><code class="">http://localhost:1881
</code></pre></p><p>或使用主机 IP 地址：</p><p>
<pre><code class="">http://主机IP:1881
</code></pre></p><hr><h2>方式 2️⃣：Docker Compose（推荐生产环境）</h2><h3>📦 前置要求</h3><p>已安装 Docker</p><h3>🚀 安装步骤</h3><h4>步骤 1：安装 Docker（如未安装）</h4><pre><code class="bash">curl -fsSL https://get.docker.com -o get-docker.sh
sudo sh ./get-docker.sh
</code></pre><h4>步骤 2：创建目录</h4><pre><code class="bash">cd
mkdir docker
mkdir fuxa
cd docker/fuxa
</code></pre><h4>步骤 3：创建 docker-compose.yml</h4><pre><code class="bash">sudo nano docker-compose.yml
</code></pre><h4>步骤 4：编辑配置文件</h4><p>将以下内容粘贴到文件中：<pre><code class="yaml">version: '3.5'</p><p>services:
    fuxa:
        image: frangoteam/fuxa:latest
        network_mode: "host"
        volumes:
            - ./fuxa_appdata:/usr/src/app/FUXA/server/_appdata
            - ./fuxa_db:/usr/src/app/FUXA/server/_db
            - ./fuxa_logs:/usr/src/app/FUXA/server/_logs
        environment:
            - TZ=Asia/Shanghai
        restart: always
</code></pre><strong>配置说明</strong>：</p><table>
<tr><th>参数</th><th>说明</th><th>建议值</th></tr>
<tr><td><code>TZ</code></td><td>时区设置</td><td>Asia/Shanghai（中国）</td></tr>
<tr><td><code>restart</code></td><td>重启策略</td><td>always（自动重启）</td></tr>
<tr><td><code>network_mode</code></td><td>网络模式</td><td>host（主机网络）</td></tr>
</table><p><strong>⚠️ 注意</strong>：
<ul><li>此配置文件使用主机网络模式（host），使 Docker 容器与主机在同一网络</li>
<li>适合直接访问 PLC/数据库等设备</li>
<li>仅适用于 Linux 系统</li>
<li>如需在 Windows 运行，请使用桥接网络模式（bridge）</li>
</ul>
<strong>Windows 配置</strong>：</p><p>
<pre><code class="yaml">network_mode: "bridge"
ports:
    - "1881:1881"
</code></pre></p><h4>步骤 5：启动 Docker Compose</h4><pre><code class="bash">sudo docker compose up -d
</code></pre><h3>✅ 优点</h3>
<ul><li>✅ 数据持久化</li>
<li>✅ 易于备份和迁移</li>
<li>✅ 自动重启</li>
<li>✅ 生产环境推荐</li>
</ul>
<hr></p><h2>方式 3️⃣：Docker（灵活部署）</h2><h3>🚀 快速启动</h3><pre><code class="bash">docker pull frangoteam/fuxa:latest
docker run -d -p 1881:1881 frangoteam/fuxa:latest
</code></pre><h3>💾 持久化存储</h3><p>如需持久化应用数据（项目）、历史数据（标签历史）、日志和资源图片，使用以下命令：<pre><code class="bash">docker run -d \
  -p 1881:1881 \
  -v fuxa_appdata:/usr/src/app/FUXA/server/_appdata \
  -v fuxa_db:/usr/src/app/FUXA/server/_db \
  -v fuxa_logs:/usr/src/app/FUXA/server/_logs \
  -v fuxa_shapes:/usr/src/app/FUXA/client/assets/lib/svgeditor/shapes \
  -v fuxa_images:/usr/src/app/FUXA/server/_images \
  frangoteam/fuxa:latest
</code></pre><h3>📂 数据卷说明</h3><table>
<tr><th>数据卷</th><th>用途</th></tr>
<tr><td><code>fuxa_appdata</code></td><td>应用数据（项目文件）</td></tr>
<tr><td><code>fuxa_db</code></td><td>历史数据库</td></tr>
<tr><td><code>fuxa_logs</code></td><td>日志文件</td></tr>
<tr><td><code>fuxa_shapes</code></td><td>自定义形状</td></tr>
<tr><td><code>fuxa_images</code></td><td>图片资源</td></tr>
</table><hr><h2>方式 4️⃣：从源码构建自定义 Docker 镜像（高级用户）</h2><h3>🏗️ 构建步骤</h3><h4>步骤 1：创建工作目录</h4><pre><code class="bash">cd
mkdir docker
mkdir fuxa
cd docker/fuxa
mkdir fuxa-build
cd fuxa-build
</code></pre><h4>步骤 2：下载 Dockerfile</h4><pre><code class="bash">wget https://raw.githubusercontent.com/frangoteam/FUXA/master/Dockerfile
</code></pre><h4>步骤 3：构建镜像</h4><pre><code class="bash">sudo docker build -t fuxa-custom-image-name --no-cache .
</code></pre><strong>💡 提示</strong>：默认从最新 master 分支构建，您可以编辑 Dockerfile 修改分支。</p><h4>步骤 4：使用自定义镜像</h4><p>创建 <code>docker-compose.yml</code>：<pre><code class="yaml">version: '3.5'</p><p>services:
    fuxa:
        image: fuxa-custom-image-name
        network_mode: "host"
        volumes:
            - ./fuxa_appdata:/usr/src/app/FUXA/server/_appdata
            - ./fuxa_db:/usr/src/app/FUXA/server/_db
            - ./fuxa_logs:/usr/src/app/FUXA/server/_logs
        environment:
            - TZ=Asia/Shanghai
        restart: always
</code></pre><h3>✅ 优点</h3>
<ul><li>✅ 完全自定义</li>
<li>✅ 可以修改源码</li>
<li>✅ 适合深度定制需求</li>
</ul>
<hr></p><h2>方式 5️⃣：NPM 安装（适合开发者）</h2><h3>📦 前置要求</h3><p>需要安装 <strong>Node.js</strong> 版本 18 或更高</p><h3>⚠️ 重要提示</h3><p>在 Linux 系统上使用 Node.js 18 版本时，安装可能会遇到挑战。</p><p>如果您不需要通过 S7 协议与西门子 PLC 通信，可以从以下精简版本安装：</p><p>
<pre><code class="">@frangoteam/fuxa-min
</code></pre></p><h3>🚀 安装步骤</h3><pre><code class="bash">npm install -g --unsafe-perm @frangoteam/fuxa
fuxa
</code></pre><h3>✅ 优点</h3>
<ul><li>✅ 适合开发者</li>
<li>✅ 易于调试</li>
<li>✅ 可以修改源码</li>
</ul>
<hr></p><h2>方式 6️⃣：最新发布版本（最简单）</h2><h3>📥 下载步骤</h3><p><li>访问 FUXA 发布页面：</li>
   <pre><code class="">   https://github.com/frangoteam/FUXA/releases
   </code></pre><li>下载最新版本的压缩包</li></p><p><li>解压到本地目录</li></p><h3>⚠️ 重要提示</h3><p>在 Linux 系统上使用 Node.js 18 版本时，安装可能会遇到挑战。</p><p>如果您不需要通过 S7 协议与西门子 PLC 通信，可以从 <code>server/package.json</code> 中删除 <code>node-snap7</code> 库。</p><h3>🚀 运行步骤</h3><pre><code class="bash">cd ./server
npm install
npm start
</code></pre><h3>✅ 优点</h3>
<ul><li>✅ 最简单</li>
<li>✅ 无需额外工具</li>
<li>✅ 适合快速测试</li>
</ul>
<hr></p><h2>🌐 访问 FUXA</h2><p>无论使用哪种安装方式，完成后都可以通过浏览器访问：<pre><code class="">http://localhost:1881
</code></pre><strong>推荐使用 Chrome 浏览器以获得最佳体验</strong></p><hr><h2>🖥️ 配置为 HMI（仅限 Linux）</h2><p>此配置仅在 Linux 上测试过，但某些步骤可能在 Windows 上也适用。</p><p>我们将使用 Electron 而不是 Web 浏览器，因为它更轻量，且与触摸屏配合良好（可以禁用右键菜单等）。</p><p>应用程序仅访问已运行的 FUXA Web 服务器。</p><h3>🚀 安装步骤</h3><h4>步骤 1：更新系统</h4><pre><code class="bash">sudo apt-get update
</code></pre><h4>步骤 2：安装 Node.js 18</h4><pre><code class="bash">curl -fsSL https://deb.nodesource.com/setup_18.x | sudo -E bash -
sudo apt-get install -y nodejs
</code></pre><h4>步骤 3：验证安装</h4><pre><code class="bash">node -v
npm -v
</code></pre><h4>步骤 4：安装 Electron</h4><pre><code class="bash">sudo npm install -g electron --unsafe-perm=true --allow-root
</code></pre><h4>步骤 5：创建项目目录</h4><pre><code class="bash">cd /opt
sudo mkdir electron
cd electron
sudo mkdir fuxa-electron
cd fuxa-electron
</code></pre><h4>步骤 6：初始化项目</h4><pre><code class="bash">sudo npm init -y
</code></pre><h4>步骤 7：安装 Electron 依赖</h4><pre><code class="bash">sudo npm install electron --save-dev
</code></pre><h4>步骤 8：创建主程序文件</h4><pre><code class="bash">sudo nano main.js
</code></pre>粘贴以下内容：<pre><code class="javascript">const { app, BrowserWindow } = require('electron');</p><p>function createWindow() {
  const win = new BrowserWindow({
    fullscreen: true, // 启用全屏模式
    webPreferences: {
      nodeIntegration: false,
      contextIsolation: true,
    }
  });</p><p>  win.loadURL('http://localhost:1881'); // 替换为您的 Web 服务器 URL
}</p><p>app.whenReady().then(createWindow);
</code></pre><h4>步骤 9：编辑 package.json</h4><pre><code class="bash">sudo nano package.json
</code></pre>修改为：<pre><code class="json">{
  "name": "fuxa-electron",
  "version": "1.0.0",
  "main": "main.js",
  "scripts": {
    "start": "electron ."
  },
  "description": "FUXA Electron HMI",
  "devDependencies": {
    "electron": "^31.3.1"
  }
}
</code></pre><h4>步骤 10：测试运行</h4><pre><code class="bash">npm start
</code></pre><h4>步骤 11：设置自动启动</h4><p>创建启动脚本：<pre><code class="bash">sudo nano /opt/fuxa-electron-startup.sh
</code></pre>添加以下内容：<pre><code class="bash">#!/bin/bash
cd /opt/electron/fuxa-electron
npm start
</code></pre>设置执行权限：<pre><code class="bash">sudo chmod +x /opt/fuxa-electron-startup.sh
</code></pre>创建系统服务：<pre><code class="bash">systemctl edit --user --force --full fuxa-electron-startup.service
</code></pre>添加以下内容：<pre><code class="ini">[Unit]
Description=Start Fuxa Electron Script
After=default.target</p><p>[Service]
ExecStart=/opt/fuxa-electron-startup.sh</p><p>[Install]
WantedBy=default.target
</code></pre>启用服务：<pre><code class="bash">systemctl enable --user fuxa-electron-startup.service
</code></pre><h3>✅ 优点</h3>
<ul><li>✅ 适合工业 HMI</li>
<li>✅ 全屏显示</li>
<li>✅ 触摸屏友好</li>
<li>✅ 自动启动</li>
</ul>
<hr></p><h2>📊 安装方式对比</h2><table>
<tr><th>安装方式</th><th>难度</th><th>适用场景</th><th>推荐指数</th></tr>
<tr><td><strong>Electron 应用</strong></td><td>⭐</td><td>新手、快速测试</td><td>⭐⭐⭐⭐⭐</td></tr>
<tr><td><strong>Docker Compose</strong></td><td>⭐⭐</td><td>生产环境</td><td>⭐⭐⭐⭐⭐</td></tr>
<tr><td><strong>Docker</strong></td><td>⭐⭐</td><td>灵活部署</td><td>⭐⭐⭐⭐</td></tr>
<tr><td><strong>源码构建</strong></td><td>⭐⭐⭐⭐</td><td>高级定制</td><td>⭐⭐⭐</td></tr>
<tr><td><strong>NPM 安装</strong></td><td>⭐⭐</td><td>开发者</td><td>⭐⭐⭐⭐</td></tr>
<tr><td><strong>发布版本</strong></td><td>⭐</td><td>快速测试</td><td>⭐⭐⭐⭐</td></tr>
</table><hr><h2>💡 常见问题</h2><h3>❓ 安装后无法访问</h3><p><strong>解决方案</strong>：
<li>检查防火墙设置</li>
<li>确认端口 1881 未被占用</li>
<li>查看服务日志</li></p><h3>❓ Docker 容器无法连接设备</h3><p><strong>解决方案</strong>：
<li>使用 <code>network_mode: "host"</code></li>
<li>检查网络配置</li>
<li>确认设备在同一网络</li></p><h3>❓ Linux 上 Node.js 18 安装失败</h3><p><strong>解决方案</strong>：
<li>使用 <code>@frangoteam/fuxa-min</code> 精简版本</li>
<li>移除 <code>node-snap7</code> 依赖</li>
<li>使用 Docker 部署</li></p><hr><h2>🎉 开始使用</h2><p>安装完成后，访问 http://localhost:1881 开始使用 FUXA！</p><p>默认登录信息：
<ul><li>用户名：<code>admin</code></li>
<li>密码：<code>admin</code></li>
</ul>
<hr></p><blockquote>💡 <strong>提示</strong>：生产环境建议使用 Docker Compose 部署，并配置数据备份策略。</blockquote><hr><p><strong>关注我们，获取更多工业自动化技术干货！</strong> 🎯</p><p><div style="display: flex; justify-content: center; align-items: center; gap: 40px; margin: 30px 0;">
    <div style="text-align: center;">
        <img src="images/微信公众号.jpg" alt="微信公众号" style="width: 200px; height: 200px; object-fit: contain;">
        <p style="margin: 10px 0 0 0; font-size: 14px; color: #666;">微信公众号</p>
    </div>
    <div style="text-align: center;">
        <img src="images/单人二维码.png" alt="技术支持" style="width: 200px; height: 200px; object-fit: contain;">
        <p style="margin: 10px 0 0 0; font-size: 14px; color: #666;">技术支持</p>
    </div>
</div></p>
        </div>
        <div class="content-section" id="section-04-设备和标签配置">
            <h1>🔌 FUXA 设备和标签配置教程</h1><hr><h2>📋 概述</h2><p>在 FUXA 中，<strong>设备</strong>（Device）和<strong>标签</strong>（Tag）是数据采集的核心概念：</p><p><ul><li><strong>设备</strong>：表示与外部设备（PLC、传感器等）的连接</li>
<li><strong>标签</strong>：表示从设备读取的具体数据点（温度、压力、开关状态等）</li>
</ul>
<hr></p><h2>🎯 配置流程</h2><pre><code class="">┌─────────────────────────────────────────────────────────┐
│  设备和标签配置流程                                        │
├─────────────────────────────────────────────────────────┤
│  1️⃣ 进入编辑器的"连接"（Connections）页面                 │
│  2️⃣ 添加设备连接                                          │
│  3️⃣ 配置设备通信参数                                      │
│  4️⃣ 测试设备连接                                          │
│  5️⃣ 添加数据标签                                          │
│  6️⃣ 配置标签属性                                          │
└─────────────────────────────────────────────────────────┘
</code></pre><hr><h2>🚀 快速开始</h2><h3>步骤 1：进入连接配置页面</h3><p>在 FUXA 编辑器中，点击左侧菜单的 <strong>"连接"</strong>（Connections）选项。</p><p><img src="images/setup-connections.png" alt=""></p><hr><h2>📡 添加设备连接</h2><h3>1️⃣ OPC UA 设备</h3><p>OPC UA 是工业自动化的标准协议，广泛应用于各种工业设备。</p><h4>添加步骤</h4><p><li>点击"添加设备"按钮</li>
<li>设备类型选择 <strong>"OPC UA"</strong></li>
<li>填写设备名称（如：OPC_UA_Server）</li>
<li>配置连接参数：</li>
   - <strong>端点 URL</strong>：如 <code>opc.tcp://192.168.1.100:4840</code>
   - <strong>安全策略</strong>：None/Basic128Rsa15/Basic256
   - <strong>用户名/密码</strong>：如需要认证
<li>点击"测试连接"</li>
<li>连接成功后点击"保存"</li></p><p><img src="images/fuxa-device.gif" alt=""></p><h4>添加 OPC UA 标签</h4><p><strong>⚠️ 重要</strong>：设备必须先连接成功才能添加标签。</p><p><li>点击设备展开标签列表</li>
<li>点击"添加标签"按钮</li>
<li>浏览 OPC UA 服务器节点树</li>
<li>选择要监控的数据点</li>
<li>配置标签属性：</li>
   - <strong>标签名称</strong>：如 <code>PLC_温度</code>
   - <strong>数据类型</strong>：自动检测或手动选择
   - <strong>采样间隔</strong>：数据更新频率（如 1000ms）
<li>点击"保存"</li></p><p><img src="images/fuxa-opcuatag.gif" alt=""></p><hr><h3>2️⃣ Modbus 设备</h3><p>Modbus 是最常用的工业通信协议之一，支持 RTU（串口）和 TCP（以太网）两种模式。</p><h4>前置要求</h4><p>在添加 Modbus 连接之前，需要在 <strong>"插件"</strong>（Plugins）中安装 Modbus 驱动。</p><h4>添加 Modbus RTU 设备</h4><p><li>点击"添加设备"按钮</li>
<li>设备类型选择 <strong>"Modbus > Modbus RTU"</strong></li>
<li>配置连接参数：</li></p><table>
<tr><th>参数</th><th>说明</th><th>示例</th></tr>
<tr><td><strong>串口</strong></td><td>串口设备路径</td><td><code>/dev/ttyUSB0</code> 或 <code>COM1</code></td></tr>
<tr><td><strong>波特率</strong></td><td>通信速率</td><td>9600, 19200, 38400</td></tr>
<tr><td><strong>数据位</strong></td><td>数据位数</td><td>7, 8</td></tr>
<tr><td><strong>停止位</strong></td><td>停止位数</td><td>1, 2</td></tr>
<tr><td><strong>校验位</strong></td><td>校验方式</td><td>None, Even, Odd</td></tr>
<tr><td><strong>从站地址</strong></td><td>Modbus 从站 ID</td><td>1-247</td></tr>
</table><p><li>点击"测试连接"</li>
<li>连接成功后点击"保存"</li></p><h4>添加 Modbus TCP 设备</h4><p><li>点击"添加设备"按钮</li>
<li>设备类型选择 <strong>"Modbus > Modbus TCP"</strong></li>
<li>配置连接参数：</li></p><table>
<tr><th>参数</th><th>说明</th><th>示例</th></tr>
<tr><td><strong>IP 地址</strong></td><td>设备 IP 地址</td><td><code>192.168.1.101</code></td></tr>
<tr><td><strong>端口</strong></td><td>Modbus TCP 端口</td><td><code>502</code></td></tr>
<tr><td><strong>从站地址</strong></td><td>Modbus 从站 ID</td><td><code>1-247</code></td></tr>
<tr><td><strong>超时时间</strong></td><td>连接超时（毫秒）</td><td><code>3000</code></td></tr>
</table><p><li>点击"测试连接"</li>
<li>连接成功后点击"保存"</li></p><p><img src="images/fuxa-modbus.gif" alt=""></p><h4>添加 Modbus 标签</h4><p><li>点击设备展开标签列表</li>
<li>点击"添加标签"按钮</li>
<li>配置标签属性：</li></p><table>
<tr><th>参数</th><th>说明</th><th>示例</th></tr>
<tr><td><strong>标签名称</strong></td><td>标签标识</td><td><code>Modbus_温度</code></td></tr>
<tr><td><strong>功能码</strong></td><td>Modbus 功能码</td><td>3（读保持寄存器）</td></tr>
<tr><td><strong>寄存器地址</strong></td><td>起始地址</td><td><code>40001</code></td></tr>
<tr><td><strong>数据类型</strong></td><td>数据类型</td><td>Float, Int16, UInt16</td></tr>
<tr><td><strong>数量</strong></td><td>读取数量</td><td><code>1</code></td></tr>
<tr><td><strong>单位</strong></td><td>数据单位</td><td><code>℃</code>, <code>bar</code></td></tr>
</table><p><li>点击"保存"</li></p><hr><h3>3️⃣ MQTT 设备</h3><p>MQTT 是轻量级的物联网消息协议，适合连接 IoT 设备。</p><h4>添加 MQTT 连接</h4><p><li>点击"添加设备"按钮</li>
<li>设备类型选择 <strong>"MQTT"</strong></li>
<li>配置连接参数：</li></p><table>
<tr><th>参数</th><th>说明</th><th>示例</th></tr>
<tr><td><strong>Broker 地址</strong></td><td>MQTT 服务器地址</td><td><code>192.168.1.102</code></td></tr>
<tr><td><strong>端口</strong></td><td>MQTT 端口</td><td><code>1883</code>（非加密）或 <code>8883</code>（加密）</td></tr>
<tr><td><strong>客户端 ID</strong></td><td>客户端标识</td><td><code>fuxa_client</code></td></tr>
<tr><td><strong>用户名/密码</strong></td><td>认证信息</td><td>如需要</td></tr>
<tr><td><strong>QoS</strong></td><td>服务质量等级</td><td>0, 1, 2</td></tr>
</table><p><li>点击"测试连接"</li>
<li>连接成功后点击"保存"</li></p><p><img src="images/fuxa-mqtt.gif" alt=""></p><h4>添加 MQTT 订阅（标签）</h4><p><li>点击设备展开标签列表</li>
<li>点击"添加标签"按钮</li>
<li>配置订阅属性：</li></p><table>
<tr><th>参数</th><th>说明</th><th>示例</th></tr>
<tr><td><strong>标签名称</strong></td><td>标签标识</td><td><code>MQTT_温度</code></td></tr>
<tr><td><strong>主题</strong></td><td>MQTT 主题</td><td><code>factory/zone1/temperature</code></td></tr>
<tr><td><strong>QoS</strong></td><td>服务质量等级</td><td>0, 1, 2</td></tr>
<tr><td><strong>数据类型</strong></td><td>数据类型</td><td>Float, Int, String</td></tr>
<tr><td><strong>JSON 路径</strong></td><td>JSON 数据路径（如需要）</td><td><code>$.value</code></td></tr>
</table><p><li>点击"保存"</li></p><hr><h3>4️⃣ WebAPI 设备</h3><p>WebAPI 允许从 REST API 获取 JSON 格式的数据。</p><h4>添加 WebAPI 连接</h4><p><li>点击"添加设备"按钮</li>
<li>设备类型选择 <strong>"WebAPI"</strong></li>
<li>配置连接参数：</li></p><table>
<tr><th>参数</th><th>说明</th><th>示例</th></tr>
<tr><td><strong>基础 URL</strong></td><td>API 基础地址</td><td><code>http://api.example.com</code></td></tr>
<tr><td><strong>请求方法</strong></td><td>HTTP 方法</td><td>GET, POST</td></tr>
<tr><td><strong>请求头</strong></td><td>自定义请求头</td><td><code>Authorization: Bearer xxx</code></td></tr>
<tr><td><strong>超时时间</strong></td><td>请求超时（毫秒）</td><td><code>5000</code></td></tr>
</table><p><li>点击"测试连接"</li>
<li>连接成功后点击"保存"</li></p><p><img src="images/fuxa-webapi.gif" alt=""></p><h4>添加 WebAPI 标签</h4><p><li>点击设备展开标签列表</li>
<li>点击"添加标签"按钮</li>
<li>配置标签属性：</li></p><table>
<tr><th>参数</th><th>说明</th><th>示例</th></tr>
<tr><td><strong>标签名称</strong></td><td>标签标识</td><td><code>API_温度</code></td></tr>
<tr><td><strong>端点路径</strong></td><td>API 路径</td><td><code>/sensors/temperature</code></td></tr>
<tr><td><strong>数据类型</strong></td><td>数据类型</td><td>Float, Int, String</td></tr>
<tr><td><strong>JSON 路径</strong></td><td>JSON 数据路径</td><td><code>$.data.value</code></td></tr>
<tr><td><strong>刷新间隔</strong></td><td>刷新频率（毫秒）</td><td><code>5000</code></td></tr>
</table><p><li>点击"保存"</li></p><hr><h2>⚙️ 标签高级选项</h2><h3>数据类型设置</h3><p>如果您的标签类型没有定义的数据类型，可以手动设置。</p><p><strong>示例</strong>：TIME 数据类型不是预定义类型，但基础数据类型通常是 int64 或 uint64，时间以毫秒为单位。</p><p><img src="https://github.com/user-attachments/assets/6fbbd718-2ab0-4bac-85dd-8f0339540ca5" alt=""></p><h3>缩放脚本（Scale Script）</h3><p>您可以在标签选项中使用缩放脚本进行数据类型转换等操作。</p><p><strong>示例</strong>：TIME 数据是一个包含 LOW 和 HIGH 的数组，我们可以创建一个简单的脚本来获取数组元素并返回为数字类型。</p><p><img src="https://github.com/user-attachments/assets/3acb42db-bfee-4eed-a385-e8fe264e7ddd" alt=""></p><h4>⚠️ 重要提示</h4><p><li><strong>脚本参数必须命名为 <code>value</code></strong>，因为有一个过滤器来显示相关的脚本供选择</li>
<li><strong>不要在此脚本中使用注释</strong>，因为不支持注释</li></p><h4>读取脚本示例</h4><p>返回数组元素的读取脚本：<pre><code class="javascript">// 读取脚本：从 TIME 数组中提取值
function value(val) {
  // val 是从设备读取的原始值（数组）
  // 返回第一个元素作为实际值
  return val[0];
}
</code></pre><img src="https://github.com/user-attachments/assets/60b5ce2b-4354-4b18-bc4f-eb73e9fc5bd0" alt=""></p><h4>写入脚本示例</h4><p>返回实际标签值的写入脚本：<pre><code class="javascript">// 写入脚本：将值转换为设备需要的格式
function value(val) {
  // val 是要写入的值
  // 返回设备需要的格式（数组）
  return [val];
}
</code></pre><img src="https://github.com/user-attachments/assets/51cfad3f-9354-45e5-a0a5-206507d1ca93" alt=""></p><hr><h2>📊 标签属性详解</h2><h3>基本属性</h3><table>
<tr><th>属性</th><th>说明</th><th>示例</th></tr>
<tr><td><strong>标签名称</strong></td><td>唯一标识符</td><td><code>PLC_车间1_温度</code></td></tr>
<tr><td><strong>设备</strong></td><td>关联的设备</td><td><code>PLC_S71200</code></td></tr>
<tr><td><strong>数据类型</strong></td><td>数据类型</td><td>Float, Int16, Bool, String</td></tr>
<tr><td><strong>地址</strong></td><td>设备地址</td><td><code>DB1.DBD0</code> 或 <code>40001</code></td></tr>
<tr><td><strong>单位</strong></td><td>数据单位</td><td><code>℃</code>, <code>bar</code>, <code>m/s</code></td></tr>
<tr><td><strong>描述</strong></td><td>标签说明</td><td><code>车间1温度传感器</code></td></tr>
</table><h3>高级属性</h3><table>
<tr><th>属性</th><th>说明</th><th>示例</th></tr>
<tr><td><strong>采样间隔</strong></td><td>数据更新频率</td><td><code>1000</code>（毫秒）</td></tr>
<tr><td><strong>死区</strong></td><td>变化阈值（减少更新）</td><td><code>0.5</code></td></tr>
<tr><td><strong>最小值/最大值</strong></td><td>数据范围</td><td><code>0</code> / <code>100</code></td></tr>
<tr><td><strong>初始值</strong></td><td>启动时的默认值</td><td><code>0</code></td></tr>
<tr><td><strong>只读</strong></td><td>是否只读</td><td><code>true</code> / <code>false</code></td></tr>
</table><hr><h2>💡 最佳实践</h2><h3>1️⃣ 命名规范</h3><p>使用清晰的命名规范，便于管理和维护：<pre><code class="">设备类型_位置_参数_单位
</code></pre><strong>示例</strong>：
<ul><li><code>PLC_车间1_温度_℃</code></li>
<li><code>Modbus_车间2_压力_bar</code></li>
<li><code>MQTT_设备1_状态</code></li>
</ul>
<h3>2️⃣ 标签分组</h3></p><p>使用前缀或后缀对标签进行分组：<pre><code class=""># 按车间分组
车间1_温度
车间1_压力
车间2_温度
车间2_压力</p><p># 按设备分组
PLC1_温度
PLC1_压力
PLC2_温度
PLC2_压力
</code></pre><h3>3️⃣ 数据类型选择</h3><p>根据实际数据选择合适的数据类型：</p><table>
<tr><th>数据类型</th><th>适用场景</th><th>范围</th></tr>
<tr><td><strong>Bool</strong></td><td>开关状态</td><td>true/false</td></tr>
<tr><td><strong>Int16</strong></td><td>整数</td><td>-32768 ~ 32767</td></tr>
<tr><td><strong>UInt16</strong></td><td>无符号整数</td><td>0 ~ 65535</td></tr>
<tr><td><strong>Int32</strong></td><td>大整数</td><td>-2^31 ~ 2^31-1</td></tr>
<tr><td><strong>Float</strong></td><td>浮点数</td><td>±3.4E38</td></tr>
<tr><td><strong>String</strong></td><td>文本</td><td>任意字符串</td></tr>
</table><h3>4️⃣ 采样间隔设置</h3><p>合理设置采样间隔，平衡实时性和性能：</p><table>
<tr><th>数据类型</th><th>建议采样间隔</th><th>说明</th></tr>
<tr><td><strong>实时控制</strong></td><td>100-500ms</td><td>需要快速响应的控制信号</td></tr>
<tr><td><strong>过程监控</strong></td><td>1000-2000ms</td><td>温度、压力等过程参数</td></tr>
<tr><td><strong>状态监控</strong></td><td>5000-10000ms</td><td>设备状态、报警信息</td></tr>
<tr><td><strong>历史数据</strong></td><td>10000-60000ms</td><td>用于趋势分析的数据</td></tr>
</table><hr><h2>❓ 常见问题</h2><h3>❓ 设备连接失败</h3><p><strong>可能原因</strong>：
<li>IP 地址或端口错误</li>
<li>网络不通</li>
<li>设备未启动</li>
<li>防火墙阻止</li></p><p><strong>解决方案</strong>：
<li>检查设备 IP 地址和端口</li>
<li>使用 ping 命令测试网络连通性</li>
<li>确认设备已上电并运行</li>
<li>检查防火墙设置</li></p><h3>❓ 标签数据不更新</h3><p><strong>可能原因</strong>：
<li>标签地址错误</li>
<li>设备未输出数据</li>
<li>采样间隔设置过大</li></p><p><strong>解决方案</strong>：
<li>检查标签地址是否正确</li>
<li>确认设备正在输出数据</li>
<li>调整采样间隔</li></p><h3>❓ 数据类型不匹配</h3><p><strong>可能原因</strong>：
<li>设备数据类型与标签设置不一致</li>
<li>需要使用缩放脚本转换</li></p><p><strong>解决方案</strong>：
<li>检查设备数据类型</li>
<li>使用缩放脚本进行类型转换</li></p><hr><h2>🎉 总结</h2><p>通过本教程，您已经学会了：</p><p>✅ 添加各种类型的设备连接（OPC UA、Modbus、MQTT、WebAPI）  
✅ 配置设备通信参数  
✅ 添加和配置数据标签  
✅ 使用高级选项（数据类型、缩放脚本）  
✅ 遵循最佳实践</p><p>下一步，学习如何使用这些标签创建可视化界面！</p><hr><blockquote>💡 <strong>提示</strong>：建议在添加大量标签前，先测试几个标签确保通信正常。</blockquote><hr><p><strong>关注我们，获取更多工业自动化技术干货！</strong> 🎯</p><p><div style="display: flex; justify-content: center; align-items: center; gap: 40px; margin: 30px 0;">
    <div style="text-align: center;">
        <img src="images/微信公众号.jpg" alt="微信公众号" style="width: 200px; height: 200px; object-fit: contain;">
        <p style="margin: 10px 0 0 0; font-size: 14px; color: #666;">微信公众号</p>
    </div>
    <div style="text-align: center;">
        <img src="images/单人二维码.png" alt="技术支持" style="width: 200px; height: 200px; object-fit: contain;">
        <p style="margin: 10px 0 0 0; font-size: 14px; color: #666;">技术支持</p>
    </div>
</div></p>
        </div>
        <div class="content-section" id="section-05-组件开发教程">
            <h1>🎨 FUXA 组件开发教程</h1><hr><h2>📋 概述</h2><p>FUXA 组件（Widgets）是基于 <strong>SVG</strong> 和 <strong>JavaScript</strong> 的自定义可视化元素，允许您创建完全个性化的界面组件。</p><h3>核心概念</h3><p><ul><li><strong>SVG</strong>：可缩放矢量图形，用于绘制组件外观</li>
<li><strong>JavaScript</strong>：用于实现组件的交互逻辑</li>
<li><strong>数据绑定</strong>：将组件与 FUXA 标签关联，实现数据交互</li>
</ul>
<hr></p><h2>🎯 组件基本结构</h2><p>FUXA 组件使用纯 SVG 和 JavaScript，通过 script 标签实现功能：<pre><code class="html"><svg>
  <!-- SVG 内容在这里 -->
  <rect x="10" y="10" width="100" height="50" fill="blue" /></p><p>  <!-- JavaScript 脚本在这里 -->
  <script>
    // JS 脚本内容
  </script>
</svg>
</code></pre><hr><h2>📤 数据传递机制</h2><h3>1️⃣ 从组件发送数据到 FUXA</h3><p>使用 <code>postValue</code> 函数将值从 SVG 发送到 FUXA：<pre><code class="javascript">function postValue(id, value) {
  console.error('Not defined!');
}
</code></pre><strong>使用方法</strong>：</p><p>
<pre><code class="javascript">// 调用函数，ID 必须与变量名完全匹配
postValue('_pn_value', someNewValue);
</code></pre></p><h3>2️⃣ 从 FUXA 接收数据到组件</h3><p>使用 <code>putValue</code> 函数从 FUXA 接收值到 SVG：<pre><code class="javascript">function putValue(id, value) {
  if (id === '_pn_value') {
    callFunction(value);
    newVar = value;
  }
}
</code></pre><strong>工作原理</strong>：
<ul><li>等待 FUXA 调用该函数</li>
<li>检查 ID 是否匹配我们需要的变量名</li>
<li>执行相应的处理逻辑</li>
</ul>
<hr></p><h2>🔢 参数类型</h2><p>FUXA 支持多种参数类型，用于在 SVG 脚本和 FUXA 之间传递数据：</p><table>
<tr><th>参数类型</th><th>前缀</th><th>说明</th><th>示例</th></tr>
<tr><td><strong>布尔型</strong></td><td><code>_pb_</code></td><td>true 或 false</td><td><code>_pb_enabled</code></td></tr>
<tr><td><strong>数值型</strong></td><td><code>_pn_</code></td><td>Int, Float, Real 等</td><td><code>_pn_value</code></td></tr>
<tr><td><strong>字符串型</strong></td><td><code>_ps_</code></td><td>字符串</td><td><code>_ps_text</code></td></tr>
<tr><td><strong>颜色型</strong></td><td><code>_pc_</code></td><td>十六进制颜色代码</td><td><code>_pc_color</code></td></tr>
</table><h3>示例</h3><pre><code class="javascript">//!export-start
let _pb_enabled = true;      // 布尔型参数
let _pn_value = 50;          // 数值型参数
let _ps_text = "Hello";      // 字符串型参数
let _pc_color = "#00ff00ff"; // 颜色型参数
//!export-end
</code></pre><hr><h2>📦 变量导出</h2><h3>导出注释</h3><p>变量必须包含在 <code>//!export-start</code> 和 <code>//!export-end</code> 注释之间：<pre><code class="javascript">//!export-start
let _pn_value = 50;
//!export-end
</code></pre><h3>在 FUXA 中使用</h3><p>导出后，变量将在 FUXA 的 SVG 属性面板中可用，您可以在那里绑定 FUXA 标签。</p><hr><h2>⚠️ 重要注意事项</h2><h3>1️⃣ setInterval 清理</h3><p>如果您使用 <code>setInterval</code>，必须在切换页面或进入编辑器时清除间隔，否则组件会因为另一个 <code>setInterval</code> 被调用而损坏。</p><h3>2️⃣ 检查 SVG 是否存在</h3><p>在执行任何操作前，检查 SVG 对象是否存在：<pre><code class="javascript">const checkDestroy = document.getElementById('svgIdName'); // 重要：必须是 SVG 的名称！
if (!checkDestroy) {
  clearBlinking();
  return;
}
</code></pre><h3>3️⃣ 使用 MutationObserver</h3><p>使用 MutationObserver 监控 SVG 元素的移除：<pre><code class="javascript">// 设置 MutationObserver 监听 SVG 元素的移除
const observer = new MutationObserver((mutations) => {
  mutations.forEach((mutation) => {
    mutation.removedNodes.forEach((node) => {
      if (node.id === 'svgIdName') { // 重要：必须是 SVG 的名称！
        clearBlinking();
        observer.disconnect();
      }
    });
  });
});</p><p>// 开始观察 body 或 SVG 的父元素
observer.observe(document.body, { childList: true, subtree: true });
</code></pre><h3>4️⃣ SVG ID 设置</h3><p>确保在 SVG 文件的顶部使用 SVG ID：<pre><code class="html"><svg id="svgIdName" width="200" height="100">
  <!-- SVG 内容 -->
</svg>
</code></pre><hr><h2>🎨 完整示例</h2><h3>示例 1：简单的温度计组件</h3><pre><code class="html"><svg id="tempGauge" width="200" height="300" xmlns="http://www.w3.org/2000/svg">
  <!-- 温度计背景 -->
  <rect x="50" y="20" width="100" height="260" fill="#f0f0f0" stroke="#333" stroke-width="2" rx="10" /></p><p>  <!-- 温度计刻度 -->
  <g id="scale">
    <!-- 刻度线将通过 JavaScript 动态生成 -->
  </g></p><p>  <!-- 温度值显示 -->
  <text id="tempValue" x="100" y="280" text-anchor="middle" font-size="24" fill="#333">
    0°C
  </text></p><p>  <script>
    //!export-start
    let _pn_temperature = 0;  // 温度值
    let _pn_minTemp = 0;      // 最小温度
    let _pn_maxTemp = 100;    // 最大温度
    let _pc_color = "#ff0000"; // 温度计颜色
    //!export-end</p><p>    // 初始化
    function init() {
      updateGauge();
    }</p><p>    // 更新温度计
    function updateGauge() {
      const temp = _pn_temperature;
      const min = _pn_minTemp;
      const max = _pn_maxTemp;</p><p>      // 计算温度百分比
      const percentage = (temp - min) / (max - min);
      const height = percentage * 220; // 220 是可用高度</p><p>      // 更新温度值显示
      document.getElementById('tempValue').textContent = temp + '°C';</p><p>      // 绘制温度条
      let existingBar = document.getElementById('tempBar');
      if (existingBar) {
        existingBar.remove();
      }</p><p>      const bar = document.createElementNS('http://www.w3.org/2000/svg', 'rect');
      bar.setAttribute('id', 'tempBar');
      bar.setAttribute('x', '60');
      bar.setAttribute('y', 260 - height);
      bar.setAttribute('width', '80');
      bar.setAttribute('height', height);
      bar.setAttribute('fill', _pc_color);
      bar.setAttribute('rx', '5');</p><p>      document.getElementById('tempGauge').appendChild(bar);
    }</p><p>    // 接收 FUXA 数据
    function putValue(id, value) {
      if (id === '_pn_temperature') {
        _pn_temperature = value;
        updateGauge();
      }
    }</p><p>    // 初始化
    init();</p><p>    // 清理函数
    function clearBlinking() {
      // 清理定时器等资源
    }</p><p>    // MutationObserver
    const checkDestroy = document.getElementById('tempGauge');
    if (!checkDestroy) {
      clearBlinking();
      return;
    }</p><p>    const observer = new MutationObserver((mutations) => {
      mutations.forEach((mutation) => {
        mutation.removedNodes.forEach((node) => {
          if (node.id === 'tempGauge') {
            clearBlinking();
            observer.disconnect();
          }
        });
      });
    });</p><p>    observer.observe(document.body, { childList: true, subtree: true });
  </script>
</svg>
</code></pre><h3>示例 2：带动画的指示灯</h3><pre><code class="html"><svg id="indicator" width="100" height="100" xmlns="http://www.w3.org/2000/svg">
  <!-- 指示灯圆形 -->
  <circle id="led" cx="50" cy="50" r="40" fill="#ccc" stroke="#333" stroke-width="2" /></p><p>  <!-- 文字标签 -->
  <text id="label" x="50" y="90" text-anchor="middle" font-size="12" fill="#333">
    状态
  </text></p><p>  <script>
    //!export-start
    let _pb_status = false;  // 状态（开/关）
    let _pc_onColor = "#00ff00";  // 开启颜色
    let _pc_offColor = "#ff0000"; // 关闭颜色
    let _ps_label = "状态";       // 标签文字
    //!export-end</p><p>    let blinkInterval = null;</p><p>    // 更新指示灯
    function updateIndicator() {
      const led = document.getElementById('led');
      const label = document.getElementById('label');</p><p>      // 更新标签文字
      label.textContent = _ps_label;</p><p>      // 更新颜色
      if (_pb_status) {
        led.setAttribute('fill', _pc_onColor);
      } else {
        led.setAttribute('fill', _pc_offColor);
      }
    }</p><p>    // 接收 FUXA 数据
    function putValue(id, value) {
      if (id === '_pb_status') {
        _pb_status = value;
        updateIndicator();
      } else if (id === '_ps_label') {
        _ps_label = value;
        updateIndicator();
      }
    }</p><p>    // 初始化
    updateIndicator();</p><p>    // 清理函数
    function clearBlinking() {
      if (blinkInterval) {
        clearInterval(blinkInterval);
        blinkInterval = null;
      }
    }</p><p>    // MutationObserver
    const checkDestroy = document.getElementById('indicator');
    if (!checkDestroy) {
      clearBlinking();
      return;
    }</p><p>    const observer = new MutationObserver((mutations) => {
      mutations.forEach((mutation) => {
        mutation.removedNodes.forEach((node) => {
          if (node.id === 'indicator') {
            clearBlinking();
            observer.disconnect();
          }
        });
      });
    });</p><p>    observer.observe(document.body, { childList: true, subtree: true });
  </script>
</svg>
</code></pre><hr><h2>🎭 高级功能</h2><h3>1️⃣ 使用 CSS 样式</h3><p>您可以在 SVG 中使用 CSS 来美化组件：<pre><code class="html"><svg id="myWidget" width="200" height="200" xmlns="http://www.w3.org/2000/svg">
  <style>
    .button {
      cursor: pointer;
      transition: all 0.3s ease;
    }
    .button:hover {
      opacity: 0.8;
    }
    .button:active {
      transform: scale(0.95);
    }
  </style></p><p>  <rect id="btn" class="button" x="50" y="50" width="100" height="50" fill="#4CAF50" rx="5" />
  <text id="btnText" x="100" y="80" text-anchor="middle" fill="white" font-size="16">
    点击
  </text></p><p>  <script>
    const btn = document.getElementById('btn');
    btn.addEventListener('click', function() {
      postValue('_pn_clickCount', 1);
    });
  </script>
</svg>
</code></pre><h3>2️⃣ 访问 DOM 元素</h3><p>使用标准的 <code>getElementById</code> 和 <code>addEventListener</code> 访问和操作元素：<pre><code class="javascript">// 获取元素
const element = document.getElementById('elementId');</p><p>// 添加事件监听
element.addEventListener('click', function() {
  // 处理点击事件
});</p><p>// 修改属性
element.setAttribute('fill', '#ff0000');</p><p>// 修改样式
element.style.opacity = '0.5';
</code></pre><h3>3️⃣ 动画效果</h3><p>使用 JavaScript 创建动画效果：<pre><code class="javascript">// 简单的闪烁动画
let blinkState = false;
setInterval(function() {
  blinkState = !blinkState;
  const led = document.getElementById('led');
  led.setAttribute('fill', blinkState ? '#00ff00' : '#003300');
}, 500);</p><p>// 平滑过渡
function animateValue(start, end, duration) {
  const startTime = performance.now();</p><p>  function update(currentTime) {
    const elapsed = currentTime - startTime;
    const progress = Math.min(elapsed / duration, 1);</p><p>    const value = start + (end - start) * progress;
    updateDisplay(value);</p><p>    if (progress < 1) {
      requestAnimationFrame(update);
    }
  }</p><p>  requestAnimationFrame(update);
}
</code></pre><hr><h2>📚 更多示例</h2><p>查看 FUXA GitHub 仓库中的完整示例：</p><p>🔗 <strong>组件示例库</strong>：https://github.com/frangoteam/FUXA/tree/master/server/_widgets</p><h3>可用的示例组件</h3><p><ul><li><strong>按钮</strong>：各种样式的按钮</li>
<li><strong>仪表盘</strong>：圆形和线性仪表盘</li>
<li><strong>图表</strong>：实时数据图表</li>
<li><strong>指示灯</strong>：各种状态的指示灯</li>
<li><strong>开关</strong>：切换开关</li>
<li><strong>滑块</strong>：数值滑块</li>
<li><strong>进度条</strong>：进度指示器</li>
<li><strong>文本框</strong>：输入和显示文本</li>
</ul>
<hr></p><h2>💡 最佳实践</h2><h3>1️⃣ 命名规范</h3><p>使用清晰的命名规范：<pre><code class="javascript">// 参数命名
let _pn_temperature = 0;    // 温度值
let _pb_enabled = true;     // 启用状态
let _ps_label = "温度";     // 标签文字
let _pc_color = "#ff0000";  // 颜色</p><p>// 函数命名
function updateGauge() { }      // 更新仪表盘
function clearBlinking() { }   // 清除闪烁
function handleData() { }      // 处理数据
</code></pre><h3>2️⃣ 资源管理</h3><p>确保正确管理资源：<pre><code class="javascript">// 在组件销毁时清理资源
function clearBlinking() {
  // 清除定时器
  if (blinkInterval) {
    clearInterval(blinkInterval);
    blinkInterval = null;
  }</p><p>  // 移除事件监听器
  if (element) {
    element.removeEventListener('click', handleClick);
  }</p><p>  // 清理其他资源
}
</code></pre><h3>3️⃣ 错误处理</h3><p>添加错误处理机制：<pre><code class="javascript">try {
  // 可能出错的代码
  updateGauge();
} catch (error) {
  console.error('组件错误:', error);
  // 显示错误信息
  showError(error.message);
}
</code></pre><h3>4️⃣ 性能优化</h3><p>优化组件性能：<pre><code class="javascript">// 使用 requestAnimationFrame 进行动画
requestAnimationFrame(animate);</p><p>// 避免频繁的 DOM 操作
// 批量更新
function updateMultipleElements() {
  const updates = [
    { id: 'elem1', attr: 'fill', value: '#ff0000' },
    { id: 'elem2', attr: 'opacity', value: '0.5' }
  ];</p><p>  updates.forEach(update => {
    const elem = document.getElementById(update.id);
    if (elem) {
      elem.setAttribute(update.attr, update.value);
    }
  });
}</p><p>// 使用缓存
let cachedElement = null;
function getCachedElement(id) {
  if (!cachedElement) {
    cachedElement = document.getElementById(id);
  }
  return cachedElement;
}
</code></pre><hr><h2>❓ 常见问题</h2><h3>❓ 组件不显示</h3><p><strong>可能原因</strong>：
<li>SVG ID 未设置</li>
<li>组件尺寸设置不正确</li>
<li>样式冲突</li></p><p><strong>解决方案</strong>：
<li>确保 SVG 有正确的 ID</li>
<li>检查 width 和 height 属性</li>
<li>检查 CSS 样式</li></p><h3>❓ 数据不更新</h3><p><strong>可能原因</strong>：
<li><code>putValue</code> 函数未正确实现</li>
<li>变量名不匹配</li>
<li>数据绑定未设置</li></p><p><strong>解决方案</strong>：
<li>检查 <code>putValue</code> 函数实现</li>
<li>确保变量名与 FUXA 中的绑定一致</li>
<li>在 FUXA 中正确绑定标签</li></p><h3>❓ 内存泄漏</h3><p><strong>可能原因</strong>：
<li>定时器未清除</li>
<li>事件监听器未移除</li>
<li>MutationObserver 未断开</li></p><p><strong>解决方案</strong>：
<li>在 <code>clearBlinking</code> 中清除所有定时器</li>
<li>移除所有事件监听器</li>
<li>断开 MutationObserver</li></p><hr><h2>🎉 总结</h2><p>通过本教程，您已经学会了：</p><p>✅ FUXA 组件的基本结构  
✅ 数据传递机制（postValue 和 putValue）  
✅ 参数类型和变量导出  
✅ 使用 MutationObserver 管理组件生命周期  
✅ 创建自定义组件  
✅ 使用 CSS 和 JavaScript 增强组件功能  
✅ 最佳实践和性能优化  </p><p>现在您可以创建自己的个性化组件了！</p><hr><blockquote>💡 <strong>提示</strong>：查看 FUXA 官方组件库获取更多灵感和示例。</blockquote><hr><p><strong>关注我们，获取更多工业自动化技术干货！</strong> 🎯</p><p><div style="display: flex; justify-content: center; align-items: center; gap: 40px; margin: 30px 0;">
    <div style="text-align: center;">
        <img src="images/微信公众号.jpg" alt="微信公众号" style="width: 200px; height: 200px; object-fit: contain;">
        <p style="margin: 10px 0 0 0; font-size: 14px; color: #666;">微信公众号</p>
    </div>
    <div style="text-align: center;">
        <img src="images/单人二维码.png" alt="技术支持" style="width: 200px; height: 200px; object-fit: contain;">
        <p style="margin: 10px 0 0 0; font-size: 14px; color: #666;">技术支持</p>
    </div>
</div></p>
        </div>
        <div class="content-section" id="section-06-高级功能配置">
            <h1>🎛️ FUXA 高级功能配置教程</h1><hr><h2>📋 概述</h2><p>本教程将介绍 FUXA 的高级功能，包括：</p><p><ul><li>📊 <strong>图表控制</strong> - 实时数据可视化</li>
<li>🖼️ <strong>UI 布局</strong> - 自定义用户界面</li>
<li>⚡ <strong>事件配置</strong> - 交互逻辑和动作</li>
<li>🚨 <strong>报警系统</strong> - 实时监控和通知</li>
</ul>
<hr></p><h2>📊 图表控制</h2><h3>添加图表控件</h3><p>在编辑器中选择视图，添加图表控件来显示实时数据趋势。</p><p><img src="images/fuxa-chart.gif" alt=""></p><h3>配置图表</h3><p>在 <strong>折线图</strong>（Line charts）中，您可以定义要附加到图表控件的数据图表。</p><p><img src="images/setup-charts.png" alt=""></p><h4>图表配置步骤</h4><p><li><strong>选择图表控件</strong></li>
   - 在工具栏中找到图表控件
   - 拖拽到视图中</p><p><li><strong>绑定数据标签</strong></li>
   - 在属性面板中点击"图表"选项
   - 添加要显示的数据标签
   - 设置每个数据系列的颜色和样式</p><p><li><strong>配置图表属性</strong></li></p><table>
<tr><th>属性</th><th>说明</th><th>示例</th></tr>
<tr><td><strong>标题</strong></td><td>图表标题</td><td>"温度趋势"</td></tr>
<tr><td><strong>X 轴标签</strong></td><td>X 轴说明</td><td>"时间"</td></tr>
<tr><td><strong>Y 轴标签</strong></td><td>Y 轴说明</td><td>"温度 (℃)"</td></tr>
<tr><td><strong>刷新间隔</strong></td><td>数据更新频率</td><td>1000ms</td></tr>
<tr><td><strong>数据点数</strong></td><td>显示的数据点数量</td><td>100</td></tr>
<tr><td><strong>显示网格</strong></td><td>是否显示网格线</td><td>true</td></tr>
<tr><td><strong>显示图例</strong></td><td>是否显示图例</td><td>true</td></tr>
</table><p><li><strong>高级选项</strong></li>
   - 设置 Y 轴最小值/最大值
   - 配置数据缩放
   - 自定义图表样式</p><p><img src="images/fuxa-chart2.gif" alt=""></p><hr><h2>🖼️ UI 布局配置</h2><h3>进入布局设置</h3><p>在编辑器中进入 <strong>"布局设置"</strong>（Layout settings）。</p><p><img src="images/setup-layout.png" alt=""></p><h3>常规设置（General）</h3><p>在 <strong>常规</strong> 选项卡中，您可以定义：</p><table>
<tr><th>设置</th><th>说明</th><th>示例</th></tr>
<tr><td><strong>起始视图</strong></td><td>访问 http://localhost:1881 时显示的第一个视图（主页）</td><td><code>Home</code></td></tr>
<tr><td><strong>缩放</strong></td><td>如果启用，可以使用鼠标滚轮缩放视图，用鼠标左键移动视图</td><td><code>true</code></td></tr>
<tr><td><strong>输入字段对话框模式</strong></td><td>如果启用，输入值控件时将显示对话框</td><td><code>true</code></td></tr>
<tr><td><strong>显示导航</strong></td><td>设置显示或隐藏标题栏和导航菜单</td><td><code>true</code></td></tr>
<tr><td><strong>隐藏开发按钮</strong></td><td>隐藏编辑和主页之间的切换按钮</td><td><code>false</code></td></tr>
</table><h4>输入字段对话框模式</h4><p><img src="images/fuxa-layout-input.gif" alt=""></p><h4>导航栏设置</h4><p><img src="images/fuxa-layout.png" alt=""></p><h3>侧边导航菜单（Navigation Side Menu）</h3><p>在 <strong>侧边导航菜单</strong> 选项卡中，您可以定义菜单项和不同的样式属性。</p><p><img src="images/fuxa-layout2.png" alt=""></p><h4>菜单配置</h4><p><li><strong>添加菜单项</strong></li>
   - 点击"添加菜单项"按钮
   - 设置菜单项名称
   - 选择要打开的视图
   - 设置图标（可选）</p><p><li><strong>样式设置</strong></li>
   - 背景颜色
   - 文字颜色
   - 悬停效果
   - 菜单项大小</p><h3>顶部导航栏（Header Navigation Bar）</h3><p>在 <strong>顶部导航栏</strong> 选项卡中，您可以定义是否以及如何显示报警通知项，以及不同的样式属性。</p><p><img src="images/fuxa-layout3.png" alt=""></p><h4>报警通知设置</h4><table>
<tr><th>设置</th><th>说明</th><th>示例</th></tr>
<tr><td><strong>显示报警</strong></td><td>是否在标题栏显示报警通知</td><td><code>true</code></td></tr>
<tr><td><strong>报警位置</strong></td><td>报警通知的位置</td><td><code>left</code> / <code>right</code></td></tr>
<tr><td><strong>报警样式</strong></td><td>报警通知的样式</td><td><code>icon</code> / <code>text</code></td></tr>
<tr><td><strong>报警数量</strong></td><td>显示的报警数量</td><td><code>5</code></td></tr>
</table><hr><h2>⚡ 事件配置</h2><p>在图形和按钮控件中，您可以配置鼠标 <strong>事件</strong>（click、mouseDown、mouseUp）来执行任务。</p><h3>可用事件类型</h3><table>
<tr><th>事件</th><th>说明</th></tr>
<tr><td><strong>click</strong></td><td>点击事件</td></tr>
<tr><td><strong>mouseDown</strong></td><td>鼠标按下事件</td></tr>
<tr><td><strong>mouseUp</strong></td><td>鼠标释放事件</td></tr>
</table><h3>可用动作</h3><p><ul><li><a href="#打开页面" target="_blank">打开页面</a></li>
<li><a href="#打开卡片" target="_blank">打开卡片</a></li>
<li><a href="#打开对话框" target="_blank">打开对话框</a></li>
<li><a href="#打开-iframe" target="_blank">打开 iframe</a></li>
<li><a href="#打开窗口" target="_blank">打开窗口</a></li>
<li><a href="#设置值" target="_blank">设置值</a></li>
<li><a href="#切换值" target="_blank">切换值</a></li>
<li><a href="#从输入设置并关闭" target="_blank">从输入设置并关闭</a></li>
</ul>
<hr></p><h3>打开页面</h3><p>用于在 <strong>主</strong> 窗口中显示视图。</p><p><img src="images/fuxa-events1.gif" alt=""></p><p><strong>使用场景</strong>：
<ul><li>导航到不同的页面</li>
<li>返回主页</li>
<li>切换视图</li>
</ul>
<strong>配置步骤</strong>：
<li>选择控件（如按钮）</li>
<li>在属性面板中找到"事件"选项</li>
<li>添加 click 事件</li>
<li>选择"打开页面"动作</li>
<li>选择要打开的视图</li></p><hr><h3>打开卡片</h3><p>用于将视图作为弹出窗口显示。<strong>卡片</strong>将在事件发生时显示在鼠标旁边，可以同时显示多个卡片。同一个 <strong>卡片</strong> 可以用于显示多个泵的值。</p><p><img src="images/fuxa-events2.gif" alt=""></p><p><strong>使用场景</strong>：
<ul><li>显示设备详细信息</li>
<li>显示传感器读数</li>
<li>显示状态信息</li>
</ul>
<strong>配置步骤</strong>：
<li>选择控件</li>
<li>添加 click 事件</li>
<li>选择"打开卡片"动作</li>
<li>选择要显示的视图</li>
<li>设置卡片大小和位置</li></p><hr><h3>打开对话框</h3><p>用于将视图作为对话框显示，通常用于配置值。<strong>对话框</strong>将显示在屏幕顶部。同一个 <strong>对话框</strong> 可以用于配置多个泵的值。</p><p><img src="images/fuxa-events3.gif" alt=""></p><p><strong>使用场景</strong>：
<ul><li>配置设备参数</li>
<li>输入设定值</li>
<li>修改系统设置</li>
</ul>
<strong>配置步骤</strong>：
<li>选择控件</li>
<li>添加 click 事件</li>
<li>选择"打开对话框"动作</li>
<li>选择要显示的视图</li>
<li>设置对话框大小和标题</li></p><hr><h3>打开 iframe</h3><p>用于将窗口作为 <strong>iframe</strong> 打开（来自外部源的嵌入 HTML 文档）。您可以定义窗口大小和缩放比例。</p><p><img src="images/fuxa-events4.gif" alt=""></p><p><strong>使用场景</strong>：
<ul><li>嵌入外部网页</li>
<li>显示第三方仪表盘</li>
<li>集成其他系统</li>
</ul>
<strong>配置步骤</strong>：
<li>选择控件</li>
<li>添加 click 事件</li>
<li>选择"打开 iframe"动作</li>
<li>输入 URL 地址</li>
<li>设置窗口大小和缩放比例</li></p><hr><h3>打开窗口</h3><p>用于在新浏览器中打开 <strong>窗口</strong>。您可以定义 <strong>窗口</strong> 大小。</p><p><img src="images/fuxa-events5.gif" alt=""></p><p><strong>使用场景</strong>：
<ul><li>打开新标签页</li>
<li>显示独立窗口</li>
<li>打印报表</li>
</ul>
<strong>配置步骤</strong>：
<li>选择控件</li>
<li>添加 click 事件</li>
<li>选择"打开窗口"动作</li>
<li>输入 URL 地址</li>
<li>设置窗口大小</li></p><hr><h3>设置值</h3><p>用于设置标签值或增加和减少当前值。</p><p><img src="images/fuxa-events6.gif" alt=""></p><p><strong>使用场景</strong>：
<ul><li>设置设备参数</li>
<li>调整设定值</li>
<li>控制设备状态</li>
</ul>
<strong>配置步骤</strong>：
<li>选择控件</li>
<li>添加 click 事件</li>
<li>选择"设置值"动作</li>
<li>选择要设置的标签</li>
<li>设置值或增量</li></p><p><strong>选项</strong>：
<ul><li><strong>固定值</strong>：设置一个固定的值</li>
<li><strong>增量</strong>：在当前值基础上增加或减少</li>
<li><strong>表达式</strong>：使用表达式计算值</li>
</ul>
<hr></p><h3>切换值</h3><p>用于 <strong>切换</strong> 标签值 1/0（如果是 1 则设置为 0，如果是 0 则设置为 1）。</p><p><img src="images/fuxa-events7.gif" alt=""></p><p><strong>使用场景</strong>：
<ul><li>开关控制</li>
<li>启动/停止设备</li>
<li>切换状态</li>
</ul>
<strong>配置步骤</strong>：
<li>选择控件</li>
<li>添加 click 事件</li>
<li>选择"切换值"动作</li>
<li>选择要切换的标签</li></p><hr><h3>从输入设置并关闭</h3><p>可以组合使用，通过带有 OK 确认的对话框设置一些值。</p><p><img src="images/fuxa-events8.gif" alt=""></p><p><strong>使用场景</strong>：
<ul><li>确认设置</li>
<li>批量修改参数</li>
<li>安全操作</li>
</ul>
<strong>配置步骤</strong>：
<li>创建包含输入控件的对话框视图</li>
<li>添加"从输入设置并关闭"事件</li>
<li>配置要设置的标签</li>
<li>设置确认按钮</li></p><hr><h2>🚨 报警系统</h2><h3>配置报警</h3><p>在编辑器中进入 <strong>"报警"</strong>（Alarms）。</p><p><img src="images/setup-alarms.png" alt=""></p><h3>报警类型</h3><p>报警绑定到一个标签，可以为该标签定义 4 种类型的条件，对应不同的级别：</p><table>
<tr><th>报警级别</th><th>说明</th><th>示例</th></tr>
<tr><td><strong>高高报警（High High）</strong></td><td>严重超限</td><td>温度 > 90℃</td></tr>
<tr><td><strong>高报警（High）</strong></td><td>超限</td><td>温度 > 80℃</td></tr>
<tr><td><strong>低报警（Low）</strong></td><td>低于下限</td><td>温度 < 20℃</td></tr>
<tr><td><strong>消息（Message）</strong></td><td>信息提示</td><td>设备启动</td></tr>
</table><p><img src="images/fuxa-alarms.gif" alt=""></p><h3>配置步骤</h3><p><li><strong>选择标签</strong></li>
   - 在报警配置页面选择要监控的标签</p><p><li><strong>设置报警条件</strong></li>
   - 高高高报警：设置阈值和条件
   - 高报警：设置阈值和条件
   - 低报警：设置阈值和条件
   - 消息：设置触发条件</p><p><li><strong>配置报警动作</strong></li>
   - 显示弹出对话框
   - 设置标签值
   - 发送通知
   - 执行脚本</p><p><li><strong>设置报警属性</strong></li></p><table>
<tr><th>属性</th><th>说明</th><th>示例</th></tr>
<tr><td><strong>报警名称</strong></td><td>报警标识</td><td>"温度过高"</td></tr>
<tr><td><strong>报警级别</strong></td><td>报警严重程度</td><td>High High</td></tr>
<tr><td><strong>阈值</strong></td><td>触发阈值</td><td>90</td></tr>
<tr><td><strong>延迟时间</strong></td><td>报警延迟（秒）</td><td>5</td></tr>
<tr><td><strong>确认要求</strong></td><td>是否需要确认</td><td>true</td></tr>
<tr><td><strong>报警动作</strong></td><td>触发时的动作</td><td>显示对话框</td></tr>
</table><h3>显示报警</h3><p>可以通过从菜单或标题栏上的按钮配置视图来显示活动报警和历史记录。详见 <a href="https://github.com/frangoteam/FUXA/wiki/HowTo-View-Layout" target="_blank">布局设置</a>。</p><p><img src="images/fuxa-alarms2.gif" alt=""></p><h3>报警动作</h3><p>还可以为每个报警配置多个动作，例如显示弹出对话框或为标签设置值。</p><p><img src="images/fuxa-alarms3.gif" alt=""></p><h4>可用动作</h4><table>
<tr><th>动作</th><th>说明</th></tr>
<tr><td><strong>显示弹出对话框</strong></td><td>显示报警信息对话框</td></tr>
<tr><td><strong>设置标签值</strong></td><td>自动设置标签值</td></tr>
<tr><td><strong>发送通知</strong></td><td>发送通知消息</td></tr>
<tr><td><strong>执行脚本</strong></td><td>执行自定义脚本</td></tr>
</table><hr><h2>💡 最佳实践</h2><h3>图表配置</h3><p><li><strong>合理设置刷新间隔</strong></li>
   - 实时数据：500-1000ms
   - 趋势数据：2000-5000ms
   - 历史数据：10000-60000ms</p><p><li><strong>限制数据点数</strong></li>
   - 避免显示过多数据点影响性能
   - 建议 50-200 个数据点</p><p><li><strong>使用合适的颜色</strong></li>
   - 使用对比度高的颜色
   - 遵循颜色编码规范（红色=报警，绿色=正常）</p><h3>UI 布局</h3><p><li><strong>清晰的导航结构</strong></li>
   - 使用逻辑分组
   - 提供面包屑导航
   - 保持菜单简洁</p><p><li><strong>一致的样式</strong></li>
   - 统一的颜色方案
   - 统一的字体和大小
   - 统一的间距和布局</p><p><li><strong>响应式设计</strong></li>
   - 考虑不同屏幕尺寸
   - 使用相对单位
   - 测试不同分辨率</p><h3>事件配置</h3><p><li><strong>明确的事件触发</strong></li>
   - 使用合适的事件类型
   - 避免事件冲突
   - 提供视觉反馈</p><p><li><strong>错误处理</strong></li>
   - 验证输入值
   - 处理异常情况
   - 提供错误提示</p><p><li><strong>用户确认</strong></li>
   - 重要操作需要确认
   - 提供撤销功能
   - 记录操作日志</p><h3>报警配置</h3><p><li><strong>合理的报警阈值</strong></li>
   - 基于实际工艺要求
   - 避免误报和漏报
   - 定期调整阈值</p><p><li><strong>报警优先级</strong></li>
   - 使用不同的报警级别
   - 优先处理严重报警
   - 设置报警延迟</p><p><li><strong>报警通知</strong></li>
   - 多种通知方式
   - 报警确认机制
   - 报警历史记录</p><hr><h2>❓ 常见问题</h2><h3>❓ 图表不显示数据</h3><p><strong>可能原因</strong>：
<li>标签未绑定</li>
<li>数据类型不匹配</li>
<li>刷新间隔设置过大</li></p><p><strong>解决方案</strong>：
<li>检查标签绑定是否正确</li>
<li>确认数据类型一致</li>
<li>调整刷新间隔</li></p><h3>❓ 事件不触发</h3><p><strong>可能原因</strong>：
<li>事件未正确配置</li>
<li>控件未启用</li>
<li>JavaScript 错误</li></p><p><strong>解决方案</strong>：
<li>检查事件配置</li>
<li>确认控件已启用</li>
<li>查看浏览器控制台错误</li></p><h3>❓ 报警不触发</h3><p><strong>可能原因</strong>：
<li>报警条件不满足</li>
<li>报警未启用</li>
<li>标签数据未更新</li></p><p><strong>解决方案</strong>：
<li>检查报警条件</li>
<li>确认报警已启用</li>
<li>确认标签数据正常更新</li></p><hr><h2>🎉 总结</h2><p>通过本教程，您已经学会了：</p><p>✅ 配置图表控件显示实时数据  
✅ 自定义 UI 布局和导航  
✅ 配置事件和交互逻辑  
✅ 设置报警系统和通知  
✅ 遵循最佳实践优化系统  </p><p>现在您可以创建功能完善的工业可视化系统了！</p><hr><blockquote>💡 <strong>提示</strong>：建议在实际项目中逐步实现这些功能，先从简单的图表和事件开始，再逐步添加复杂的报警和交互逻辑。</blockquote><hr><p><strong>关注我们，获取更多工业自动化技术干货！</strong> 🎯</p><p><div style="display: flex; justify-content: center; align-items: center; gap: 40px; margin: 30px 0;">
    <div style="text-align: center;">
        <img src="images/微信公众号.jpg" alt="微信公众号" style="width: 200px; height: 200px; object-fit: contain;">
        <p style="margin: 10px 0 0 0; font-size: 14px; color: #666;">微信公众号</p>
    </div>
    <div style="text-align: center;">
        <img src="images/单人二维码.png" alt="技术支持" style="width: 200px; height: 200px; object-fit: contain;">
        <p style="margin: 10px 0 0 0; font-size: 14px; color: #666;">技术支持</p>
    </div>
</div></p>
        </div>
        <div class="content-section" id="section-07-系统设置与使用技巧">
            <h1>⚙️ FUXA 系统设置与使用技巧</h1><hr><h2>📋 概述</h2><p>本教程将介绍 FUXA 的系统设置配置和编辑器使用技巧，帮助您更高效地使用 FUXA。</p><hr><h2>🔧 系统设置</h2><h3>设置文件位置</h3><p>服务器设置位于以下文件：<pre><code class="">server\_appdata\settings.js
</code></pre>⚠️ <strong>重要</strong>：修改设置后必须重启服务器才能生效。</p><hr><h2>🔐 身份验证配置</h2><h3>启用身份验证</h3><p>要启用和配置身份验证，请编辑 <code>settings.js</code> 文件中的以下参数：<pre><code class="javascript">secureEnabled: true,            // 启用或禁用身份验证
secretCode: 'frangoteam751',    // 用于编码令牌的密钥
tokenExpiresIn: '1h'            // 令牌过期延迟 '1h'=1小时, 60=60秒, '1d'=1天
</code></pre><h3>参数说明</h3><table>
<tr><th>参数</th><th>类型</th><th>说明</th><th>示例</th></tr>
<tr><td><strong>secureEnabled</strong></td><td>Boolean</td><td>启用或禁用身份验证</td><td><code>true</code> / <code>false</code></td></tr>
<tr><td><strong>secretCode</strong></td><td>String</td><td>用于编码令牌的密钥</td><td><code>'frangoteam751'</code></td></tr>
<tr><td><strong>tokenExpiresIn</strong></td><td>String/Number</td><td>令牌过期时间</td><td><code>'1h'</code> / <code>'1d'</code> / <code>60</code></td></tr>
</table><h3>默认用户</h3><p>系统默认用户信息：</p><table>
<tr><th>用户名</th><th>密码</th><th>权限</th></tr>
<tr><td><strong>admin</strong></td><td><strong>123456</strong></td><td>管理员</td></tr>
</table><p>⚠️ <strong>安全提示</strong>：首次使用后，请立即修改默认密码！</p><h3>修改密码</h3><p><li>登录 FUXA 编辑器</li>
<li>进入"设置"页面</li>
<li>在用户管理中修改密码</li>
<li>保存更改</li></p><hr><h2>⌨️ 编辑器快捷键</h2><h3>基本操作</h3><table>
<tr><th>快捷键</th><th>功能</th><th>说明</th></tr>
<tr><td><strong>Ctrl + Z</strong></td><td>撤销</td><td>撤销上一步操作</td></tr>
<tr><td><strong>Ctrl + Y</strong></td><td>重做</td><td>重做上一步撤销的操作</td></tr>
<tr><td><strong>Ctrl + A</strong></td><td>全选</td><td>选择所有项目</td></tr>
<tr><td><strong>Ctrl + X</strong></td><td>剪切</td><td>剪切选中的项目</td></tr>
<tr><td><strong>Ctrl + C</strong></td><td>复制</td><td>复制选中的项目</td></tr>
<tr><td><strong>Ctrl + V</strong></td><td>粘贴</td><td>粘贴剪贴板内容</td></tr>
<tr><td><strong>Ctrl + D</strong></td><td>复制</td><td>复制选中的项目</td></tr>
</table><h3>选择操作</h3><table>
<tr><th>快捷键</th><th>功能</th><th>说明</th></tr>
<tr><td><strong>Tab</strong></td><td>选择下一个</td><td>选择下一个项目</td></tr>
<tr><td><strong>Shift + Tab</strong></td><td>选择上一个</td><td>选择上一个项目</td></tr>
<tr><td><strong>Shift + O</strong></td><td>选择上一个</td><td>选择上一个项目</td></tr>
<tr><td><strong>Shift + P</strong></td><td>选择下一个</td><td>选择下一个项目</td></tr>
</table><h3>旋转操作</h3><table>
<tr><th>快捷键</th><th>功能</th><th>说明</th></tr>
<tr><td><strong>Ctrl + Left</strong></td><td>向左旋转</td><td>逆时针旋转选中的项目</td></tr>
<tr><td><strong>Ctrl + Right</strong></td><td>向右旋转</td><td>顺时针旋转选中的项目</td></tr>
<tr><td><strong>Ctrl + Shift + Left</strong></td><td>大步向左旋转</td><td>大步逆时针旋转</td></tr>
<tr><td><strong>Ctrl + Shift + Right</strong></td><td>大步向右旋转</td><td>大步顺时针旋转</td></tr>
</table><h3>缩放操作</h3><table>
<tr><th>快捷键</th><th>功能</th><th>说明</th></tr>
<tr><td><strong>Ctrl + Up</strong></td><td>放大</td><td>中心放大视图</td></tr>
<tr><td><strong>Ctrl + Down</strong></td><td>缩小</td><td>中心缩小视图</td></tr>
<tr><td><strong>Shift + 鼠标滚轮</strong></td><td>位置缩放</td><td>以鼠标位置为中心缩放</td></tr>
</table><h3>移动操作</h3><table>
<tr><th>快捷键</th><th>功能</th><th>说明</th></tr>
<tr><td><strong>Shift + Up</strong></td><td>向上移动</td><td>向上移动选中的项目</td></tr>
<tr><td><strong>Shift + Down</strong></td><td>向下移动</td><td>向下移动选中的项目</td></tr>
<tr><td><strong>Shift + Left</strong></td><td>向左移动</td><td>向左移动选中的项目</td></tr>
<tr><td><strong>Shift + Right</strong></td><td>向右移动</td><td>向右移动选中的项目</td></tr>
</table><h3>分组操作</h3><table>
<tr><th>快捷键</th><th>功能</th><th>说明</th></tr>
<tr><td><strong>Ctrl + G</strong></td><td>分组/取消分组</td><td>对选中的项目进行分组或取消分组</td></tr>
</table><h3>绘图操作</h3><table>
<tr><th>快捷键</th><th>功能</th><th>说明</th></tr>
<tr><td><strong>Shift + 绘制线条</strong></td><td>约束线条</td><td>线条渐变水平、垂直或 45° 对角线</td></tr>
<tr><td><strong>Shift + 鼠标调整大小</strong></td><td>锁定比例</td><td>锁定宽度和高度比例</td></tr>
</table><hr><h2>💡 使用技巧</h2><h3>1️⃣ 快速复制组件</h3><p>使用 <strong>Ctrl + D</strong> 快速复制选中的组件，比 Ctrl + C / Ctrl + V 更快捷。</p><p><strong>示例</strong>：
<li>选中一个按钮组件</li>
<li>按 Ctrl + D 复制</li>
<li>重复按 Ctrl + D 创建多个副本</li></p><hr><h3>2️⃣ 精确对齐元素</h3><p>使用 <strong>Shift + 方向键</strong> 精确移动元素，每次移动一个像素。</p><p><strong>示例</strong>：
<li>选中需要对齐的元素</li>
<li>使用 Shift + 方向键微调位置</li>
<li>实现精确对齐</li></p><hr><h3>3️⃣ 快速旋转组件</h3><p>使用 <strong>Ctrl + 左/右方向键</strong> 快速旋转组件，每次旋转 15°。</p><p><strong>示例</strong>：
<li>选中需要旋转的组件</li>
<li>按 Ctrl + Right 顺时针旋转</li>
<li>按 Ctrl + Left 逆时针旋转</li></p><hr><h3>4️⃣ 批量操作</h3><p>使用 <strong>Ctrl + A</strong> 全选所有元素，然后进行批量操作。</p><p><strong>示例</strong>：
<li>按 Ctrl + A 全选所有元素</li>
<li>按 Ctrl + G 分组</li>
<li>移动整个组</li></p><hr><h3>5️⃣ 绘制标准线条</h3><p>使用 <strong>Shift + 绘制线条</strong> 绘制水平、垂直或 45° 对角线。</p><p><strong>示例</strong>：
<li>选择线条工具</li>
<li>按住 Shift 键</li>
<li>拖动鼠标绘制线条</li>
<li>线条会自动约束到标准角度</li></p><hr><h3>6️⃣ 保持比例缩放</h3><p>使用 <strong>Shift + 鼠标调整大小</strong> 保持元素宽高比例。</p><p><strong>示例</strong>：
<li>选中需要调整大小的元素</li>
<li>按住 Shift 键</li>
<li>拖动调整大小</li>
<li>宽高比例保持不变</li></p><hr><h3>7️⃣ 快速撤销和重做</h3><p>使用 <strong>Ctrl + Z</strong> 撤销操作，<strong>Ctrl + Y</strong> 重做操作。</p><p><strong>示例</strong>：
<li>执行一系列操作</li>
<li>发现错误，按 Ctrl + Z 撤销</li>
<li>如果撤销过多，按 Ctrl + Y 重做</li></p><hr><h3>8️⃣ 高效导航</h3><p>使用 <strong>Tab / Shift + Tab</strong> 或 <strong>Shift + O / P</strong> 快速在元素之间切换。</p><p><strong>示例</strong>：
<li>使用 Tab 选择下一个元素</li>
<li>使用 Shift + Tab 选择上一个元素</li>
<li>快速浏览和编辑元素</li></p><hr><h2>🔧 高级配置</h2><h3>自定义令牌过期时间</h3><p>根据安全需求调整令牌过期时间：<pre><code class="javascript">// 1 小时过期
tokenExpiresIn: '1h'</p><p>// 1 天过期
tokenExpiresIn: '1d'</p><p>// 60 秒过期
tokenExpiresIn: 60
</code></pre><h3>修改密钥</h3><p>定期更新密钥以提高安全性：<pre><code class="javascript">// 原始密钥
secretCode: 'frangoteam751'</p><p>// 新密钥（建议使用强密码）
secretCode: 'YourStrongSecretKey123!@#'
</code></pre>⚠️ <strong>注意</strong>：修改密钥后，所有现有令牌将失效，用户需要重新登录。</p><hr><h2>🛡️ 安全最佳实践</h2><h3>1️⃣ 修改默认密码</h3><p>首次部署后立即修改默认密码：</p><p><li>登录系统</li>
<li>进入用户管理</li>
<li>修改 admin 密码</li>
<li>保存更改</li></p><h3>2️⃣ 使用强密钥</h3><p>设置强密钥用于令牌编码：</p><p><ul><li>使用至少 16 个字符</li>
<li>包含大小写字母、数字和特殊字符</li>
<li>定期更换密钥</li>
</ul>
<h3>3️⃣ 合理设置令牌过期时间</h3></p><p>根据使用场景设置合理的令牌过期时间：</p><p><ul><li>内网环境：可以设置较长时间（如 1 天）</li>
<li>公网环境：建议设置较短时间（如 1 小时）</li>
<li>高安全要求：设置更短时间（如 30 分钟）</li>
</ul>
<h3>4️⃣ 定期备份配置</h3></p><p>定期备份 <code>settings.js</code> 文件：<pre><code class="bash"># 备份配置文件
cp server/_appdata/settings.js server/_appdata/settings.js.backup
</code></pre><hr><h2>📊 性能优化</h2><h3>1️⃣ 合理使用分组</h3><p>使用 <strong>Ctrl + G</strong> 将相关元素分组，提高编辑效率：</p><p><ul><li>减少选择操作</li>
<li>便于批量移动</li>
<li>提高渲染性能</li>
</ul>
<h3>2️⃣ 避免过度使用动画</h3></p><p>过多的动画会影响性能：</p><p><ul><li>限制同时播放的动画数量</li>
<li>使用 CSS 动画代替 JavaScript 动画</li>
<li>在低端设备上禁用动画</li>
</ul>
<h3>3️⃣ 优化图表刷新频率</h3></p><p>合理设置图表刷新频率：</p><p><ul><li>实时数据：500-1000ms</li>
<li>趋势数据：2000-5000ms</li>
<li>历史数据：10000-60000ms</li>
</ul>
<hr></p><h2>❓ 常见问题</h2><h3>❓ 修改设置后不生效</h3><p><strong>可能原因</strong>：
<ul><li>服务器未重启</li>
</ul>
<strong>解决方案</strong>：</p><p>
<pre><code class="bash"># 重启 FUXA 服务器
npm restart
# 或
pm2 restart fuxa
</code></pre></p><h3>❓ 无法登录</h3><p><strong>可能原因</strong>：
<ul><li>身份验证未启用</li>
<li>用户名或密码错误</li>
<li>令牌已过期</li>
</ul>
<strong>解决方案</strong>：
<li>检查 <code>secureEnabled</code> 设置</li>
<li>确认用户名和密码正确</li>
<li>重新登录获取新令牌</li></p><h3>❓ 快捷键不工作</h3><p><strong>可能原因</strong>：
<ul><li>浏览器快捷键冲突</li>
<li>输入法激活</li>
<li>焦点不在编辑器</li>
</ul>
<strong>解决方案</strong>：
<li>关闭输入法</li>
<li>点击编辑器区域获取焦点</li>
<li>检查浏览器快捷键设置</li></p><hr><h2>🎉 总结</h2><p>通过本教程，您已经学会了：</p><p>✅ 配置系统设置和身份验证  
✅ 使用编辑器快捷键提高效率  
✅ 掌握各种使用技巧  
✅ 遵循安全最佳实践  
✅ 优化系统性能  </p><p>现在您可以更高效地使用 FUXA 了！</p><hr><h2>📚 快捷键速查表</h2><p><h3>基本操作</h3>
<ul><li><strong>Ctrl + Z</strong>：撤销</li>
<li><strong>Ctrl + Y</strong>：重做</li>
<li><strong>Ctrl + A</strong>：全选</li>
<li><strong>Ctrl + X</strong>：剪切</li>
<li><strong>Ctrl + C</strong>：复制</li>
<li><strong>Ctrl + V</strong>：粘贴</li>
<li><strong>Ctrl + D</strong>：复制</li>
</ul>
<h3>选择操作</h3>
<ul><li><strong>Tab</strong>：选择下一个</li>
<li><strong>Shift + Tab</strong>：选择上一个</li>
<li><strong>Shift + O</strong>：选择上一个</li>
<li><strong>Shift + P</strong>：选择下一个</li>
</ul>
<h3>旋转操作</h3>
<ul><li><strong>Ctrl + Left</strong>：向左旋转</li>
<li><strong>Ctrl + Right</strong>：向右旋转</li>
<li><strong>Ctrl + Shift + Left</strong>：大步向左旋转</li>
<li><strong>Ctrl + Shift + Right</strong>：大步向右旋转</li>
</ul>
<h3>缩放操作</h3>
<ul><li><strong>Ctrl + Up</strong>：放大</li>
<li><strong>Ctrl + Down</strong>：缩小</li>
<li><strong>Shift + 鼠标滚轮</strong>：位置缩放</li>
</ul>
<h3>移动操作</h3>
<ul><li><strong>Shift + Up</strong>：向上移动</li>
<li><strong>Shift + Down</strong>：向下移动</li>
<li><strong>Shift + Left</strong>：向左移动</li>
<li><strong>Shift + Right</strong>：向右移动</li>
</ul>
<h3>其他操作</h3>
<ul><li><strong>Ctrl + G</strong>：分组/取消分组</li>
<li><strong>Shift + 绘制线条</strong>：约束线条</li>
<li><strong>Shift + 鼠标调整大小</strong>：锁定比例</li>
</ul>
<hr></p><blockquote>💡 <strong>提示</strong>：建议打印快捷键速查表，放在手边方便查阅。</blockquote><hr><p><strong>关注我们，获取更多工业自动化技术干货！</strong> 🎯</p><p><div style="display: flex; justify-content: center; align-items: center; gap: 40px; margin: 30px 0;">
    <div style="text-align: center;">
        <img src="images/微信公众号.jpg" alt="微信公众号" style="width: 200px; height: 200px; object-fit: contain;">
        <p style="margin: 10px 0 0 0; font-size: 14px; color: #666;">微信公众号</p>
    </div>
    <div style="text-align: center;">
        <img src="images/单人二维码.png" alt="技术支持" style="width: 200px; height: 200px; object-fit: contain;">
        <p style="margin: 10px 0 0 0; font-size: 14px; color: #666;">技术支持</p>
    </div>
</div></p>
        </div>
        <div class="content-section" id="section-08-Node-RED集成教程">
            <h1>🔌 FUXA 与 Node-RED 集成教程</h1><hr><h2>📋 概述</h2><p>FUXA 包含完整的 Node-RED 集成，允许您创建与 SCADA 系统交互的强大自动化流程。</p><hr><h2>🚀 安装和配置</h2><h3>Node-RED 在 FUXA 中</h3><p>Node-RED 自动包含在 FUXA 中，无需额外安装。通过 FUXA 设置菜单访问。</p><h3>安装 Dashboard 2</h3><p>如果需要，必须单独安装 Dashboard 2：</p><p><li>打开 Node-RED 编辑器（通过 FUXA 设置）</li>
<li>点击菜单（☰）→ <strong>管理面板</strong>（Manage Palette）</li>
<li>搜索：<code>@flowfuse/node-red-dashboard</code></li>
<li>点击 <strong>安装</strong>（Install）</li>
<li>重启 Node-RED/FUXA</li></p><h3>所需依赖</h3><p><ul><li><strong>@flowfuse/node-red-dashboard</strong>：用于创建现代仪表盘</li>
<li><strong>node-red-contrib-fuxa</strong>：自动包含（提供 FUXA 集成节点）</li>
</ul>
<h3>配置</h3></p><p>无需额外配置。Node-RED 自动连接到 FUXA 的运行时环境。</p><hr><h2>🎯 访问 Node-RED</h2><h3>Node-RED 编辑器</h3><p>通过 FUXA 设置访问 Node-RED 流编辑器：</p><p><li>在 FUXA 中点击 <strong>设置</strong>（Settings）按钮</li>
<li>导航到 <strong>Node-RED</strong> 部分</li>
<li>点击 <strong>打开 Node-RED 编辑器</strong>（Open Node-RED Editor）</li></p><p>这将在新窗口/标签页中打开 Node-RED 流编辑器。</p><h3>Dashboard 2</h3><p><strong>注意</strong>：Dashboard 2 默认未安装，必须单独安装。</p><p><h4>安装步骤</h4>
<li>在 Node-RED 中，进入 <strong>菜单 → 管理面板</strong></li>
<li>搜索并安装：<code>@flowfuse/node-red-dashboard</code></li>
<li>重启 Node-RED/FUXA</li></p><h4>访问 Dashboard 2</h4><p>安装后，查看您的 Node-RED 仪表盘：</p><p><strong>嵌入 FUXA 视图</strong>：向任何 FUXA 视图添加 iframe 组件</p><h4>在 FUXA 视图中嵌入仪表盘</h4><p><li>在编辑器中打开 FUXA 项目</li>
<li>向视图添加 iframe 组件</li>
<li>将 URL 设置为：<code>/nodered/api/dashboard</code></li>
<li>根据需要配置 iframe 大小和属性</li>
<li>如果只想显示单个页面，可以调整仪表盘设置并使用 <code>/nodered/api/dashboard/page1</code> 或页面名称</li></p><p><strong>重要</strong>：在尝试访问 <code>/nodered/api/dashboard</code> 之前必须安装 Dashboard 2</p><hr><h2>🔧 FUXA 贡献节点</h2><p>FUXA 贡献包提供用于 SCADA 集成的专用节点，此包设计为仅与 FUXA Node-RED 集成一起使用，在独立的 Node-RED 安装中无法工作</p><h3>标签节点</h3><p><h4>get-tag</h4>
<strong>用途</strong>：获取 FUXA 标签的当前值</p><p><strong>参数</strong>：
<ul><li><strong>名称</strong>：用于识别的可选节点名称</li>
<li><strong>标签</strong>：标签名称（从 FUXA 设备填充的下拉列表）</li>
</ul>
<strong>输入</strong>：任何消息（触发标签读取）
<strong>输出</strong>：<code>msg.payload</code> 包含标签值</p><p><strong>示例输出</strong>：</p><p>
<pre><code class="json">{
  "payload": 25.3,
  "_msgid": "abc123"
}
</code></pre></p><p><h4>set-tag</h4>
<strong>用途</strong>：向 FUXA 标签写入值</p><p><strong>参数</strong>：
<ul><li><strong>名称</strong>：用于识别的可选节点名称</li>
<li><strong>标签</strong>：标签名称（从 FUXA 设备填充的下拉列表）</li>
</ul>
<strong>输入</strong>：<code>msg.payload</code> 包含要写入的值
<strong>输出</strong>：<code>msg.payload</code> 包含写入的值</p><p><strong>示例输入</strong>：</p><p>
<pre><code class="json">{
  "payload": 50.0
}
</code></pre></p><p><h4>get-tag-change</h4>
<strong>用途</strong>：基于设备轮询事件监控 FUXA 标签的值变化</p><p><strong>参数</strong>：
<ul><li><strong>名称</strong>：用于识别的可选节点名称</li>
<li><strong>标签</strong>：标签名称（从 FUXA 设备填充的下拉列表）</li>
</ul>
<strong>输入</strong>：无（事件驱动）
<strong>输出</strong>：<code>msg.payload</code> 包含新标签值（当它变化时）</p><p><strong>工作原理</strong>：此节点订阅 FUXA 的设备轮询事件。当设备被轮询且标签值自上次轮询以来发生变化时，节点输出包含新值的消息。时间取决于设备的轮询间隔（通常为 1-5 秒）。</p><p><strong>示例输出</strong>：</p><p>
<pre><code class="json">{
  "payload": 25.3,
  "topic": "temperature",
  "tagId": "device1.temperature",
  "tagName": "temperature",
  "timestamp": "2025-01-01T10:30:00.000Z",
  "previousValue": 24.8
}
</code></pre></p><p><strong>注意</strong>：此节点仅在标签值实际变化时输出消息，而不是在每个轮询周期。它高效地监控变化而无需手动轮询。</p><p><h4>get-tag-id</h4>
<strong>用途</strong>：按名称获取标签的内部 ID</p><p><strong>参数</strong>：
<ul><li><strong>名称</strong>：用于识别的可选节点名称</li>
<li><strong>标签</strong>：标签名称（从 FUXA 设备填充的下拉列表）</li>
</ul>
<strong>输入</strong>：任何消息
<strong>输出</strong>：<code>msg.payload</code> 包含标签 ID</p><p><h4>get-historical-tags</h4>
<strong>用途</strong>：同时检索多个标签的历史标签数据</p><p><strong>参数</strong>：
<ul><li><strong>名称</strong>：用于识别的可选节点名称</li>
<li><strong>标签</strong>：逗号分隔的标签名称列表（例如 "temp1,temp2,pressure"）</li>
<li><strong>开始时间</strong>：历史期间的开始（datetime-local 选择器）</li>
<li><strong>结束时间</strong>：历史期间的结束（datetime-local 选择器）</li>
</ul>
<strong>输入</strong>：任何消息或使用 <code>msg.tags</code>、<code>msg.from</code>、<code>msg.to</code> 覆盖
<strong>输出</strong>：<code>msg.payload</code> 包含历史数据数组</p><p><strong>多标签支持</strong>：
<ul><li>输入逗号分隔的标签：<code>temp1,temp2,pressure</code></li>
<li>每个标签的历史数据在同一时间段内检索</li>
<li>结果组合在单个响应中</li>
</ul>
<strong>示例输入</strong>（逗号分隔）：</p><p>
<pre><code class="json">{
  "tags": "temp1,temp2,pressure",
  "from": "2025-01-01T08:00",
  "to": "2025-01-01T17:00"
}
</code></pre></p><p><strong>示例输入</strong>（数组）：</p><p>
<pre><code class="json">{
  "tags": ["temp1", "temp2", "pressure"],
  "from": "2025-01-01T08:00",
  "to": "2025-01-01T17:00"
}
</code></pre></p><p><strong>示例输出</strong>：</p><p>
<pre><code class="json">{
  "payload": [
    {
      "tag": "temp1",
      "data": [
        {"timestamp": "2025-01-01T08:00:00Z", "value": 25.3},
        {"timestamp": "2025-01-01T09:00:00Z", "value": 26.1}
      ]
    },
    {
      "tag": "temp2", 
      "data": [
        {"timestamp": "2025-01-01T08:00:00Z", "value": 24.8},
        {"timestamp": "2025-01-01T09:00:00Z", "value": 25.2}
      ]
    }
  ]
}
</code></pre></p><p><h4>get-tag-daq-settings</h4>
<strong>用途</strong>：获取标签的 DAQ（数据采集）设置</p><p><strong>参数</strong>：
<ul><li><strong>名称</strong>：用于识别的可选节点名称</li>
<li><strong>标签</strong>：标签名称（从 FUXA 设备填充的下拉列表）</li>
</ul>
<strong>输入</strong>：任何消息
<strong>输出</strong>：<code>msg.payload</code> 包含 DAQ 设置对象</p><p><h4>set-tag-daq-settings</h4>
<strong>用途</strong>：配置标签的 DAQ（数据采集）设置</p><p><strong>参数</strong>：
<ul><li><strong>名称</strong>：用于识别的可选节点名称</li>
<li><strong>标签</strong>：标签名称（从 FUXA 设备填充的下拉列表）</li>
<li><strong>启用</strong>：复选框以启用/禁用此标签的 DAQ</li>
<li><strong>间隔</strong>：采样间隔（毫秒）</li>
<li><strong>死区</strong>：数据更新的最小变化阈值</li>
</ul>
<strong>输入</strong>：任何消息或使用 <code>msg.tag</code>、<code>msg.enabled</code>、<code>msg.interval</code>、<code>msg.deadband</code> 覆盖
<strong>输出</strong>：<code>msg.payload</code> 包含更新的设置</p><p><strong>DAQ 设置</strong>：
<ul><li><strong>启用</strong>：为此标签打开/关闭数据采集</li>
<li><strong>间隔</strong>：采样标签的频率（毫秒）</li>
<li><strong>死区</strong>：仅报告大于此阈值的更改（防止噪声）</li>
</ul>
<h3>设备节点</h3></p><p><h4>enable-device</h4>
<strong>用途</strong>：启用或禁用设备连接</p><p><strong>参数</strong>：
<ul><li><strong>名称</strong>：用于识别的可选节点名称</li>
<li><strong>设备名称</strong>：设备名称（从 FUXA 设备填充的下拉列表）</li>
<li><strong>启用</strong>：复选框以启用/禁用设备</li>
</ul>
<strong>输入</strong>：任何消息或使用 <code>msg.deviceName</code>、<code>msg.enabled</code> 覆盖
<strong>输出</strong>：<code>msg.payload</code> 包含操作结果</p><p><h4>get-device</h4>
<strong>用途</strong>：获取 FUXA 设备的信息</p><p><strong>参数</strong>：
<ul><li><strong>名称</strong>：用于识别的可选节点名称</li>
<li><strong>设备名称</strong>：设备名称（从 FUXA 设备填充的下拉列表）</li>
<li><strong>包含标签</strong>：复选框以在响应中包含标签信息</li>
</ul>
<strong>输入</strong>：任何消息或使用 <code>msg.deviceName</code>、<code>msg.includeTags</code> 覆盖
<strong>输出</strong>：<code>msg.payload</code> 包含设备信息对象</p><p><strong>包含标签</strong>：选中时，响应包括与设备关联的所有标签</p><p><h4>get-device-property</h4>
<strong>用途</strong>：从设备获取属性值</p><p><strong>参数</strong>：
<ul><li><strong>名称</strong>：用于识别的可选节点名称</li>
<li><strong>设备名称</strong>：设备名称（从 FUXA 设备填充的下拉列表）</li>
<li><strong>属性</strong>：要检索的属性名称</li>
</ul>
<strong>输入</strong>：任何消息或使用 <code>msg.deviceName</code>、<code>msg.property</code> 覆盖
<strong>输出</strong>：<code>msg.payload</code> 包含属性值</p><p><strong>属性名称</strong>：常见属性包括 "status"、"connected"、"lastError" 等</p><p><h4>set-device-property</h4>
<strong>用途</strong>：在设备上设置属性值</p><p><strong>参数</strong>：
<ul><li><strong>名称</strong>：用于识别的可选节点名称</li>
<li><strong>设备名称</strong>：设备名称（从 FUXA 设备填充的下拉列表）</li>
<li><strong>属性</strong>：要设置的属性名称</li>
<li><strong>值</strong>：为属性设置的值</li>
</ul>
<strong>输入</strong>：<code>msg.payload</code> 包含值或使用 <code>msg.deviceName</code>、<code>msg.property</code>、<code>msg.value</code> 覆盖
<strong>输出</strong>：<code>msg.payload</code> 包含设置的值</p><h3>报警节点</h3><p><h4>get-alarms</h4>
<strong>用途</strong>：获取当前活动报警</p><p><strong>参数</strong>：
<ul><li><strong>名称</strong>：用于识别的可选节点名称</li>
</ul>
<strong>输入</strong>：任何消息
<strong>输出</strong>：<code>msg.payload</code> 包含活动报警数组</p><p><strong>示例输出</strong>：</p><p>
<pre><code class="json">{
  "payload": [
    {
      "id": "alarm1",
      "name": "High Temperature",
      "status": "active",
      "timestamp": "2025-01-01T10:30:00Z",
      "value": 85.5
    }
  ]
}
</code></pre></p><p><h4>get-history-alarms</h4>
<strong>用途</strong>：获取历史报警数据</p><p><strong>参数</strong>：
<ul><li><strong>名称</strong>：用于识别的可选节点名称</li>
<li><strong>开始时间</strong>：历史期间的开始（datetime-local 选择器）</li>
<li><strong>结束时间</strong>：历史期间的结束（datetime-local 选择器）</li>
</ul>
<strong>输入</strong>：任何消息或使用 <code>msg.startTime</code> 和 <code>msg.endTime</code> 覆盖
<strong>输出</strong>：<code>msg.payload</code> 包含历史报警数组</p><p><h4>ack-alarm</h4>
<strong>用途</strong>：确认 FUXA 中的报警</p><p><strong>参数</strong>：
<ul><li><strong>名称</strong>：用于识别的可选节点名称</li>
<li><strong>报警名称</strong>：报警名称（从 FUXA 报警填充的下拉列表）</li>
<li><strong>类型</strong>：逗号分隔的报警类型（可选）</li>
</ul>
<strong>输入</strong>：任何消息或使用 <code>msg.alarmName</code>、<code>msg.types</code> 覆盖
<strong>输出</strong>：<code>msg.payload</code> 包含确认结果</p><p><strong>报警类型</strong>：指定报警类型以确认特定报警类别（逗号分隔："warning,error,critical"）</p><h3>视图节点</h3><p><h4>set-view</h4>
<strong>用途</strong>：更改 FUXA 中的当前视图</p><p><strong>参数</strong>：
<ul><li><strong>名称</strong>：用于识别的可选节点名称</li>
<li><strong>视图名称</strong>：视图名称（从 FUXA 视图填充的下拉列表）</li>
</ul>
<strong>输入</strong>：任何消息或使用 <code>msg.viewName</code> 覆盖
<strong>输出</strong>：<code>msg.payload</code> 包含操作结果</p><p><h4>open-card</h4>
<strong>用途</strong>：在 FUXA 中打开特定的卡片/对话框</p><p><strong>参数</strong>：
<ul><li><strong>名称</strong>：用于识别的可选节点名称</li>
<li><strong>卡片</strong>：卡片名称（从 FUXA 卡片填充的下拉列表）</li>
</ul>
<strong>输入</strong>：任何消息或使用 <code>msg.cardName</code> 覆盖
<strong>输出</strong>：<code>msg.payload</code> 包含操作结果</p><h3>脚本节点</h3><p><h4>execute-script</h4>
<strong>用途</strong>：执行 FUXA 脚本</p><p><strong>参数</strong>：
<ul><li><strong>名称</strong>：用于识别的可选节点名称</li>
<li><strong>脚本</strong>：脚本名称（从 FUXA 脚本填充的下拉列表）</li>
</ul>
<strong>输入</strong>：任何消息或使用 <code>msg.scriptName</code> 覆盖
<strong>输出</strong>：<code>msg.payload</code> 包含执行结果</p><p><strong>示例输出</strong>：</p><p>
<pre><code class="json">{
  "payload": {
    "success": true,
    "script": "myScript",
    "result": "Script completed successfully",
    "timestamp": "2025-01-01T10:45:00Z"
  }
}
</code></pre></p><h3>DAQ 节点</h3><p><h4>get-daq</h4>
<strong>用途</strong>：获取单个标签的数据采集（DAQ）数据</p><p><strong>参数</strong>：
<ul><li><strong>名称</strong>：用于识别的可选节点名称</li>
<li><strong>标签</strong>：单个标签名称（从 FUXA 设备填充的下拉列表）</li>
<li><strong>开始时间</strong>：DAQ 期间的开始（datetime-local 选择器）</li>
<li><strong>结束时间</strong>：DAQ 期间的结束（datetime-local 选择器）</li>
</ul>
<strong>输入</strong>：任何消息或使用 <code>msg.from</code>、<code>msg.to</code> 覆盖
<strong>输出</strong>：<code>msg.payload</code> 包含单个标签的 DAQ 数据</p><p><strong>仅单个标签</strong>：与 get-historical-tags 不同，此节点一次只处理一个标签。对于多个标签，使用单独的 get-daq 节点或 get-historical-tags。</p><p><strong>示例输出</strong>：</p><p>
<pre><code class="json">{
  "payload": [
    {"timestamp": "2025-01-01T10:00:00Z", "value": 25.3, "quality": "good"},
    {"timestamp": "2025-01-01T10:01:00Z", "value": 25.8, "quality": "good"}
  ]
}
</code></pre></p><h3>事件节点</h3><p><h4>emit-event</h4>
<strong>用途</strong>：通过 FUXA 的事件系统发出自定义事件，用于系统间通信和自动化触发</p><p><strong>参数</strong>：
<ul><li><strong>名称</strong>：用于识别的可选节点名称</li>
<li><strong>事件类型</strong>：自定义事件名称/类型（例如 "machine-fault"、"production-complete"、"maintenance-required"）</li>
</ul>
<strong>输入</strong>：<code>msg.payload</code> 包含事件数据（任何格式：字符串、数字、对象、数组）
<strong>输出</strong>：<code>msg.payload</code> 不变（传递）</p><p><strong>事件类型和用法</strong>：</p><p><strong>系统事件</strong>（内置 FUXA 事件）：
<ul><li><code>device-status</code> - 设备连接状态变化</li>
<li><code>device-property</code> - 设备属性更新</li>
<li><code>device-values</code> - 标签值变化</li>
<li><code>alarms-status</code> - 报警状态变化</li>
<li><code>script-console</code> - 脚本控制台输出</li>
<li><code>heartbeat</code> - 系统心跳/存活信号</li>
</ul>
<strong>自定义事件</strong>（用户定义）：
<ul><li><code>production-start</code> - 生产线启动</li>
<li><code>production-stop</code> - 生产线停止</li>
<li><code>quality-alert</code> - 质量控制警报</li>
<li><code>maintenance-due</code> - 设备需要维护</li>
<li><code>operator-login</code> - 操作员认证</li>
<li><code>batch-complete</code> - 生产批次完成</li>
</ul>
<strong>事件数据示例</strong>：</p><p><strong>简单字符串事件</strong>：</p><p>
<pre><code class="json">{
  "payload": "Machine fault detected"
}
</code></pre></p><p><strong>结构化事件数据</strong>：</p><p>
<pre><code class="json">{
  "payload": {
    "eventType": "production-alert",
    "machine": "Line-A",
    "severity": "high",
    "timestamp": "2025-01-01T10:30:00Z",
    "details": {
      "temperature": 85.5,
      "pressure": 2.1,
      "errorCode": "E-202"
    }
  }
}
</code></pre></p><p><strong>数组数据事件</strong>：</p><p>
<pre><code class="json">{
  "payload": [
    {"sensor": "temp1", "value": 75.2},
    {"sensor": "temp2", "value": 76.8},
    {"sensor": "temp3", "value": 74.9}
  ]
}
</code></pre></p><p><strong>事件工作原理</strong>：
<li>事件发出到 FUXA 的内部事件系统</li>
<li>其他 FUXA 组件可以监听这些事件</li>
<li>事件可以触发脚本、更新显示或启动自动化序列</li>
<li>事件持续存在直到被消费或系统重启</li></p><p><strong>常见用例</strong>：
<ul><li><strong>设备监控</strong>：当设备进入故障状态时发出事件</li>
<li><strong>生产跟踪</strong>：发出生产里程碑或质量问题信号</li>
<li><strong>维护警报</strong>：通知何时设备需要服务</li>
<li><strong>操作员通知</strong>：向操作员警报系统条件</li>
<li><strong>数据集成</strong>：将结构化数据发送到外部系统</li>
</ul>
<h4>send-message</h4>
<strong>用途</strong>：通过 FUXA 的通知系统发送电子邮件通知或消息</p><p><strong>参数</strong>：
<ul><li><strong>名称</strong>：用于识别的可选节点名称</li>
<li><strong>地址</strong>：收件人电子邮件地址</li>
<li><strong>主题</strong>：电子邮件主题行</li>
<li><strong>消息</strong>：默认消息内容（可以覆盖）</li>
</ul>
<strong>输入</strong>：<code>msg.payload</code> 可以包含消息数据或使用 <code>msg.address</code>、<code>msg.subject</code>、<code>msg.message</code> 覆盖
<strong>输出</strong>：<code>msg.payload</code> 包含发送结果</p><p><strong>消息格式选项</strong>：</p><p><strong>简单文本消息</strong>（使用配置的地址/主题）：</p><p>
<pre><code class="json">{
  "payload": "Alert: Temperature exceeded threshold"
}
</code></pre></p><p><strong>完整消息覆盖</strong>：</p><p>
<pre><code class="json">{
  "address": "operator@company.com",
  "subject": "Production Alert",
  "message": "Line A has stopped due to maintenance requirement"
}
</code></pre></p><p><strong>多个收件人</strong>：</p><p>
<pre><code class="json">{
  "address": ["operator1@company.com", "supervisor@company.com"],
  "subject": "Quality Control Alert",
  "message": "Batch #1234 failed quality inspection"
}
</code></pre></p><hr><h2>📊 数据格式</h2><p><h3>标签值</h3>
标签值可以是：
<ul><li><strong>数字</strong>：<code>25.3</code>、<code>100</code>、<code>0</code></li>
<li><strong>字符串</strong>：<code>"Running"</code>、<code>"Stopped"</code></li>
<li><strong>布尔值</strong>：<code>true</code>、<code>false</code></li>
<li><strong>对象</strong>：复杂数据结构</li>
</ul>
<h3>时间戳</h3>
所有时间戳使用 ISO 8601 格式：</p><p>
<pre><code class="json">"2025-01-01T10:30:00.000Z"
</code></pre></p><p><h3>错误处理</h3>
所有节点将错误输出到调试选项卡。常见错误模式：</p><p>
<pre><code class="json">{
  "payload": null,
  "_msgid": "abc123",
  "error": "Tag not found: myTag"
}
</code></pre></p><hr><h2>🔧 故障排除</h2><p><h3>仪表盘未加载</h3>
<strong>问题</strong>：<code>/nodered/api/dashboard</code> 显示错误或空白页</p><p><strong>解决方案</strong>：安装 Dashboard 2
<li>打开 Node-RED 编辑器</li>
<li>进入 <strong>管理面板</strong></li>
<li>安装 <code>@flowfuse/node-red-dashboard</code></li>
<li>重启 Node-RED/FUXA</li></p><p><h3>FUXA 节点未出现</h3>
<strong>问题</strong>：FUXA 贡献节点在面板中不可见</p><p><strong>解决方案</strong>：检查 Node-RED 日志中的错误。当 FUXA 启动 Node-RED 时，节点会自动注册。</p><p><h3>下拉列表未填充</h3>
<strong>问题</strong>：标签/设备下拉列表为空</p><p><strong>解决方案</strong>：确保您在 FUXA 中配置了设备和标签。下拉列表从您的 FUXA 项目数据填充。</p><p><h3>事件不工作</h3>
<strong>问题</strong>：发出的事件未触发预期行为</p><p><strong>解决方案</strong>：检查其他 FUXA 组件（脚本、视图）是否正在监听正确的事件类型。事件区分大小写。</p><p><h3>电子邮件通知未发送</h3>
<strong>问题</strong>：send-message 节点未传递电子邮件</p><p><strong>解决方案</strong>：在 FUXA 服务器配置中配置 SMTP 设置。检查 FUXA 日志中的 SMTP 连接错误。</p><hr><h2>💡 最佳实践</h2><h3>1️⃣ 使用事件驱动架构</h3><p>使用 <code>get-tag-change</code> 而不是轮询标签，提高效率：<pre><code class="javascript">// 不推荐：轮询标签
setInterval(() => {
  // 每 100ms 检查标签值
}, 100);</p><p>// 推荐：使用事件驱动
// get-tag-change 节点仅在值变化时触发
</code></pre><h3>2️⃣ 批量处理历史数据</h3><p>使用 <code>get-historical-tags</code> 一次获取多个标签的历史数据：<pre><code class="json">{
  "tags": ["temp1", "temp2", "pressure"],
  "from": "2025-01-01T08:00",
  "to": "2025-01-01T17:00"
}
</code></pre><h3>3️⃣ 使用自定义事件进行系统集成</h3><p>使用 <code>emit-event</code> 节点在不同系统之间传递信息：<pre><code class="json">{
  "payload": {
    "eventType": "production-alert",
    "machine": "Line-A",
    "severity": "high"
  }
}
</code></pre><h3>4️⃣ 配置 DAQ 设置优化性能</h3><p>使用 <code>set-tag-daq-settings</code> 节点优化数据采集：</p><p><ul><li>设置合理的采样间隔</li>
<li>使用死区减少噪声</li>
<li>仅启用需要的标签</li>
</ul>
<hr></p><h2>🎉 总结</h2><p>通过本教程，您已经学会了：</p><p>✅ 安装和配置 Node-RED 集成  
✅ 使用 FUXA 贡献节点  
✅ 配置标签、设备、报警、视图和脚本节点  
✅ 使用事件系统进行系统集成  
✅ 故障排除和最佳实践  </p><p>现在您可以创建强大的自动化流程与 FUXA SCADA 系统交互了！</p><hr><blockquote>💡 <strong>提示</strong>：Node-RED 提供了丰富的节点库，可以与 FUXA 结合使用，实现复杂的自动化逻辑。</blockquote><hr><p><strong>关注我们，获取更多工业自动化技术干货！</strong> 🎯</p><p><div style="display: flex; justify-content: center; align-items: center; gap: 40px; margin: 30px 0;">
    <div style="text-align: center;">
        <img src="images/微信公众号.jpg" alt="微信公众号" style="width: 200px; height: 200px; object-fit: contain;">
        <p style="margin: 10px 0 0 0; font-size: 14px; color: #666;">微信公众号</p>
    </div>
    <div style="text-align: center;">
        <img src="images/单人二维码.png" alt="技术支持" style="width: 200px; height: 200px; object-fit: contain;">
        <p style="margin: 10px 0 0 0; font-size: 14px; color: #666;">技术支持</p>
    </div>
</div></p>
        </div>
        <div class="content-section" id="section-09-ODBC数据库集成教程">
            <h1>🗄️ FUXA ODBC 数据库集成教程</h1><hr><h2>📋 概述</h2><p>ODBC（Open Database Connectivity）允许 FUXA 与各种数据库系统进行交互，实现数据存储、查询和管理。</p><hr><h2>🚀 快速开始</h2><h3>推荐使用 Docker 版本</h3><p>要开始使用 ODBC，建议使用 Docker 版本，因为 ODBC 驱动程序已预安装并准备就绪。</p><hr><h2>🔧 安装 ODBC 驱动</h2><h3>可用驱动</h3><p>可用的驱动程序及其定义名称可以在以下位置找到：<a href="https://github.com/frangoteam/FUXA/blob/master/odbc/odbcinst.ini" target="_blank">ODBC Driver ini</a></p><h3>在 Debian Linux 系统上安装</h3><p>如果您在基于 Debian 的 Linux 系统上通过 NPM 安装，可以尝试使用以下步骤手动为您的系统安装 ODBC 驱动：</p><p><strong>步骤 1：</strong> 安装 unixODBC</p><p>
<pre><code class="bash">sudo apt-get update && sudo apt-get install -y unixodbc unixodbc-dev
</code></pre></p><p><strong>步骤 2：</strong> 从 <a href="https://github.com/frangoteam/FUXA/tree/master/odbc" target="_blank">ODBC Driver Files</a> 复制两个文件到您的系统</p><p><strong>步骤 3：</strong> 进入下载文件的目录，使脚本可执行并安装和配置 ini 文件</p><p>
<pre><code class="bash">sudo chmod +x install_odbc_drivers.sh
sudo ./install_odbc_drivers.sh
sudo cp odbcinst.ini /etc/odbcinst.ini
</code></pre></p><p><strong>步骤 4：</strong> 测试安装的驱动，您可以使用 unixODBC 连接，更改连接字符串以适应您的数据库<pre><code class="bash"># 测试 MySQL 连接
sudo myodbc-installer -s -a -c2 -n "test" -t "DRIVER=MySQL;SERVER=YourIP;PORT=3306;DATABASE=testDB;UID=User;PWD=MyPass"</p><p># 测试连接
sudo isql test
</code></pre><hr><h2>💾 如何使用 ODBC</h2><h3>创建数据库连接</h3><p>首先，您需要通过在 FUXA 中添加设备并选择 ODBC 来创建与数据库的连接。</p><p>如果您使用的是已定义的 DSN，可以输入它，或者只需在同一字段中添加完整的连接字符串，如下所示：</p><p><img src="https://github.com/user-attachments/assets/aacaae07-eb2f-4e78-878e-eaa9fa66bb43" alt="ODBC 连接配置"></p><h3>不同数据库的连接字符串</h3><p>以下是不同数据库的连接字符串示例：</p><p><strong>PostgreSQL</strong></p><p>
<pre><code class="">DRIVER=PostgreSQL;SERVER=Your_DB_IP;PORT=5432;DATABASE=testDB
</code></pre></p><p><strong>MySQL</strong></p><p>
<pre><code class="">DRIVER=MySQL;SERVER=Your_DB_IP;PORT=3306;DATABASE=testDB;SSLMODE=DISABLED
</code></pre></p><p>⚠️ <strong>注意</strong>：MySQL 可能由于 SSLMODE 导致连接问题，请尝试在连接字符串中不使用 SSLMODE，并尝试启用和禁用。</p><p><ul><li><code>SSLMODE=ENABLE</code></li>
<li><code>SSLMODE=DISABLED</code></li>
</ul>
将 <code>testDB</code> 替换为您的实际数据库名称。</p><hr><h2>📝 创建测试脚本</h2><p>创建服务器端脚本进行测试，您可以使用测试选项卡和控制台来显示结果。</p><h3>初始化设备</h3><p>首先，您需要通过设备获取 ODBC 连接，在示例中，它被命名为 <code>postgreSQL</code>，如上图所示：<pre><code class="javascript">// 初始化设备，名称与连接相同
let myDevice = await $getDevice('postgreSQL', true);
</code></pre><h3>从数据库读取数据</h3><pre><code class="javascript">let result = await myDevice.pool.query(`SELECT * FROM "testTable"`);
console.log(JSON.stringify(result));
</code></pre><hr><h2>⚠️ 重要注意事项</h2><h3>表名格式</h3><p>根据您的数据库，您可能需要将引号 <code>"testTable"</code> 移除为 <code>testTable</code> 或添加架构 <code>"DB_Schema"."testTable"</code></p><h3>连接名称唯一性</h3><p>如果您需要在另一个脚本中使用 ODBC，则不能使用相同的连接名称：</p><p><strong>脚本 1</strong></p><p>
<pre><code class="javascript">let myDevice1 = await $getDevice('postgreSQL', true);
</code></pre></p><p><strong>脚本 2</strong></p><p>
<pre><code class="javascript">let myDevice2 = await $getDevice('postgreSQL', true);
</code></pre></p><hr><h2>🎯 完整示例</h2><p>此示例还每 100ms 轮询标签，并使用触发器执行 SQL 查询，请注意不要使用此方法使系统过载，未来的理想解决方案是为标签创建事件监听器，我们可以使用简单的 addEventListener 方法而无需轮询。</p><p>还有一个 1 秒循环，从数据库更新值并将它们推送到 FUXA UI 中的表格。</p><p>还有一个名为查询管理器的函数，它处理触发器和执行的一次性操作。</p><p><strong>注意</strong>：您可能需要重启 FUXA 才能使其正常工作，每次修改脚本时，有时修改脚本没问题，有时需要重启，因此如果您有任何奇怪的问题，请在创建问题之前尝试重启。</p><h3>创建服务器端脚本并设置为启动时运行</h3><pre><code class="javascript">// 查询管理器，提供基于触发器事件的一次性函数
async function createQueryManager(device) {
    let lastTriggerState = false;
    return async function(trigger, sqlQuery) {
        if (trigger && trigger !== lastTriggerState) {
            try {
                const result = await device.pool.query(sqlQuery);
                lastTriggerState = trigger;
                return result;
            } catch (error) {
                return 'Error executing query';
            }
        }
        lastTriggerState = trigger;
    };
}</p><p>// 初始化设备，名称与连接相同
let myDevice = await $getDevice('postgreSQL', true);</p><p>// 为每种查询类型创建查询管理器，保留查询数据
let executeInsertQuery = await createQueryManager(myDevice); // 插入实例
let executeSelectQuery = await createQueryManager(myDevice); // 选择实例</p><p>// 全局变量以保留数据
let selResult;</p><p>// 100ms 循环捕获标签事件
let myLoop100ms = setInterval(loop100ms, 100);</p><p>async function loop100ms() {
  
    let customerName     = $getTag($getTagId('customerName'));
    let customerPhone    = $getTag($getTagId('customerPhone'));
    let customerEmail    = $getTag($getTagId('customerEmail'));
    let customerAge      = $getTag($getTagId('customerAge'));
    let execSaveCustomer = $getTag($getTagId('execSaveCustomer'));
  
    // 每 100ms 调用查询管理器实例函数，第一个参数是触发器，用于一次性执行查询
    await executeInsertQuery(
        execSaveCustomer,
        `INSERT INTO "testData"."Customer" ("Name", "Phone", "Email", "Age") VALUES ('${customerName}', '${customerPhone}', '${customerEmail}', ${customerAge})`
    );
  
    // 测试调用相同函数类型的第二个实例
    //selResult = await executeSelectQuery(
    //    execSaveCustomer,
    //    'SELECT * FROM "testData"."Customer"'
    //);
    //
    //$setTag($getTagId('customerDataArray'), JSON.stringify(selResult));
}</p><p>// 1 秒循环从数据库更新数据
let myLoop1sec = setInterval(loop1sec, 1000);</p><p>async function loop1sec() {
  // 在这里不需要使用查询管理器，因为我们每 1 秒从数据库读取以更新表格的数据
  selResult = await myDevice.pool.query('SELECT * FROM "testData"."Customer"');
  $setTag($getTagId('customerDataArray'), JSON.stringify(selResult));
}
</code></pre><h3>创建客户端脚本</h3><p>创建一个间隔为 1 秒的客户端脚本，此脚本将数据放入表格：<pre><code class="javascript">let customerData = JSON.parse($getTag($getTagId('customerDataArray')));</p><p>// 列 ID 必须与数据库列匹配
var tableData = {
  columns: [{
    id: 'Name',
    label: 'Name'
    }, {
    id: 'Phone',    
    label: 'Phone'
    }, {
    id: 'Email',    
    label: 'Email'
    }, {
    id: 'Age',    
    label: 'Age'
  }],
  rows: customerData
};</p><p>// FUXA 中使用的表格名称
$invokeObject('customerTable', 'setTableAndData', tableData);
</code></pre><hr><h2>📊 常见数据库连接字符串</h2><h3>PostgreSQL</h3><p>
<pre><code class="">DRIVER=PostgreSQL;SERVER=localhost;PORT=5432;DATABASE=mydb;UID=user;PWD=password
</code></pre></p><h3>MySQL</h3><p>
<pre><code class="">DRIVER=MySQL;SERVER=localhost;PORT=3306;DATABASE=mydb;UID=user;PWD=password;SSLMODE=DISABLED
</code></pre></p><h3>SQL Server</h3><p>
<pre><code class="">DRIVER=ODBC Driver 17 for SQL Server;SERVER=localhost;PORT=1433;DATABASE=mydb;UID=user;PWD=password
</code></pre></p><h3>Oracle</h3><p>
<pre><code class="">DRIVER=Oracle in OraClient18Home1;DBQ=localhost:1521/ORCL;UID=user;PWD=password
</code></pre></p><h3>SQLite</h3><p>
<pre><code class="">DRIVER=SQLite3;Database=/path/to/database.db
</code></pre></p><hr><h2>💡 最佳实践</h2><h3>1️⃣ 使用连接池</h3><p>ODBC 连接使用连接池，避免频繁创建和销毁连接：<pre><code class="javascript">// 好的做法：重用连接
let myDevice = await $getDevice('postgreSQL', true);</p><p>// 不好的做法：每次查询都创建新连接
// let myDevice = await $getDevice('postgreSQL', true);
// let result = await myDevice.pool.query(...);
</code></pre><h3>2️⃣ 使用参数化查询</h3><p>防止 SQL 注入攻击：<pre><code class="javascript">// 好的做法：使用参数化查询
let name = $getTag($getTagId('customerName'));
let result = await myDevice.pool.query(
    'SELECT * FROM "Customer" WHERE "Name" = $1',
    [name]
);</p><p>// 不好的做法：字符串拼接
let name = $getTag($getTagId('customerName'));
let result = await myDevice.pool.query(
    `SELECT * FROM "Customer" WHERE "Name" = '${name}'`
);
</code></pre><h3>3️⃣ 错误处理</h3><p>始终处理查询错误：<pre><code class="javascript">try {
    let result = await myDevice.pool.query('SELECT * FROM "testTable"');
    console.log(JSON.stringify(result));
} catch (error) {
    console.error('Query failed:', error);
}
</code></pre><h3>4️⃣ 限制查询频率</h3><p>避免过于频繁的查询导致数据库过载：<pre><code class="javascript">// 好的做法：合理的查询间隔
let myLoop1sec = setInterval(loop1sec, 1000);</p><p>// 不好的做法：过于频繁的查询
// let myLoop10ms = setInterval(loop10ms, 10);
</code></pre><hr><h2>🔧 故障排除</h2><h3>❓ 连接失败</h3><p><strong>可能原因</strong>：
<li>连接字符串错误</li>
<li>数据库服务器未运行</li>
<li>防火墙阻止连接</li>
<li>驱动程序未正确安装</li></p><p><strong>解决方案</strong>：
<li>检查连接字符串格式</li>
<li>确认数据库服务器正在运行</li>
<li>检查防火墙设置</li>
<li>重新安装 ODBC 驱动</li></p><h3>❓ 查询超时</h3><p><strong>可能原因</strong>：
<li>查询过于复杂</li>
<li>数据库负载过高</li>
<li>网络延迟</li></p><p><strong>解决方案</strong>：
<li>优化查询语句</li>
<li>添加适当的索引</li>
<li>增加超时时间</li></p><h3>❓ SSL 连接问题（MySQL）</h3><p><strong>可能原因</strong>：
<li>SSLMODE 配置不正确</li>
<li>证书问题</li></p><p><strong>解决方案</strong>：</p><p>
<pre><code class="javascript">// 尝试不同的 SSLMODE 设置
// SSLMODE=DISABLED
// SSLMODE=REQUIRED
// SSLMODE=PREFERRED
</code></pre></p><h3>❓ 表名或列名错误</h3><p><strong>可能原因</strong>：
<li>引号使用不当</li>
<li>架构名称不正确</li></p><p><strong>解决方案</strong>：</p><p>
<pre><code class="javascript">// 尝试不同的表名格式
// "testTable"
// testTable
// "schema"."testTable"
</code></pre></p><hr><h2>🎉 总结</h2><p>通过本教程，您已经学会了：</p><p>✅ 安装和配置 ODBC 驱动  
✅ 创建数据库连接  
✅ 执行 SQL 查询  
✅ 在 FUXA UI 中显示数据  
✅ 遵循最佳实践  
✅ 故障排除  </p><p>现在您可以在 FUXA 中集成各种数据库了！</p><hr><blockquote>💡 <strong>提示</strong>：建议在生产环境中使用连接池和参数化查询，以提高性能和安全性。</blockquote><hr><p><strong>关注我们，获取更多工业自动化技术干货！</strong> 🎯</p><p><div style="display: flex; justify-content: center; align-items: center; gap: 40px; margin: 30px 0;">
    <div style="text-align: center;">
        <img src="images/微信公众号.jpg" alt="微信公众号" style="width: 200px; height: 200px; object-fit: contain;">
        <p style="margin: 10px 0 0 0; font-size: 14px; color: #666;">微信公众号</p>
    </div>
    <div style="text-align: center;">
        <img src="images/单人二维码.png" alt="技术支持" style="width: 200px; height: 200px; object-fit: contain;">
        <p style="margin: 10px 0 0 0; font-size: 14px; color: #666;">技术支持</p>
    </div>
</div></p>
        </div>
        <div class="content-section" id="section-10-调度器使用教程">
            <h1>⏰ FUXA 调度器使用教程</h1><hr><h2>📋 概述</h2><p>调度器是 FUXA 中强大的基于时间的自动化系统，允许您根据星期几、每月的日期和月份创建在特定时间触发的事件。它提供定时器模式（开/关周期）和事件模式（基于持续时间的触发器），具有完整的设备控制功能。</p><hr><h2>🎯 功能概述</h2><p>调度器支持基于时间表自动控制设备和标签。主要功能包括：</p><p><ul><li><strong>星期调度</strong>：为特定日期（周一至周日）安排事件</li>
<li><strong>月份模式</strong>：通过月份和每月日期组合进行高级调度</li>
<li><strong>定时器模式</strong>：定义开/关周期的开始和结束时间</li>
<li><strong>事件模式</strong>：为特定持续时间触发事件</li>
<li><strong>设备动作</strong>：执行额外操作，如设置值或运行脚本</li>
<li><strong>主控制</strong>：调度器充当设备标签的主控制器</li>
</ul>
<hr></p><h2>📅 调度模式</h2><h3>星期模式</h3><p>默认调度模式允许您为事件选择特定的星期几。</p><p><ul><li><strong>日期</strong>：星期一、星期二、星期三、星期四、星期五、星期六、星期日</li>
<li><strong>时间范围</strong>：定义定时器模式的开始和结束时间，或事件模式的开始时间和持续时间</li>
<li><strong>视觉指示器</strong>：选中的日期在调度显示中高亮显示</li>
</ul>
<h3>月份模式</h3></p><p>结合月份和每月日期选择进行精确控制的高级调度。</p><p><ul><li><strong>月份</strong>：一月到十二月</li>
<li><strong>每月日期</strong>：1 日到 31 日</li>
<li><strong>重要说明</strong>：</li>
</ul>  - 如果月份少于 31 天（例如 2 月有 28 天），安排在 31 日的事件将不会执行
  - Node.js 调度器不支持"每月最后一天"功能
  - 事件仅在有效的日期组合上触发</p><hr><h2>🔗 设备和标签关系</h2><h3>设备绑定</h3><p>每个调度绑定到特定设备并控制其关联的标签：</p><p><ul><li><strong>设备选择</strong>：从项目中的可用设备中选择</li>
<li><strong>标签控制</strong>：调度器直接控制设备的主标签</li>
<li><strong>主权限</strong>：调度器始终优先于手动标签更改</li>
</ul>
<h3>设备动作</h3></p><p>除了控制主设备标签外，您还可以配置额外操作：</p><p><ul><li><strong>设置值</strong>：将其他设备标签设置为特定值</li>
<li><strong>运行脚本</strong>：执行自定义 JavaScript 函数</li>
<li><strong>触发点</strong>：操作在开始和结束事件上执行</li>
</ul>
设备动作在调度器属性中配置，提供超出基本开/关控制的扩展自动化功能。</p><hr><h2>🔐 授权</h2><p>调度器实现两级授权系统：</p><p><h3>主授权</h3>
<ul><li><strong>自动分配</strong>：调度的设备自动获得主授权级别</li>
<li><strong>最低要求</strong>：用户必须至少具有主授权才能与调度的设备交互</li>
<li><strong>覆盖能力</strong>：主授权允许调度器在活动事件期间覆盖手动标签更改</li>
</ul>
<h3>每设备授权</h3>
<ul><li><strong>额外安全</strong>：单个设备可以具有高于主要求的授权级别</li>
<li><strong>细粒度控制</strong>：不同设备可能需要不同的权限级别（例如，关键设备可能需要管理员访问）</li>
<li><strong>分层安全</strong>：主授权提供基本访问权限，而每设备授权添加设备特定限制</li>
</ul>
<hr></p><h2>📝 添加/编辑调度表单</h2><h3>基本设置</h3><table>
<tr><th>设置</th><th>说明</th><th>示例</th></tr>
<tr><td><strong>设备</strong></td><td>选择要控制的目标设备</td><td>Water Pump</td></tr>
<tr><td><strong>开始时间</strong></td><td>事件应该开始的时间（HH:MM 格式）</td><td>08:00</td></tr>
<tr><td><strong>模式切换</strong></td><td>在定时器模式和事件模式之间切换</td><td>Timer Mode / Event Mode</td></tr>
</table><h3>定时器模式 vs 事件模式</h3><p><h4>定时器模式</h4>
<ul><li><strong>结束时间</strong>：定义事件应该停止的时间</li>
<li><strong>标签行为</strong>：标签从开始时间到结束时间保持 ON</li>
<li><strong>用例</strong>：常规开/关周期（例如，上午 8:00 到下午 6:00）</li>
</ul>
<h4>事件模式</h4>
<ul><li><strong>持续时间</strong>：设置事件应该持续多长时间</li>
<li><strong>持续时间单位</strong>：小时、分钟、秒</li>
<li><strong>标签行为</strong>：标签在指定持续时间内为 ON，然后自动 OFF</li>
<li><strong>用例</strong>：定时触发器（例如，运行泵 30 秒）</li>
</ul>
<h3>重复 vs 一次性事件</h3></p><p><ul><li><strong>重复</strong>：事件根据调度重复（默认）</li>
<li><strong>一次性</strong>：事件执行一次并自动删除</li>
<li><strong>自动清理</strong>：非重复事件在完成后删除</li>
</ul>
<h3>月份模式配置</h3></p><p>启用月份模式时：</p><p><ul><li><strong>月份选择</strong>：选择事件应该运行的月份</li>
<li><strong>每月日期选择</strong>：在这些月份中选择特定日期</li>
<li><strong>日历视图</strong>：单击日历按钮查看调度的视觉表示</li>
</ul>
<hr></p><h2>💾 数据存储</h2><h3>数据库结构</h3><p>调度存储在项目数据库中，具有以下结构：<pre><code class="json">{
  "schedules": {
    "Device Name": [
      {
        "id": "unique_schedule_id",
        "startTime": "08:00",
        "endTime": "18:00",
        "days": [false, true, true, true, true, true, false],
        "months": [false, false, false, false, false, false, false, false, false, true, false, false],
        "daysOfMonth": [false, false, false, false, true, false, false, false, false, false, false, false, false, false, false, false, false, false, false, false, false, false, false, false, false, false, false, false, false, false, false],
        "monthMode": true,
        "recurring": true,
        "eventMode": false,
        "duration": 0,
        "deviceName": "Device Name",
        "variableId": "tag_id"
      }
    ]
  },
  "settings": {
    "deviceActions": [...]
  }
}
</code></pre><h3>关键字段</h3><table>
<tr><th>字段</th><th>类型</th><th>说明</th></tr>
<tr><td><strong>days</strong></td><td>Boolean 数组</td><td>星期一至星期日（7 个元素）</td></tr>
<tr><td><strong>months</strong></td><td>Boolean 数组</td><td>一月至十二月（12 个元素）</td></tr>
<tr><td><strong>daysOfMonth</strong></td><td>Boolean 数组</td><td>1 日至 31 日（31 个元素）</td></tr>
<tr><td><strong>monthMode</strong></td><td>Boolean</td><td>为 true 时启用基于月份的调度</td></tr>
<tr><td><strong>eventMode</strong></td><td>Boolean</td><td>为 true 时启用基于持续时间的事件</td></tr>
<tr><td><strong>recurring</strong></td><td>Boolean</td><td>控制事件是重复还是执行一次</td></tr>
</table><hr><h2>🎯 使用示例</h2><h3>示例 1：每日水泵调度</h3><p><ul><li><strong>设备</strong>：Water Pump（水泵）</li>
<li><strong>日期</strong>：周一至周五</li>
<li><strong>开始</strong>：08:00，<strong>结束</strong>：18:00</li>
<li><strong>模式</strong>：定时器模式</li>
<li><strong>结果</strong>：水泵在工作日的工作时间内运行</li>
</ul>
<strong>配置步骤</strong>：
<li>选择设备 "Water Pump"</li>
<li>选择周一至周五</li>
<li>设置开始时间 08:00，结束时间 18:00</li>
<li>选择定时器模式</li>
<li>启用重复</li></p><hr><h3>示例 2：每月维护</h3><p><ul><li><strong>设备</strong>：Maintenance Valve（维护阀门）</li>
<li><strong>月份</strong>：一月、四月、七月、十月</li>
<li><strong>日期</strong>：每月的 15 日</li>
<li><strong>开始</strong>：09:00，<strong>持续时间</strong>：2 小时</li>
<li><strong>模式</strong>：事件模式，非重复</li>
<li><strong>结果</strong>：阀门按季度计划打开进行维护</li>
</ul>
<strong>配置步骤</strong>：
<li>选择设备 "Maintenance Valve"</li>
<li>启用月份模式</li>
<li>选择一月、四月、七月、十月</li>
<li>选择每月 15 日</li>
<li>设置开始时间 09:00，持续时间 2 小时</li>
<li>选择事件模式</li>
<li>禁用重复</li></p><hr><h3>示例 3：节日照明</h3><p><ul><li><strong>设备</strong>：Holiday Lights（节日灯）</li>
<li><strong>月份</strong>：十二月</li>
<li><strong>日期</strong>：1 日至 31 日</li>
<li><strong>开始</strong>：17:00，<strong>结束</strong>：23:00</li>
<li><strong>模式</strong>：定时器模式</li>
<li><strong>结果</strong>：灯在十二月的每晚运行</li>
</ul>
<strong>配置步骤</strong>：
<li>选择设备 "Holiday Lights"</li>
<li>启用月份模式</li>
<li>选择十二月</li>
<li>选择 1 日至 31 日</li>
<li>设置开始时间 17:00，结束时间 23:00</li>
<li>选择定时器模式</li>
<li>启用重复</li></p><hr><h2>💡 最佳实践</h2><h3>1️⃣ 测试调度</h3><p>始终在开发期间测试新调度：</p><p><ul><li>在测试环境中创建调度</li>
<li>验证触发时间和持续时间</li>
<li>检查设备响应</li>
<li>确认标签值正确更改</li>
</ul>
<h3>2️⃣ 月份限制</h3></p><p>避免为无效的日期/月份组合安排调度：</p><p><ul><li>二月没有 30 日和 31 日</li>
<li>四月、六月、九月、十一月没有 31 日</li>
<li>使用日历视图验证选择</li>
</ul>
<h3>3️⃣ 使用设备动作</h3></p><p>使用设备动作实现复杂的自动化逻辑：</p><p><ul><li>在事件开始时设置多个标签</li>
<li>在事件结束时执行清理操作</li>
<li>运行脚本进行复杂计算</li>
<li>发送通知或警报</li>
</ul>
<h3>4️⃣ 时区意识</h3></p><p>注意服务器时区进行调度：</p><p><ul><li>确认服务器时区设置</li>
<li>考虑夏令时变化</li>
<li>在多时区环境中使用 UTC</li>
</ul>
<h3>5️⃣ 资源管理</h3></p><p>非重复事件自动清理以防止累积：</p><p><ul><li>一次性事件在完成后自动删除</li>
<li>定期检查调度列表</li>
<li>删除不再需要的调度</li>
</ul>
<hr></p><h2>🔧 故障排除</h2><h3>常见问题</h3><h4>❓ 事件未触发</h4><p><strong>可能原因</strong>：
<ul><li>月份/日期组合无效</li>
<li>设备未连接</li>
<li>权限不足</li>
</ul>
<strong>解决方案</strong>：
<li>检查月份/日期组合的有效性</li>
<li>确认设备连接状态</li>
<li>验证用户权限</li></p><hr><h4>❓ 标签未更改</h4><p><strong>可能原因</strong>：
<ul><li>设备连接失败</li>
<li>权限不足</li>
<li>标签配置错误</li>
</ul>
<strong>解决方案</strong>：
<li>检查设备连接</li>
<li>验证用户权限</li>
<li>检查标签配置</li></p><hr><h4>❓ 动作未执行</h4><p><strong>可能原因</strong>：
<ul><li>设备动作配置错误</li>
<li>脚本错误</li>
<li>标签不存在</li>
</ul>
<strong>解决方案</strong>：
<li>检查设备动作配置</li>
<li>查看脚本错误日志</li>
<li>确认标签存在</li></p><hr><h4>❓ 调度未保存</h4><p><strong>可能原因</strong>：
<ul><li>权限不足</li>
<li>数据库访问失败</li>
<li>网络问题</li>
</ul>
<strong>解决方案</strong>：
<li>验证用户权限</li>
<li>检查数据库连接</li>
<li>检查网络连接</li></p><hr><h3>调试信息</h3><p>调度器日志包括有关以下内容的详细信息：</p><p><ul><li>调度加载和解析</li>
<li>带时间戳的事件触发</li>
<li>标签写入操作</li>
<li>设备动作执行</li>
<li>月份模式日期验证</li>
</ul>
<hr></p><h2>🎉 总结</h2><p>通过本教程，您已经学会了：</p><p>✅ 理解调度器的基本概念  
✅ 配置星期模式和月份模式  
✅ 使用定时器模式和事件模式  
✅ 设置设备动作和授权  
✅ 创建实际应用示例  
✅ 遵循最佳实践  
✅ 故障排除  </p><p>现在您可以使用调度器创建强大的时间自动化了！</p><hr><h2>📚 快速参考</h2><h3>调度模式对比</h3><table>
<tr><th>模式</th><th>适用场景</th><th>特点</th></tr>
<tr><td><strong>星期模式</strong></td><td>日常工作调度</td><td>简单易用，适合重复性任务</td></tr>
<tr><td><strong>月份模式</strong></td><td>季度/年度任务</td><td>精确控制，适合维护计划</td></tr>
</table><h3>定时器 vs 事件模式</h3><table>
<tr><th>模式</th><th>参数</th><th>用途</th></tr>
<tr><td><strong>定时器模式</strong></td><td>开始时间、结束时间</td><td>固定时间段运行</td></tr>
<tr><td><strong>事件模式</strong></td><td>开始时间、持续时间</td><td>定时触发，自动关闭</td></tr>
</table><hr><blockquote>💡 <strong>提示</strong>：建议在生产环境中先在测试环境验证调度配置，确保正确无误后再部署。</blockquote><hr><p><strong>关注我们，获取更多工业自动化技术干货！</strong> 🎯</p><p><div style="display: flex; justify-content: center; align-items: center; gap: 40px; margin: 30px 0;">
    <div style="text-align: center;">
        <img src="images/微信公众号.jpg" alt="微信公众号" style="width: 200px; height: 200px; object-fit: contain;">
        <p style="margin: 10px 0 0 0; font-size: 14px; color: #666;">微信公众号</p>
    </div>
    <div style="text-align: center;">
        <img src="images/单人二维码.png" alt="技术支持" style="width: 200px; height: 200px; object-fit: contain;">
        <p style="margin: 10px 0 0 0; font-size: 14px; color: #666;">技术支持</p>
    </div>
</div></p>
        </div>
        <div class="content-section" id="section-11-视图管理教程">
            <h1>🖼️ FUXA 视图管理教程</h1><hr><h2>📋 概述</h2><p>视图（View）是 FUXA 中用于创建可视化界面的画布，允许您在 Canvas/SVG 上构建自定义的监控界面。</p><hr><h2>🎯 创建视图</h2><h3>步骤 1：打开编辑器</h3><p>进入 FUXA 编辑器界面。</p><h3>步骤 2：添加新视图</h3><p>点击左上角的 <strong>"+"</strong> 图标，选择 <strong>"Canvas/SVG"</strong>。</p><p><img src="images/add-view.png" alt="添加视图"></p><h3>步骤 3：配置视图属性</h3><p>点击 <strong>"Property"</strong> 按钮打开属性面板。</p><p><img src="images/property-view.png" alt="视图属性"></p><h3>步骤 4：定义视图大小和背景</h3><p>在属性面板中设置：
<ul><li><strong>视图尺寸</strong>：宽度和高度</li>
<li><strong>背景颜色</strong>：选择合适的背景色</li>
<li><strong>背景图片</strong>：可选，上传自定义背景图片</li>
</ul>
<img src="images/property-view2.png" alt="视图属性配置"></p><hr><h2>💡 视图类型</h2><h3>Canvas 类型</h3><p><ul><li><strong>特点</strong>：基于 HTML5 Canvas 技术</li>
<li><strong>优势</strong>：高性能渲染，适合动态图形</li>
<li><strong>适用场景</strong>：实时数据可视化、动画效果</li>
</ul>
<h3>SVG 类型</h3></p><p><ul><li><strong>特点</strong>：基于可缩放矢量图形</li>
<li><strong>优势</strong>：矢量图形，无限缩放不失真</li>
<li><strong>适用场景</strong>：精确的工业图形、图标、流程图</li>
</ul>
<hr></p><h2>🎨 视图设计技巧</h2><h3>1️⃣ 尺寸规划</h3><p><ul><li><strong>标准尺寸</strong>：1920x1080（Full HD）</li>
<li><strong>移动端</strong>：375x667 或 414x896</li>
<li><strong>平板端</strong>：768x1024 或 1024x768</li>
</ul>
<h3>2️⃣ 背景选择</h3></p><p><ul><li><strong>纯色背景</strong>：简洁专业，适合工业界面</li>
<li><strong>渐变背景</strong>：增加视觉层次感</li>
<li><strong>图片背景</strong>：使用工厂布局图或设备照片</li>
</ul>
<h3>3️⃣ 网格对齐</h3></p><p><ul><li>使用网格辅助线对齐组件</li>
<li>保持统一的间距和布局</li>
<li>遵循视觉层次原则</li>
</ul>
<hr></p><h2>🔧 高级配置</h2><h3>响应式设计</h3><p>为不同屏幕尺寸创建多个视图：<pre><code class="javascript">// 检测屏幕尺寸并切换视图
function switchView() {
    const width = window.innerWidth;
    if (width < 768) {
        // 移动端视图
    } else if (width < 1024) {
        // 平板端视图
    } else {
        // 桌面端视图
    }
}
</code></pre><h3>视图导航</h3><p>在多个视图之间导航：<pre><code class="javascript">// 切换到指定视图
$navigateTo('viewId');</p><p>// 返回上一个视图
$navigateBack();
</code></pre><hr><h2>📊 最佳实践</h2><h3>1️⃣ 命名规范</h3><p><ul><li>使用有意义的视图名称</li>
<li>例如：<code>主控界面</code>、<code>设备监控</code>、<code>报警历史</code></li>
</ul>
<h3>2️⃣ 组件组织</h3></p><p><ul><li>按功能区域分组组件</li>
<li>使用容器组件组织相关元素</li>
<li>保持视图结构清晰</li>
</ul>
<h3>3️⃣ 性能优化</h3></p><p><ul><li>避免在单个视图中放置过多组件</li>
<li>使用图层管理复杂界面</li>
<li>定期清理未使用的组件</li>
</ul>
<hr></p><h2>🎉 总结</h2><p>通过本教程，您已经学会了：</p><p>✅ 创建新的视图  
✅ 配置视图属性  
✅ 选择合适的视图类型  
✅ 应用设计技巧  
✅ 实现高级功能  </p><p>现在您可以创建专业的工业可视化界面了！</p><hr><h2>📚 快速参考</h2><h3>视图属性对照表</h3><table>
<tr><th>属性</th><th>说明</th><th>推荐值</th></tr>
<tr><td><strong>宽度</strong></td><td>视图宽度（像素）</td><td>1920</td></tr>
<tr><td><strong>高度</strong></td><td>视图高度（像素）</td><td>1080</td></tr>
<tr><td><strong>背景色</strong></td><td>背景颜色</td><td>#1a1a2e（深色）</td></tr>
<tr><td><strong>背景图</strong></td><td>背景图片</td><td>工厂布局图</td></tr>
</table><hr><blockquote>💡 <strong>提示</strong>：建议先在纸上规划视图布局，再在 FUXA 中实现，这样可以提高效率并减少修改。</blockquote><hr><p><strong>关注我们，获取更多工业自动化技术干货！</strong> 🎯</p><p><div style="display: flex; justify-content: center; align-items: center; gap: 40px; margin: 30px 0;">
    <div style="text-align: center;">
        <img src="images/微信公众号.jpg" alt="微信公众号" style="width: 200px; height: 200px; object-fit: contain;">
        <p style="margin: 10px 0 0 0; font-size: 14px; color: #666;">微信公众号</p>
    </div>
    <div style="text-align: center;">
        <img src="images/单人二维码.png" alt="技术支持" style="width: 200px; height: 200px; object-fit: contain;">
        <p style="margin: 10px 0 0 0; font-size: 14px; color: #666;">技术支持</p>
    </div>
</div></p>
        </div>
        <div class="content-section" id="section-12-WebSocket通信教程">
            <h1>🔌 FUXA WebSocket 通信教程</h1><hr><h2>📋 概述</h2><p>WebSocket 是一种在单个 TCP 连接上进行全双工通信的协议，它提供了一种简单高效的方式与 Node-RED 等 Web 应用程序进行通信。FUXA 支持直接在脚本中使用 WebSocket 实现双向数据传输。</p><hr><h2>🎯 应用场景</h2><p><ul><li><strong>实时数据交换</strong>：与 Node-RED、自定义 Web 应用程序交换实时数据</li>
<li><strong>跨平台集成</strong>：连接不同平台和系统</li>
<li><strong>事件驱动</strong>：基于事件的数据推送和接收</li>
<li><strong>远程控制</strong>：通过 WebSocket 实现远程设备控制</li>
</ul>
<hr></p><h2>🔧 WebSocket 模式</h2><h3>客户端模式（推荐）</h3><p>FUXA 作为 WebSocket 客户端连接到外部 WebSocket 服务器。</p><p><strong>优势</strong>：
<ul><li>简单易用</li>
<li>适合与现有服务器集成</li>
<li>支持自动重连</li>
</ul>
<strong>适用场景</strong>：
<ul><li>连接到 Node-RED WebSocket 服务器</li>
<li>连接到自定义 WebSocket 服务</li>
<li>与第三方系统集成</li>
</ul>
<hr></p><h3>服务器模式</h3><p>FUXA 作为 WebSocket 服务器，外部客户端连接到 FUXA。</p><p><strong>优势</strong>：
<ul><li>完全控制连接</li>
<li>适合作为数据源</li>
</ul>
<strong>适用场景</strong>：
<ul><li>FUXA 作为数据源</li>
<li>多个客户端连接到 FUXA</li>
</ul>
<hr></p><h2>💻 完整示例代码</h2><h3>双向数据传输示例</h3><p>以下是一个完整的双向数据传输示例，我们将所有 FUXA 标签和值封装到一个包含时间戳和有效载荷的 JSON 数据对象中。</p><p><strong>重要提示</strong>：
<ul><li>此脚本必须是<strong>服务器端脚本</strong></li>
<li>设置为<strong>启动时运行</strong></li>
<li>需要有一个<strong>正在运行的 WebSocket 服务器</strong>（以下代码用于 WebSocket 客户端）</li>
</ul></p><p>
<pre><code class="javascript">// 引入 WebSocket 模块
const WebSocket = require('/usr/src/app/FUXA/server/node_modules/ws');</p><p>// 全局声明 WebSocket 以管理连接
let ws;</p><p>// WebSocket 服务器 URL
const WebSocketUrl = 'ws://127.0.0.1:1880';</p><p>// PLC/FUXA 标签列表
const tagNames = [
    'yourTagName1', 
    'yourTagName2', 
    'yourTagName3', 
    'yourTagName4', 
    'yourTagName5'
];</p><p>// 获取标签值并创建 JSON 有效载荷的函数
async function createPayload() {
    let payload = {};</p><p>    // 遍历所有标签并获取当前值
    for (const tagName of tagNames) {
        let tag = await $getTag($getTagId(tagName));
        payload[tagName] = tag;
    }</p><p>    // 返回包含时间戳和有效载荷的数据对象
    return {
        data: {
            timestamp: new Date().toISOString(),
            payload: payload
        }
    };
}</p><p>// 向 WebSocket 服务器发送数据的函数
function sendData() {
    createPayload().then((payload) => {
        // 检查连接状态
        if (ws && ws.readyState === WebSocket.OPEN) {
            // 发送 JSON 数据
            ws.send(JSON.stringify(payload));
        } else {
            console.log('WebSocket 未打开。跳过发送数据。');
        }
    });
}</p><p>// 打开 WebSocket 连接
function openWebSocketConnection() {
    // 创建 WebSocket 客户端连接
    ws = new WebSocket(WebSocketUrl);</p><p>    // 连接打开事件
    ws.on('open', () => {
        console.log('WebSocket 连接已建立');
    });</p><p>    // 接收消息事件
    ws.on('message', (message) => {
        try {
            // 解析接收到的 JSON 消息
            let receivedData = JSON.parse(message);
            
            // 检查数据结构
            if (receivedData.data && receivedData.data.payload) {
                // 遍历接收到的标签值
                for (const tagName in receivedData.data.payload) {
                    // 只更新已定义的标签
                    if (tagNames.includes(tagName)) {
                        $setTag($getTagId(tagName), receivedData.data.payload[tagName]);
                    }
                }
            }
        } catch (error) {
            console.error('解析 WebSocket 服务器消息时出错:', error);
        }
    });</p><p>    // 错误处理事件
    ws.on('error', (error) => {
        console.error('WebSocket 错误:', error);
    });</p><p>    // 连接关闭事件
    ws.on('close', () => {
        console.log('WebSocket 连接已关闭');
        // 如果连接关闭，尝试延迟重新连接
        setTimeout(openWebSocketConnection, 5000); 
    });
}</p><p>// 启动 WebSocket 连接
openWebSocketConnection();</p><p>// 设置定时器，每 500ms 发送一次数据
if (typeof globalThis.myTimer === 'undefined') globalThis.myTimer = null;</p><p>if (!globalThis.myTimer) globalThis.myTimer = setInterval(myTimerFunction, 500);</p><p>async function myTimerFunction() {
    sendData();
}
</code></pre></p><hr><h2>📊 数据格式说明</h2><h3>发送数据格式</h3><pre><code class="json">{
  "data": {
    "timestamp": "2026-01-06T12:00:00.000Z",
    "payload": {
      "yourTagName1": 25.3,
      "yourTagName2": true,
      "yourTagName3": "Hello",
      "yourTagName4": 100,
      "yourTagName5": 0.5
    }
  }
}
</code></pre><h3>接收数据格式</h3><pre><code class="json">{
  "data": {
    "timestamp": "2026-01-06T12:00:00.500Z",
    "payload": {
      "yourTagName1": 30.5,
      "yourTagName2": false,
      "yourTagName3": "World",
      "yourTagName4": 200,
      "yourTagName5": 0.8
    }
  }
}
</code></pre><hr><h2>🔌 与 Node-RED 集成</h2><h3>Node-RED 端配置</h3><p>在 Node-RED 中创建 WebSocket 服务器节点：<pre><code class="javascript">// Node-RED 流程示例
[
    {
        "id": "websocket-in",
        "type": "websocket in",
        "name": "FUXA Input",
        "server": "server-config",
        "clientType": "server",
        "x": 150,
        "y": 100,
        "wires": [
            [
                "process-data"
            ]
        ]
    },
    {
        "id": "process-data",
        "type": "function",
        "name": "Process Data",
        "func": "msg.payload = msg.data.payload;\nreturn msg;",
        "outputs": 1,
        "x": 350,
        "y": 100,
        "wires": [
            [
                "websocket-out"
            ]
        ]
    },
    {
        "id": "websocket-out",
        "type": "websocket out",
        "name": "FUXA Output",
        "server": "server-config",
        "clientType": "server",
        "x": 550,
        "y": 100,
        "wires": []
    },
    {
        "id": "server-config",
        "type": "websocket-listener",
        "path": "/ws",
        "wholemsg": "false"
    }
]
</code></pre><hr><h2>💡 高级用法</h2><h3>1️⃣ 连接状态监控</h3><pre><code class="javascript">// 添加连接状态监控
function monitorConnection() {
    setInterval(() => {
        if (ws && ws.readyState === WebSocket.OPEN) {
            console.log('WebSocket 连接正常');
        } else {
            console.log('WebSocket 连接异常');
        }
    }, 10000);
}</p><p>monitorConnection();
</code></pre><h3>2️⃣ 心跳机制</h3><pre><code class="javascript">// 添加心跳机制
function startHeartbeat() {
    setInterval(() => {
        if (ws && ws.readyState === WebSocket.OPEN) {
            ws.send(JSON.stringify({ type: 'heartbeat', timestamp: new Date().toISOString() }));
        }
    }, 30000); // 每 30 秒发送一次心跳
}</p><p>startHeartbeat();
</code></pre><h3>3️⃣ 数据压缩</h3><pre><code class="javascript">// 对于大量数据，可以使用压缩
const zlib = require('zlib');</p><p>function sendCompressedData(data) {
    if (ws && ws.readyState === WebSocket.OPEN) {
        const json = JSON.stringify(data);
        const compressed = zlib.gzipSync(json);
        ws.send(compressed, { binary: true });
    }
}
</code></pre><h3>4️⃣ 错误重试机制</h3><pre><code class="javascript">// 增强的重试机制
let retryCount = 0;
const maxRetries = 5;</p><p>function openWebSocketConnection() {
    ws = new WebSocket(WebSocketUrl);</p><p>    ws.on('open', () => {
        console.log('WebSocket 连接已建立');
        retryCount = 0; // 重置重试计数
    });</p><p>    ws.on('close', () => {
        console.log('WebSocket 连接已关闭');
        
        if (retryCount < maxRetries) {
            retryCount++;
            const delay = Math.min(1000 * Math.pow(2, retryCount), 30000);
            console.log(`尝试重新连接 (${retryCount}/${maxRetries})，延迟 ${delay}ms`);
            setTimeout(openWebSocketConnection, delay);
        } else {
            console.error('达到最大重试次数，停止重试');
        }
    });
}
</code></pre><hr><h2>🔧 故障排除</h2><h3>常见问题</h3><h4>❓ 连接失败</h4><p><strong>可能原因</strong>：
<ul><li>WebSocket 服务器未运行</li>
<li>URL 配置错误</li>
<li>防火墙阻止连接</li>
<li>端口被占用</li>
</ul>
<strong>解决方案</strong>：
<li>确认 WebSocket 服务器正在运行</li>
<li>检查 WebSocket URL 是否正确</li>
<li>检查防火墙设置</li>
<li>确认端口未被其他程序占用</li></p><hr><h4>❓ 数据未发送</h4><p><strong>可能原因</strong>：
<ul><li>连接未建立</li>
<li>标签 ID 错误</li>
<li>数据格式错误</li>
</ul>
<strong>解决方案</strong>：
<li>检查连接状态</li>
<li>验证标签 ID 是否正确</li>
<li>检查 JSON 数据格式</li></p><hr><h4>❓ 数据未接收</h4><p><strong>可能原因</strong>：
<ul><li>消息格式不匹配</li>
<li>标签名称不匹配</li>
<li>解析错误</li>
</ul>
<strong>解决方案</strong>：
<li>检查消息格式是否符合预期</li>
<li>验证标签名称是否在 tagNames 列表中</li>
<li>查看错误日志</li></p><hr><h4>❓ 频繁断开连接</h4><p><strong>可能原因</strong>：
<ul><li>网络不稳定</li>
<li>服务器超时</li>
<li>心跳机制缺失</li>
</ul>
<strong>解决方案</strong>：
<li>添加心跳机制</li>
<li>增加重连延迟</li>
<li>检查网络稳定性</li></p><hr><h2>📚 最佳实践</h2><h3>1️⃣ 错误处理</h3><p>始终添加完整的错误处理：<pre><code class="javascript">try {
    // WebSocket 操作
} catch (error) {
    console.error('WebSocket 操作失败:', error);
    // 执行恢复操作
}
</code></pre><h3>2️⃣ 连接管理</h3><p>使用全局变量管理连接状态：<pre><code class="javascript">let ws = null;
let isConnected = false;</p><p>function updateConnectionStatus(status) {
    isConnected = status;
    $setTag($getTagId('wsConnected'), status);
}
</code></pre><h3>3️⃣ 数据验证</h3><p>验证接收到的数据：<pre><code class="javascript">function validateData(data) {
    if (!data || !data.data || !data.data.payload) {
        console.error('无效的数据格式');
        return false;
    }
    return true;
}
</code></pre><h3>4️⃣ 性能优化</h3><p>避免过于频繁的数据发送：<pre><code class="javascript">// 使用节流函数
let lastSendTime = 0;
const minSendInterval = 100; // 最小发送间隔 100ms</p><p>function throttledSend() {
    const now = Date.now();
    if (now - lastSendTime >= minSendInterval) {
        sendData();
        lastSendTime = now;
    }
}
</code></pre><hr><h2>🎉 总结</h2><p>通过本教程，您已经学会了：</p><p>✅ WebSocket 的基本概念  
✅ 创建 WebSocket 客户端连接  
✅ 实现双向数据传输  
✅ 与 Node-RED 集成  
✅ 高级用法和技巧  
✅ 故障排除  
✅ 最佳实践  </p><p>现在您可以在 FUXA 中使用 WebSocket 实现实时通信了！</p><hr><h2>📚 快速参考</h2><h3>WebSocket 连接状态</h3><table>
<tr><th>状态</th><th>值</th><th>说明</th></tr>
<tr><td><strong>CONNECTING</strong></td><td>0</td><td>正在连接</td></tr>
<tr><td><strong>OPEN</strong></td><td>1</td><td>连接已打开</td></tr>
<tr><td><strong>CLOSING</strong></td><td>2</td><td>正在关闭</td></tr>
<tr><td><strong>CLOSED</strong></td><td>3</td><td>连接已关闭</td></tr>
</table><h3>常用 WebSocket 方法</h3><table>
<tr><th>方法</th><th>说明</th></tr>
<tr><td><strong>ws.send(data)</strong></td><td>发送数据</td></tr>
<tr><td><strong>ws.close()</strong></td><td>关闭连接</td></tr>
<tr><td><strong>ws.on('open', callback)</strong></td><td>连接打开事件</td></tr>
<tr><td><strong>ws.on('message', callback)</strong></td><td>接收消息事件</td></tr>
<tr><td><strong>ws.on('error', callback)</strong></td><td>错误事件</td></tr>
<tr><td><strong>ws.on('close', callback)</strong></td><td>连接关闭事件</td></tr>
</table><hr><blockquote>💡 <strong>提示</strong>：建议在生产环境中添加完善的日志记录和监控机制，以便及时发现和解决问题。</blockquote><hr><p><strong>关注我们，获取更多工业自动化技术干货！</strong> 🎯</p><p><div style="display: flex; justify-content: center; align-items: center; gap: 40px; margin: 30px 0;">
    <div style="text-align: center;">
        <img src="images/微信公众号.jpg" alt="微信公众号" style="width: 200px; height: 200px; object-fit: contain;">
        <p style="margin: 10px 0 0 0; font-size: 14px; color: #666;">微信公众号</p>
    </div>
    <div style="text-align: center;">
        <img src="images/单人二维码.png" alt="技术支持" style="width: 200px; height: 200px; object-fit: contain;">
        <p style="margin: 10px 0 0 0; font-size: 14px; color: #666;">技术支持</p>
    </div>
</div></p>
        </div>
        <div class="content-section" id="section-13-图表控制教程">
            <h1>📊 FUXA 图表控制教程</h1><hr><h2>📋 概述</h2><p>图表控制是 FUXA 中用于可视化历史数据和趋势的重要组件。通过图表，您可以直观地查看和分析设备数据的变化趋势。</p><hr><h2>🎯 添加图表控件</h2><h3>步骤 1：进入编辑器</h3><p>打开 FUXA 编辑器。</p><h3>步骤 2：选择视图</h3><p>在编辑器中选择要添加图表的视图。</p><h3>步骤 3：添加图表控件</h3><p>从工具箱中拖拽 <strong>Chart</strong> 控件到视图上。</p><p><img src="images/fuxa-chart.gif" alt="添加图表控件"></p><hr><h2>🔧 配置图表</h2><h3>配置折线图</h3><p>在折线图中，您可以定义要附加到图表控件的图表。</p><p><img src="images/setup-charts.png" alt="配置图表"></p><h3>图表属性</h3><table>
<tr><th>属性</th><th>说明</th></tr>
<tr><td><strong>图表名称</strong></td><td>图表的唯一标识</td></tr>
<tr><td><strong>标签</strong></td><td>要显示的标签/变量</td></tr>
<tr><td><strong>颜色</strong></td><td>折线的颜色</td></tr>
<tr><td><strong>线宽</strong></td><td>折线的宽度</td></tr>
<tr><td><strong>数据点</strong></td><td>是否显示数据点</td></tr>
<tr><td><strong>填充</strong></td><td>是否填充折线下方区域</td></tr>
</table><hr><h2>💡 使用示例</h2><h3>示例 1：温度趋势图</h3><pre><code class="javascript">// 配置温度标签
{
  tagId: 'temperature',
  label: '温度 (°C)',
  color: '#ff6b6b',
  lineWidth: 2,
  showPoints: true,
  fill: false
}
</code></pre><h3>示例 2：多变量对比</h3><pre><code class="javascript">// 配置多个标签
[
  {
    tagId: 'temperature',
    label: '温度',
    color: '#ff6b6b'
  },
  {
    tagId: 'pressure',
    label: '压力',
    color: '#4ecdc4'
  },
  {
    tagId: 'flow',
    label: '流量',
    color: '#45b7d1'
  }
]
</code></pre><hr><h2>🎨 图表类型</h2><h3>折线图</h3><p><ul><li><strong>用途</strong>：显示数据随时间的变化趋势</li>
<li><strong>特点</strong>：适合连续数据</li>
<li><strong>应用</strong>：温度、压力、流量等</li>
</ul>
<h3>柱状图</h3></p><p><ul><li><strong>用途</strong>：比较不同类别的数据</li>
<li><strong>特点</strong>：适合离散数据</li>
<li><strong>应用</strong>：产量统计、能耗分析等</li>
</ul>
<h3>饼图</h3></p><p><ul><li><strong>用途</strong>：显示各部分占总体的比例</li>
<li><strong>特点</strong>：适合百分比数据</li>
<li><strong>应用</strong>：设备状态分布、能耗占比等</li>
</ul>
<hr></p><h2>📚 最佳实践</h2><h3>1️⃣ 合理设置时间范围</h3><p><ul><li><strong>实时监控</strong>：设置较短的时间范围（如 5-10 分钟）</li>
<li><strong>历史分析</strong>：设置较长的时间范围（如 1 小时、1 天）</li>
<li><strong>趋势预测</strong>：使用足够的历史数据</li>
</ul>
<h3>2️⃣ 优化数据刷新率</h3></p><p><ul><li><strong>高频数据</strong>：使用较快的刷新率（如 1 秒）</li>
<li><strong>低频数据</strong>：使用较慢的刷新率（如 10 秒）</li>
<li><strong>避免过度刷新</strong>：防止系统负载过高</li>
</ul>
<h3>3️⃣ 使用合适的颜色</h3></p><p><ul><li><strong>对比度</strong>：确保颜色之间有足够的对比度</li>
<li><strong>一致性</strong>：相同类型的数据使用相同的颜色</li>
<li><strong>可读性</strong>：避免使用过于相似的颜色</li>
</ul>
<h3>4️⃣ 添加图例和标签</h3></p><p><ul><li><strong>图例</strong>：清晰标识每条折线代表的变量</li>
<li><strong>标签</strong>：添加轴标签和单位</li>
<li><strong>标题</strong>：为图表添加描述性标题</li>
</ul>
<hr></p><h2>🔧 故障排除</h2><h3>常见问题</h3><h4>❓ 图表不显示数据</h4><p><strong>可能原因</strong>：
<ul><li>标签未正确绑定</li>
<li>数据源未连接</li>
<li>时间范围设置不当</li>
</ul>
<strong>解决方案</strong>：
<li>检查标签绑定是否正确</li>
<li>确认设备连接状态</li>
<li>调整时间范围设置</li></p><hr><h4>❓ 图表刷新缓慢</h4><p><strong>可能原因</strong>：
<ul><li>数据量过大</li>
<li>刷新率过高</li>
<li>系统资源不足</li>
</ul>
<strong>解决方案</strong>：
<li>减少显示的数据点数量</li>
<li>降低刷新频率</li>
<li>优化系统性能</li></p><hr><h4>❓ 图表显示异常</h4><p><strong>可能原因</strong>：
<ul><li>数据类型不匹配</li>
<li>数值超出范围</li>
<li>配置错误</li>
</ul>
<strong>解决方案</strong>：
<li>检查数据类型是否正确</li>
<li>确认数值在合理范围内</li>
<li>检查图表配置</li></p><hr><h2>🎉 总结</h2><p>通过本教程，您已经学会了：</p><p>✅ 添加图表控件  
✅ 配置图表属性  
✅ 使用不同图表类型  
✅ 应用最佳实践  
✅ 故障排除  </p><p>现在您可以在 FUXA 中创建专业的数据可视化图表了！</p><hr><h2>📚 快速参考</h2><h3>图表属性对照表</h3><table>
<tr><th>属性</th><th>类型</th><th>说明</th><th>推荐值</th></tr>
<tr><td><strong>tagId</strong></td><td>String</td><td>标签 ID</td><td>'temperature'</td></tr>
<tr><td><strong>label</strong></td><td>String</td><td>显示标签</td><td>'温度 (°C)'</td></tr>
<tr><td><strong>color</strong></td><td>String</td><td>折线颜色</td><td>'#ff6b6b'</td></tr>
<tr><td><strong>lineWidth</strong></td><td>Number</td><td>线宽</td><td>2</td></tr>
<tr><td><strong>showPoints</strong></td><td>Boolean</td><td>显示数据点</td><td>true</td></tr>
<tr><td><strong>fill</strong></td><td>Boolean</td><td>填充区域</td><td>false</td></tr>
</table><hr><blockquote>💡 <strong>提示</strong>：建议在开发环境中先测试图表配置，确认无误后再部署到生产环境。</blockquote><hr><p><strong>关注我们，获取更多工业自动化技术干货！</strong> 🎯</p><p><div style="display: flex; justify-content: center; align-items: center; gap: 40px; margin: 30px 0;">
    <div style="text-align: center;">
        <img src="images/微信公众号.jpg" alt="微信公众号" style="width: 200px; height: 200px; object-fit: contain;">
        <p style="margin: 10px 0 0 0; font-size: 14px; color: #666;">微信公众号</p>
    </div>
    <div style="text-align: center;">
        <img src="images/单人二维码.png" alt="技术支持" style="width: 200px; height: 200px; object-fit: contain;">
        <p style="margin: 10px 0 0 0; font-size: 14px; color: #666;">技术支持</p>
    </div>
</div></p>
        </div>
        <div class="content-section" id="section-14-UI布局设置教程">
            <h1>🎨 FUXA UI 布局设置教程</h1><hr><h2>📋 概述</h2><p>UI 布局设置允许您自定义 FUXA 的最终用户界面，包括起始视图、缩放功能、导航菜单、标题栏等，以提供最佳的用户体验。</p><hr><h2>🎯 访问布局设置</h2><h3>步骤 1：打开编辑器</h3><p>进入 FUXA 编辑器界面。</p><h3>步骤 2：进入布局设置</h3><p>点击编辑器中的 <strong>"Layout settings"</strong>（布局设置）。</p><p><img src="images/setup-layout.png" alt="布局设置"></p><hr><h2>🔧 常规设置</h2><p>在 <strong>General</strong>（常规）选项卡中，您可以配置以下选项：</p><h3>起始视图（Start View）</h3><p><ul><li><strong>说明</strong>：定义访问 http://localhost:1881 时显示的第一个视图（主页）</li>
<li><strong>用途</strong>：设置默认启动页面</li>
<li><strong>示例</strong>：选择 "主控界面" 作为起始视图</li>
</ul>
<h3>缩放（Zoom）</h3></p><p><ul><li><strong>说明</strong>：如果启用，您可以使用鼠标滚轮缩放视图，并使用鼠标左键移动视图</li>
<li><strong>用途</strong>：方便查看大型或复杂的视图</li>
<li><strong>应用场景</strong>：</li>
</ul>  - 大型工厂布局图
  - 详细设备监控界面
  - 多层次流程图</p><h3>输入字段对话框模式（Dialog Mode of input field）</h3><p><ul><li><strong>说明</strong>：如果启用，输入值控件将显示对话框</li>
<li><strong>用途</strong>：提供更友好的输入界面</li>
<li><strong>效果</strong>：</li>
</ul>
<img src="images/fuxa-layout-input.gif" alt="输入字段对话框"></p><h3>显示导航（Show Navigation）</h3><p><ul><li><strong>说明</strong>：设置显示或隐藏标题栏和导航菜单</li>
<li><strong>选项</strong>：</li>
</ul>  - 显示：显示完整的导航界面
  - 隐藏：隐藏导航栏，提供全屏体验
<ul><li><strong>应用场景</strong>：</li>
</ul>  - <strong>显示</strong>：需要导航功能的常规界面
  - <strong>隐藏</strong>：大屏展示、自助终端等</p><h3>隐藏开发按钮</h3><p><ul><li><strong>说明</strong>：隐藏在编辑和主页之间切换的开发按钮</li>
<li><strong>用途</strong>：防止最终用户误操作进入编辑模式</li>
<li><strong>推荐</strong>：生产环境建议启用此选项</li>
</ul>
<img src="images/fuxa-layout.png" alt="常规设置"></p><hr><h2>📱 导航侧菜单设置</h2><p>在 <strong>Navigation Side Menu</strong>（导航侧菜单）选项卡中，您可以定义菜单项和不同的样式属性。</p><h3>菜单项配置</h3><table>
<tr><th>属性</th><th>说明</th><th>示例</th></tr>
<tr><td><strong>视图名称</strong></td><td>要链接的视图</td><td>主控界面</td></tr>
<tr><td><strong>菜单标签</strong></td><td>显示在菜单中的文本</td><td>主页</td></tr>
<tr><td><strong>图标</strong></td><td>菜单项图标</td><td>home</td></tr>
<tr><td><strong>顺序</strong></td><td>菜单项显示顺序</td><td>1</td></tr>
</table><h3>样式属性</h3><table>
<tr><th>属性</th><th>说明</th><th>推荐值</th></tr>
<tr><td><strong>背景色</strong></td><td>菜单背景颜色</td><td>#2c3e50</td></tr>
<tr><td><strong>文字颜色</strong></td><td>菜单文字颜色</td><td>#ecf0f1</td></tr>
<tr><td><strong>选中颜色</strong></td><td>选中项颜色</td><td>#3498db</td></tr>
<tr><td><strong>悬停颜色</strong></td><td>鼠标悬停颜色</td><td>#34495e</td></tr>
</table><p><img src="images/fuxa-layout2.png" alt="导航侧菜单"></p><hr><h2>📊 标题导航栏设置</h2><p>在 <strong>Header Navigation Bar</strong>（标题导航栏）选项卡中，您可以定义是否以及如何显示报警通知项和不同的样式属性。</p><h3>报警通知配置</h3><table>
<tr><th>选项</th><th>说明</th></tr>
<tr><td><strong>显示报警</strong></td><td>是否在标题栏显示报警通知</td></tr>
<tr><td><strong>报警图标</strong></td><td>报警通知的图标</td></tr>
<tr><td><strong>报警计数</strong></td><td>是否显示报警数量</td></tr>
<tr><td><strong>报警颜色</strong></td><td>报警通知的颜色</td></tr>
</table><h3>样式属性</h3><table>
<tr><th>属性</th><th>说明</th><th>推荐值</th></tr>
<tr><td><strong>背景色</strong></td><td>标题栏背景颜色</td><td>#34495e</td></tr>
<tr><td><strong>文字颜色</strong></td><td>标题栏文字颜色</td><td>#ecf0f1</td></tr>
<tr><td><strong>高度</strong></td><td>标题栏高度</td><td>60px</td></tr>
<tr><td><strong>Logo</strong></td><td>标题栏 Logo</td><td>company-logo.png</td></tr>
</table><p><img src="images/fuxa-layout3.png" alt="标题导航栏"></p><hr><h2>💡 布局设计最佳实践</h2><h3>1️⃣ 用户体验优先</h3><p><ul><li><strong>一致性</strong>：保持整个界面风格一致</li>
<li><strong>简洁性</strong>：避免过多的菜单项和按钮</li>
<li><strong>直观性</strong>：使用清晰的图标和标签</li>
</ul>
<h3>2️⃣ 响应式设计</h3></p><p><ul><li><strong>桌面端</strong>：完整的导航和功能</li>
<li><strong>平板端</strong>：简化的导航菜单</li>
<li><strong>移动端</strong>：优化的触摸交互</li>
</ul>
<h3>3️⃣ 性能优化</h3></p><p><ul><li><strong>加载速度</strong>：优化图片和资源</li>
<li><strong>响应时间</strong>：确保界面响应迅速</li>
<li><strong>资源管理</strong>：合理使用系统资源</li>
</ul>
<h3>4️⃣ 安全考虑</h3></p><p><ul><li><strong>权限控制</strong>：根据用户角色显示不同功能</li>
<li><strong>操作确认</strong>：重要操作需要确认</li>
<li><strong>审计日志</strong>：记录关键操作</li>
</ul>
<hr></p><h2>🎨 布局示例</h2><h3>示例 1：工厂监控界面</h3><pre><code class="">常规设置：
- 起始视图：工厂总览
- 启用缩放：是
- 显示导航：是
- 隐藏开发按钮：是</p><p>导航菜单：
1. 工厂总览
2. 设备监控
3. 报警历史
4. 数据报表
5. 系统设置</p><p>标题栏：
- 显示报警：是
- 显示时间：是
- 显示用户信息：是
</code></pre><h3>示例 2：大屏展示界面</h3><pre><code class="">常规设置：
- 起始视图：实时监控
- 启用缩放：否
- 显示导航：否
- 隐藏开发按钮：是</p><p>导航菜单：
- 无（隐藏）</p><p>标题栏：
- 显示报警：是
- 显示时间：是
- 显示用户信息：否
</code></pre><h3>示例 3：移动端界面</h3><pre><code class="">常规设置：
- 起始视图：移动主页
- 启用缩放：是
- 显示导航：是
- 隐藏开发按钮：是</p><p>导航菜单：
1. 设备状态
2. 报警通知
3. 历史数据
4. 个人设置</p><p>标题栏：
- 显示报警：是
- 显示时间：是
- 显示用户信息：是
</code></pre><hr><h2>🔧 故障排除</h2><h3>常见问题</h3><h4>❓ 导航菜单不显示</h4><p><strong>可能原因</strong>：
<ul><li>显示导航设置为隐藏</li>
<li>菜单项未配置</li>
<li>权限不足</li>
</ul>
<strong>解决方案</strong>：
<li>检查"显示导航"设置</li>
<li>确认菜单项已配置</li>
<li>验证用户权限</li></p><hr><h4>❓ 缩放功能不工作</h4><p><strong>可能原因</strong>：
<ul><li>缩放功能未启用</li>
<li>浏览器兼容性问题</li>
<li>视图配置错误</li>
</ul>
<strong>解决方案</strong>：
<li>启用缩放功能</li>
<li>尝试使用不同的浏览器</li>
<li>检查视图配置</li></p><hr><h4>❓ 报警通知不显示</h4><p><strong>可能原因</strong>：
<ul><li>显示报警未启用</li>
<li>报警未配置</li>
<li>报警级别设置不当</li>
</ul>
<strong>解决方案</strong>：
<li>启用报警显示</li>
<li>配置报警规则</li>
<li>调整报警级别</li></p><hr><h2>🎉 总结</h2><p>通过本教程，您已经学会了：</p><p>✅ 访问布局设置  
✅ 配置常规设置  
✅ 自定义导航菜单  
✅ 设置标题导航栏  
✅ 应用最佳实践  
✅ 故障排除  </p><p>现在您可以创建专业的 FUXA 用户界面了！</p><hr><h2>📚 快速参考</h2><h3>布局设置对照表</h3><table>
<tr><th>设置项</th><th>选项</th><th>说明</th></tr>
<tr><td><strong>起始视图</strong></td><td>视图名称</td><td>默认显示的视图</td></tr>
<tr><td><strong>缩放</strong></td><td>启用/禁用</td><td>是否允许缩放视图</td></tr>
<tr><td><strong>输入对话框</strong></td><td>启用/禁用</td><td>是否使用对话框输入</td></tr>
<tr><td><strong>显示导航</strong></td><td>显示/隐藏</td><td>是否显示导航栏</td></tr>
<tr><td><strong>隐藏开发按钮</strong></td><td>是/否</td><td>是否隐藏开发按钮</td></tr>
</table><hr><blockquote>💡 <strong>提示</strong>：建议在开发环境中测试不同的布局配置，找到最适合您需求的方案后再部署到生产环境。</blockquote><hr><p><strong>关注我们，获取更多工业自动化技术干货！</strong> 🎯</p><p><div style="display: flex; justify-content: center; align-items: center; gap: 40px; margin: 30px 0;">
    <div style="text-align: center;">
        <img src="images/微信公众号.jpg" alt="微信公众号" style="width: 200px; height: 200px; object-fit: contain;">
        <p style="margin: 10px 0 0 0; font-size: 14px; color: #666;">微信公众号</p>
    </div>
    <div style="text-align: center;">
        <img src="images/单人二维码.png" alt="技术支持" style="width: 200px; height: 200px; object-fit: contain;">
        <p style="margin: 10px 0 0 0; font-size: 14px; color: #666;">技术支持</p>
    </div>
</div></p>
        </div>
        <div class="content-section" id="section-15-管道动画教程">
            <h1>🔧 FUXA 管道动画教程</h1><hr><h2>📋 概述</h2><p>管道动画是 FUXA 中用于可视化流体流动效果的重要功能。通过绑定设备标签（变量）与动画，您可以创建逼真的管道流动效果。</p><hr><h2>🎯 创建管道动画</h2><h3>步骤 1：设计管道形状</h3><p>首先，您需要设计管道的形状和布局。</p><h3>步骤 2：绑定设备标签</h3><p>将设备标签（变量）与动画绑定，定义动画的行为。</p><p><img src="images/fuxa-pipe.gif" alt="管道动画"></p><hr><h2>🔧 动画配置</h2><h3>基本属性</h3><table>
<tr><th>属性</th><th>说明</th><th>示例</th></tr>
<tr><td><strong>动画类型</strong></td><td>动画的类型</td><td>流动、旋转、闪烁</td></tr>
<tr><td><strong>标签</strong></td><td>控制动画的标签</td><td>pumpStatus</td></tr>
<tr><td><strong>触发条件</strong></td><td>触发动画的条件</td><td>值为 1 时启动</td></tr>
<tr><td><strong>速度</strong></td><td>动画速度</td><td>1.0</td></tr>
<tr><td><strong>方向</strong></td><td>动画方向</td><td>正向、反向</td></tr>
</table><h3>流动动画</h3><p><ul><li><strong>用途</strong>：模拟流体在管道中的流动</li>
<li><strong>应用场景</strong>：</li>
</ul>  - 水管流动
  - 气体输送
  - 油管输送</p><h3>旋转动画</h3><p><ul><li><strong>用途</strong>：模拟设备的旋转运动</li>
<li><strong>应用场景</strong>：</li>
</ul>  - 泵的旋转
  - 风扇转动
  - 电机运转</p><h3>闪烁动画</h3><p><ul><li><strong>用途</strong>：指示设备状态或报警</li>
<li><strong>应用场景</strong>：</li>
</ul>  - 设备运行指示
  - 报警提示
  - 状态变化</p><hr><h2>💡 使用示例</h2><h3>示例 1：水泵管道流动</h3><pre><code class="javascript">// 配置管道流动动画
{
  animationType: 'flow',
  tagId: 'pumpStatus',
  condition: 'value === 1',
  speed: 1.0,
  direction: 'forward',
  color: '#3498db'
}
</code></pre><h3>示例 2：阀门状态指示</h3><pre><code class="javascript">// 配置阀门闪烁动画
{
  animationType: 'blink',
  tagId: 'valveOpen',
  condition: 'value === 1',
  speed: 0.5,
  color: '#2ecc71'
}
</code></pre><h3>示例 3：电机旋转</h3><pre><code class="javascript">// 配置电机旋转动画
{
  animationType: 'rotate',
  tagId: 'motorRunning',
  condition: 'value === 1',
  speed: 2.0,
  direction: 'clockwise'
}
</code></pre><hr><h2>🎨 动画设计技巧</h2><h3>1️⃣ 颜色选择</h3><p><ul><li><strong>正常状态</strong>：使用绿色或蓝色</li>
<li><strong>警告状态</strong>：使用黄色或橙色</li>
<li><strong>报警状态</strong>：使用红色</li>
<li><strong>停止状态</strong>：使用灰色</li>
</ul>
<h3>2️⃣ 速度控制</h3></p><p><ul><li><strong>快速流动</strong>：速度设置为 2.0 或更高</li>
<li><strong>正常流动</strong>：速度设置为 1.0</li>
<li><strong>慢速流动</strong>：速度设置为 0.5 或更低</li>
</ul>
<h3>3️⃣ 方向设置</h3></p><p><ul><li><strong>正向流动</strong>：从左到右或从上到下</li>
<li><strong>反向流动</strong>：从右到左或从下到上</li>
<li><strong>双向流动</strong>：根据标签值改变方向</li>
</ul>
<h3>4️⃣ 多状态动画</h3><pre><code class="javascript">// 根据不同值显示不同动画
if (value === 0) {
  // 停止状态
  showStaticColor('#95a5a6');
} else if (value === 1) {
  // 正常运行
  showFlowAnimation('#2ecc71', 1.0);
} else if (value === 2) {
  // 警告状态
  showBlinkAnimation('#f39c12', 0.5);
} else if (value === 3) {
  // 报警状态
  showBlinkAnimation('#e74c3c', 1.0);
}
</code></pre><hr><h2>📊 复杂动画场景</h2><h3>场景 1：供水系统</h3><pre><code class="">管道 1：水泵 → 水箱
- 绑定标签：pump1Status
- 动画：流动
- 颜色：蓝色
- 速度：1.0</p><p>管道 2：水箱 → 用户
- 绑定标签：valveOpen
- 动画：流动
- 颜色：蓝色
- 速度：0.8</p><p>水泵：
- 绑定标签：pump1Running
- 动画：旋转
- 速度：2.0
</code></pre><h3>场景 2：化工生产</h3><pre><code class="">管道 1：反应器 → 分离器
- 绑定标签：reactorValve
- 动画：流动
- 颜色：绿色
- 速度：1.2</p><p>管道 2：分离器 → 储罐
- 绑定标签：separatorValve
- 动画：流动
- 颜色：绿色
- 速度：1.0</p><p>反应器搅拌器：
- 绑定标签：mixerRunning
- 动画：旋转
- 速度：1.5
</code></pre><hr><h2>🔧 故障排除</h2><h3>常见问题</h3><h4>❓ 动画不显示</h4><p><strong>可能原因</strong>：
<ul><li>标签未正确绑定</li>
<li>触发条件不满足</li>
<li>动画配置错误</li>
</ul>
<strong>解决方案</strong>：
<li>检查标签绑定是否正确</li>
<li>验证触发条件是否满足</li>
<li>检查动画配置</li></p><hr><h4>❓ 动画速度异常</h4><p><strong>可能原因</strong>：
<ul><li>速度值设置不当</li>
<li>系统性能问题</li>
<li>标签更新频率过高</li>
</ul>
<strong>解决方案</strong>：
<li>调整速度值</li>
<li>优化系统性能</li>
<li>降低标签更新频率</li></p><hr><h4>❓ 动画颜色不正确</h4><p><strong>可能原因</strong>：
<ul><li>颜色值格式错误</li>
<li>多状态动画逻辑错误</li>
<li>CSS 样式冲突</li>
</ul>
<strong>解决方案</strong>：
<li>检查颜色值格式</li>
<li>验证多状态逻辑</li>
<li>检查 CSS 样式</li></p><hr><h2>📚 最佳实践</h2><h3>1️⃣ 性能优化</h3><p><ul><li><strong>减少动画数量</strong>：避免在单个视图中使用过多动画</li>
<li><strong>优化动画速度</strong>：使用合理的速度值</li>
<li><strong>使用硬件加速</strong>：启用浏览器硬件加速</li>
</ul>
<h3>2️⃣ 用户体验</h3></p><p><ul><li><strong>直观性</strong>：动画应该直观地反映实际状态</li>
<li><strong>一致性</strong>：相同类型的设备使用相同的动画</li>
<li><strong>可读性</strong>：确保动画不会影响数据的可读性</li>
</ul>
<h3>3️⃣ 维护性</h3></p><p><ul><li><strong>文档化</strong>：记录动画配置和用途</li>
<li><strong>模块化</strong>：将复杂动画分解为简单组件</li>
<li><strong>可测试性</strong>：确保动画可以独立测试</li>
</ul>
<hr></p><h2>🎉 总结</h2><p>通过本教程，您已经学会了：</p><p>✅ 创建管道动画  
✅ 配置动画属性  
✅ 使用不同动画类型  
✅ 设计复杂动画场景  
✅ 故障排除  
✅ 应用最佳实践  </p><p>现在您可以在 FUXA 中创建逼真的管道流动效果了！</p><hr><h2>📚 快速参考</h2><h3>动画类型对照表</h3><table>
<tr><th>动画类型</th><th>用途</th><th>适用场景</th></tr>
<tr><td><strong>流动</strong></td><td>模拟流体流动</td><td>水管、气管、油管</td></tr>
<tr><td><strong>旋转</strong></td><td>模拟旋转运动</td><td>泵、风扇、电机</td></tr>
<tr><td><strong>闪烁</strong></td><td>指示状态或报警</td><td>运行指示、报警提示</td></tr>
</table><h3>颜色推荐表</h3><table>
<tr><th>状态</th><th>颜色</th><th>十六进制值</th></tr>
<tr><td><strong>正常</strong></td><td>绿色</td><td>#2ecc71</td></tr>
<tr><td><strong>警告</strong></td><td>黄色</td><td>#f39c12</td></tr>
<tr><td><strong>报警</strong></td><td>红色</td><td>#e74c3c</td></tr>
<tr><td><strong>停止</strong></td><td>灰色</td><td>#95a5a6</td></tr>
<tr><td><strong>流动</strong></td><td>蓝色</td><td>#3498db</td></tr>
</table><hr><blockquote>💡 <strong>提示</strong>：建议在实际应用中先测试动画效果，确保动画能够准确反映设备状态后再部署到生产环境。</blockquote><hr><p><strong>关注我们，获取更多工业自动化技术干货！</strong> 🎯</p><p><div style="display: flex; justify-content: center; align-items: center; gap: 40px; margin: 30px 0;">
    <div style="text-align: center;">
        <img src="images/微信公众号.jpg" alt="微信公众号" style="width: 200px; height: 200px; object-fit: contain;">
        <p style="margin: 10px 0 0 0; font-size: 14px; color: #666;">微信公众号</p>
    </div>
    <div style="text-align: center;">
        <img src="images/单人二维码.png" alt="技术支持" style="width: 200px; height: 200px; object-fit: contain;">
        <p style="margin: 10px 0 0 0; font-size: 14px; color: #666;">技术支持</p>
    </div>
</div></p>
        </div>
        <div class="content-section" id="section-16-控件绑定教程">
            <h1>🎮 FUXA 控件绑定教程</h1><hr><h2>📋 概述</h2><p>控件绑定是将 FUXA 中的 UI 控件与设备标签（变量）关联的过程，实现数据的双向绑定和实时更新。</p><hr><h2>🎯 绑定输出控件</h2><h3>步骤 1：进入编辑器</h3><p>打开 FUXA 编辑器。</p><h3>步骤 2：选择视图</h3><p>在编辑器中选择要添加控件的视图。</p><h3>步骤 3：绑定输出控件</h3><p>将输出控件绑定到设备标签（变量）。</p><p><img src="images/fuxa-output-control.gif" alt="输出控件绑定"></p><hr><h2>🔧 绑定输入控件</h2><h3>输入控件绑定</h3><p>将输入控件绑定到设备标签。</p><p><img src="images/fuxa-input-control.gif" alt="输入控件绑定"></p><hr><h2>🎚️ 绑定选择控件</h2><h3>选择控件绑定</h3><p>将选择控件绑定到设备标签。</p><p><img src="images/fuxa-select-control.gif" alt="选择控件绑定"></p><hr><h2>🎚️ 绑定滑块控件</h2><h3>滑块控件绑定</h3><p>将滑块控件绑定到设备标签。</p><p><img src="images/fuxa-slider-control.gif" alt="滑块控件绑定"></p><hr><h2>💡 控件类型说明</h2><h3>输出控件（Output Control）</h3><p><ul><li><strong>用途</strong>：显示标签的当前值</li>
<li><strong>特点</strong>：只读，不能修改</li>
<li><strong>应用场景</strong>：</li>
</ul>  - 显示温度、压力等传感器值
  - 显示设备状态
  - 显示计算结果</p><h3>输入控件（Input Control）</h3><p><ul><li><strong>用途</strong>：允许用户输入值并写入标签</li>
<li><strong>特点</strong>：可编辑，支持数值和字符串</li>
<li><strong>应用场景</strong>：</li>
</ul>  - 设置目标温度
  - 输入设备参数
  - 修改控制值</p><h3>选择控件（Select Control）</h3><p><ul><li><strong>用途</strong>：从预定义选项中选择值</li>
<li><strong>特点</strong>：下拉菜单，限制输入范围</li>
<li><strong>应用场景</strong>：</li>
</ul>  - 选择设备模式
  - 选择操作模式
  - 选择预设参数</p><h3>滑块控件（Slider Control）</h3><p><ul><li><strong>用途</strong>：通过滑块调整数值</li>
<li><strong>特点</strong>：直观的数值调整</li>
<li><strong>应用场景</strong>：</li>
</ul>  - 调整速度
  - 调整亮度
  - 调整开度</p><hr><h2>📊 控件属性配置</h2><h3>通用属性</h3><table>
<tr><th>属性</th><th>说明</th><th>示例</th></tr>
<tr><td><strong>标签</strong></td><td>控件显示的标签</td><td>温度</td></tr>
<tr><td><strong>标签 ID</strong></td><td>绑定的标签 ID</td><td>temperature</td></tr>
<tr><td><strong>单位</strong></td><td>显示的单位</td><td>°C</td></tr>
<tr><td><strong>精度</strong></td><td>小数位数</td><td>2</td></tr>
<tr><td><strong>最小值</strong></td><td>最小值</td><td>0</td></tr>
<tr><td><strong>最大值</strong></td><td>最大值</td><td>100</td></tr>
</table><h3>输入控件属性</h3><table>
<tr><th>属性</th><th>说明</th><th>推荐值</th></tr>
<tr><td><strong>输入类型</strong></td><td>数值或字符串</td><td>number</td></tr>
<tr><td><strong>步长</strong></td><td>增量步长</td><td>1</td></tr>
<tr><td><strong>默认值</strong></td><td>默认值</td><td>0</td></tr>
<tr><td><strong>必填</strong></td><td>是否必填</td><td>false</td></tr>
</table><h3>选择控件属性</h3><table>
<tr><th>属性</th><th>说明</th><th>示例</th></tr>
<tr><td><strong>选项</strong></td><td>可选值列表</td><td>["自动", "手动", "停止"]</td></tr>
<tr><td><strong>默认选项</strong></td><td>默认选中的选项</td><td>"自动"</td></tr>
<tr><td><strong>显示模式</strong></td><td>显示模式</td><td>下拉菜单</td></tr>
</table><h3>滑块控件属性</h3><table>
<tr><th>属性</th><th>说明</th><th>推荐值</th></tr>
<tr><td><strong>最小值</strong></td><td>最小值</td><td>0</td></tr>
<tr><td><strong>最大值</strong></td><td>最大值</td><td>100</td></tr>
<tr><td><strong>步长</strong></td><td>步长</td><td>1</td></tr>
<tr><td><strong>方向</strong></td><td>水平或垂直</td><td>水平</td></tr>
<tr><td><strong>显示值</strong></td><td>是否显示当前值</td><td>true</td></tr>
</table><hr><h2>💡 使用示例</h2><h3>示例 1：温度显示与控制</h3><pre><code class="javascript">// 输出控件：显示当前温度
{
  label: '当前温度',
  tagId: 'currentTemperature',
  unit: '°C',
  precision: 1
}</p><p>// 输入控件：设置目标温度
{
  label: '目标温度',
  tagId: 'targetTemperature',
  unit: '°C',
  min: 0,
  max: 100,
  step: 1
}
</code></pre><h3>示例 2：设备模式选择</h3><pre><code class="javascript">// 选择控件：选择设备模式
{
  label: '设备模式',
  tagId: 'deviceMode',
  options: [
    { label: '自动', value: 0 },
    { label: '手动', value: 1 },
    { label: '停止', value: 2 }
  ],
  default: 0
}
</code></pre><h3>示例 3：速度控制</h3><pre><code class="javascript">// 滑块控件：调整速度
{
  label: '速度',
  tagId: 'motorSpeed',
  min: 0,
  max: 100,
  step: 1,
  showValue: true,
  unit: '%'
}
</code></pre><hr><h2>🎨 控件样式定制</h2><h3>颜色主题</h3><pre><code class="javascript">// 控件颜色配置
{
  backgroundColor: '#ffffff',
  textColor: '#333333',
  borderColor: '#cccccc',
  activeColor: '#3498db',
  hoverColor: '#2980b9'
}
</code></pre><h3>尺寸设置</h3><pre><code class="javascript">// 控件尺寸配置
{
  width: '200px',
  height: '40px',
  fontSize: '14px',
  padding: '10px'
}
</code></pre><hr><h2>🔧 故障排除</h2><h3>常见问题</h3><h4>❓ 控件不显示数据</h4><p><strong>可能原因</strong>：
<ul><li>标签 ID 错误</li>
<li>设备未连接</li>
<li>数据类型不匹配</li>
</ul>
<strong>解决方案</strong>：
<li>检查标签 ID 是否正确</li>
<li>确认设备连接状态</li>
<li>验证数据类型是否匹配</li></p><hr><h4>❓ 输入值无法写入</h4><p><strong>可能原因</strong>：
<ul><li>权限不足</li>
<li>标签为只读</li>
<li>值超出范围</li>
</ul>
<strong>解决方案</strong>：
<li>检查用户权限</li>
<li>确认标签是否可写</li>
<li>验证值是否在有效范围内</li></p><hr><h4>❓ 控件样式异常</h4><p><strong>可能原因</strong>：
<ul><li>CSS 样式冲突</li>
<li>浏览器兼容性问题</li>
<li>配置错误</li>
</ul>
<strong>解决方案</strong>：
<li>检查 CSS 样式</li>
<li>尝试使用不同的浏览器</li>
<li>检查控件配置</li></p><hr><h2>📚 最佳实践</h2><h3>1️⃣ 数据验证</h3><pre><code class="javascript">// 输入验证
function validateInput(value, min, max) {
  if (value < min || value > max) {
    alert('值超出范围！');
    return false;
  }
  return true;
}
</code></pre><h3>2️⃣ 单位一致性</h3><p><ul><li>确保所有相关控件使用相同的单位</li>
<li>在标签中明确显示单位</li>
<li>提供单位转换功能（如果需要）</li>
</ul>
<h3>3️⃣ 用户友好性</h3></p><p><ul><li>提供清晰的标签和说明</li>
<li>使用合理的默认值</li>
<li>提供输入验证和错误提示</li>
</ul>
<h3>4️⃣ 性能优化</h3></p><p><ul><li>避免过于频繁的数据更新</li>
<li>使用节流函数限制更新频率</li>
<li>优化控件渲染性能</li>
</ul>
<hr></p><h2>🎉 总结</h2><p>通过本教程，您已经学会了：</p><p>✅ 绑定输出控件  
✅ 绑定输入控件  
✅ 绑定选择控件  
✅ 绑定滑块控件  
✅ 配置控件属性  
✅ 定制控件样式  
✅ 故障排除  
✅ 应用最佳实践  </p><p>现在您可以在 FUXA 中创建功能丰富的用户界面了！</p><hr><h2>📚 快速参考</h2><h3>控件类型对照表</h3><table>
<tr><th>控件类型</th><th>用途</th><th>特点</th></tr>
<tr><td><strong>输出控件</strong></td><td>显示数据</td><td>只读</td></tr>
<tr><td><strong>输入控件</strong></td><td>输入数据</td><td>可编辑</td></tr>
<tr><td><strong>选择控件</strong></td><td>选择选项</td><td>下拉菜单</td></tr>
<tr><td><strong>滑块控件</strong></td><td>调整数值</td><td>直观操作</td></tr>
</table><hr><blockquote>💡 <strong>提示</strong>：建议在实际应用中为每个控件添加清晰的标签和说明，提高用户体验。</blockquote><hr><p><strong>关注我们，获取更多工业自动化技术干货！</strong> 🎯</p><p><div style="display: flex; justify-content: center; align-items: center; gap: 40px; margin: 30px 0;">
    <div style="text-align: center;">
        <img src="images/微信公众号.jpg" alt="微信公众号" style="width: 200px; height: 200px; object-fit: contain;">
        <p style="margin: 10px 0 0 0; font-size: 14px; color: #666;">微信公众号</p>
    </div>
    <div style="text-align: center;">
        <img src="images/单人二维码.png" alt="技术支持" style="width: 200px; height: 200px; object-fit: contain;">
        <p style="margin: 10px 0 0 0; font-size: 14px; color: #666;">技术支持</p>
    </div>
</div></p>
        </div>
        <div class="content-section" id="section-17-形状绑定教程">
            <h1>🔷 FUXA 形状绑定教程</h1><hr><h2>📋 概述</h2><p>形状绑定是将 FUXA 中的图形元素（形状）与设备标签（变量）关联的过程，实现图形的动态显示和动画效果。</p><hr><h2>🎯 绑定形状</h2><h3>步骤 1：进入编辑器</h3><p>打开 FUXA 编辑器。</p><h3>步骤 2：选择视图</h3><p>在编辑器中选择要添加形状的视图。</p><h3>步骤 3：绑定形状</h3><p>将形状绑定到设备标签（变量）。</p><p><img src="images/fuxa-shapes.gif" alt="形状绑定"></p><hr><h2>🏭 绑定工程形状</h2><h3>工程形状（Tank）绑定</h3><p>将工程形状（如储罐）绑定到设备标签。</p><p><img src="images/fuxa-proceng.gif" alt="工程形状绑定"></p><hr><h2>🔧 形状类型</h2><h3>基本形状</h3><table>
<tr><th>形状</th><th>说明</th><th>应用场景</th></tr>
<tr><td><strong>矩形</strong></td><td>矩形形状</td><td>设备底座、容器</td></tr>
<tr><td><strong>圆形</strong></td><td>圆形形状</td><td>仪表、指示灯</td></tr>
<tr><td><strong>椭圆</strong></td><td>椭圆形状</td><td>储罐、容器</td></tr>
<tr><td><strong>三角形</strong></td><td>三角形形状</td><td>警告标志、指示器</td></tr>
<tr><td><strong>菱形</strong></td><td>菱形形状</td><td>阀门、开关</td></tr>
</table><h3>工程形状</h3><table>
<tr><th>形状</th><th>说明</th><th>应用场景</th></tr>
<tr><td><strong>储罐</strong></td><td>储罐形状</td><td>液体储罐、气体储罐</td></tr>
<tr><td><strong>管道</strong></td><td>管道形状</td><td>输送管道</td></tr>
<tr><td><strong>泵</strong></td><td>泵形状</td><td>水泵、油泵</td></tr>
<tr><td><strong>阀门</strong></td><td>阀门形状</td><td>控制阀门</td></tr>
<tr><td><strong>电机</strong></td><td>电机形状</td><td>驱动电机</td></tr>
</table><hr><h2>💡 绑定属性</h2><h3>基本属性</h3><table>
<tr><th>属性</th><th>说明</th><th>示例</th></tr>
<tr><td><strong>标签 ID</strong></td><td>绑定的标签 ID</td><td>tankLevel</td></tr>
<tr><td><strong>填充颜色</strong></td><td>填充颜色</td><td>#3498db</td></tr>
<tr><td><strong>边框颜色</strong></td><td>边框颜色</td><td>#2c3e50</td></tr>
<tr><td><strong>边框宽度</strong></td><td>边框宽度</td><td>2</td></tr>
<tr><td><strong>透明度</strong></td><td>透明度</td><td>0.8</td></tr>
</table><h3>动画属性</h3><table>
<tr><th>属性</th><th>说明</th><th>示例</th></tr>
<tr><td><strong>动画类型</strong></td><td>动画类型</td><td>旋转、闪烁、缩放</td></tr>
<tr><td><strong>触发条件</strong></td><td>触发条件</td><td>value > 50</td></tr>
<tr><td><strong>动画速度</strong></td><td>动画速度</td><td>1.0</td></tr>
<tr><td><strong>动画方向</strong></td><td>动画方向</td><td>顺时针、逆时针</td></tr>
</table><hr><h2>📊 使用示例</h2><h3>示例 1：储罐液位显示</h3><pre><code class="javascript">// 储罐形状配置
{
  shapeType: 'tank',
  tagId: 'tankLevel',
  fillType: 'gradient',
  fillColor: '#3498db',
  borderColor: '#2c3e50',
  borderWidth: 2,
  showLevel: true,
  levelUnit: '%',
  levelPrecision: 1
}
</code></pre><h3>示例 2：设备状态指示</h3><pre><code class="javascript">// 圆形指示灯配置
{
  shapeType: 'circle',
  tagId: 'deviceStatus',
  fillColor: {
    0: '#95a5a6',  // 停止
    1: '#2ecc71',  // 运行
    2: '#f39c12',  // 警告
    3: '#e74c3c'   // 报警
  },
  borderColor: '#2c3e50',
  borderWidth: 2,
  animation: 'blink',
  animationCondition: 'value === 3'
}
</code></pre><h3>示例 3：阀门状态</h3><pre><code class="javascript">// 菱形阀门配置
{
  shapeType: 'diamond',
  tagId: 'valveOpen',
  fillColor: {
    0: '#95a5a6',  // 关闭
    1: '#2ecc71'   // 打开
  },
  borderColor: '#2c3e50',
  borderWidth: 2,
  showLabel: true,
  labelText: '阀门'
}
</code></pre><hr><h2>🎨 高级绑定技巧</h2><h3>1️⃣ 渐变填充</h3><pre><code class="javascript">// 渐变填充配置
{
  shapeType: 'tank',
  tagId: 'tankLevel',
  fillType: 'gradient',
  gradientColors: ['#3498db', '#2980b9'],
  gradientDirection: 'vertical'
}
</code></pre><h3>2️⃣ 多状态颜色</h3><pre><code class="javascript">// 根据值显示不同颜色
function getFillColor(value) {
  if (value < 20) return '#e74c3c';  // 低液位
  if (value < 50) return '#f39c12';  // 中液位
  if (value < 80) return '#3498db';  // 正常液位
  return '#2ecc71';                   // 高液位
}
</code></pre><h3>3️⃣ 动态文本</h3><pre><code class="javascript">// 显示动态文本
{
  shapeType: 'text',
  tagId: 'temperature',
  text: '温度: {value}°C',
  textColor: '#333333',
  fontSize: 16,
  fontWeight: 'bold'
}
</code></pre><h3>4️⃣ 组合形状</h3><pre><code class="javascript">// 创建组合形状
{
  type: 'group',
  shapes: [
    {
      type: 'rectangle',
      x: 0,
      y: 0,
      width: 100,
      height: 100,
      fillColor: '#ecf0f1'
    },
    {
      type: 'circle',
      cx: 50,
      cy: 50,
      r: 30,
      fillColor: '#3498db',
      tagId: 'status'
    }
  ]
}
</code></pre><hr><h2>🔧 故障排除</h2><h3>常见问题</h3><h4>❓ 形状不显示</h4><p><strong>可能原因</strong>：
<ul><li>形状未正确添加到视图</li>
<li>标签未正确绑定</li>
<li>形状属性配置错误</li>
</ul>
<strong>解决方案</strong>：
<li>确认形状已添加到视图</li>
<li>检查标签绑定是否正确</li>
<li>验证形状属性配置</li></p><hr><h4>❓ 颜色不更新</h4><p><strong>可能原因</strong>：
<ul><li>标签未更新</li>
<li>颜色映射错误</li>
<li>动画条件不满足</li>
</ul>
<strong>解决方案</strong>：
<li>检查标签是否正常更新</li>
<li>验证颜色映射是否正确</li>
<li>确认动画条件是否满足</li></p><hr><h4>❓ 动画不工作</h4><p><strong>可能原因</strong>：
<ul><li>动画类型未设置</li>
<li>触发条件错误</li>
<li>系统性能问题</li>
</ul>
<strong>解决方案</strong>：
<li>检查动画类型设置</li>
<li>验证触发条件是否正确</li>
<li>优化系统性能</li></p><hr><h2>📚 最佳实践</h2><h3>1️⃣ 形状组织</h3><p><ul><li><strong>分组</strong>：将相关形状分组管理</li>
<li><strong>命名</strong>：使用有意义的形状名称</li>
<li><strong>层次</strong>：使用图层管理复杂界面</li>
</ul>
<h3>2️⃣ 性能优化</h3></p><p><ul><li><strong>减少形状数量</strong>：避免在单个视图中使用过多形状</li>
<li><strong>简化动画</strong>：使用简单的动画效果</li>
<li><strong>使用缓存</strong>：缓存复杂的形状</li>
</ul>
<h3>3️⃣ 可维护性</h3></p><p><ul><li><strong>文档化</strong>：记录形状配置和用途</li>
<li><strong>模块化</strong>：将复杂形状分解为简单组件</li>
<li><strong>可重用</strong>：创建可重用的形状模板</li>
</ul>
<h3>4️⃣ 用户体验</h3></p><p><ul><li><strong>一致性</strong>：保持形状风格一致</li>
<li><strong>直观性</strong>：形状应该直观地反映实际状态</li>
<li><strong>可读性</strong>：确保形状不会影响数据的可读性</li>
</ul>
<hr></p><h2>🎉 总结</h2><p>通过本教程，您已经学会了：</p><p>✅ 绑定基本形状  
✅ 绑定工程形状  
✅ 配置形状属性  
✅ 使用高级绑定技巧  
✅ 故障排除  
✅ 应用最佳实践  </p><p>现在您可以在 FUXA 中创建动态的图形界面了！</p><hr><h2>📚 快速参考</h2><h3>形状类型对照表</h3><table>
<tr><th>形状类型</th><th>说明</th><th>应用场景</th></tr>
<tr><td><strong>矩形</strong></td><td>矩形</td><td>设备底座、容器</td></tr>
<tr><td><strong>圆形</strong></td><td>圆形</td><td>仪表、指示灯</td></tr>
<tr><td><strong>椭圆</strong></td><td>椭圆</td><td>储罐、容器</td></tr>
<tr><td><strong>三角形</strong></td><td>三角形</td><td>警告标志</td></tr>
<tr><td><strong>菱形</strong></td><td>菱形</td><td>阀门、开关</td></tr>
<tr><td><strong>储罐</strong></td><td>储罐</td><td>液体储罐</td></tr>
<tr><td><strong>管道</strong></td><td>管道</td><td>输送管道</td></tr>
<tr><td><strong>泵</strong></td><td>泵</td><td>水泵、油泵</td></tr>
<tr><td><strong>阀门</strong></td><td>阀门</td><td>控制阀门</td></tr>
<tr><td><strong>电机</strong></td><td>电机</td><td>驱动电机</td></tr>
</table><hr><blockquote>💡 <strong>提示</strong>：建议在实际应用中先测试形状绑定效果，确保形状能够准确反映设备状态后再部署到生产环境。</blockquote><hr><p><strong>关注我们，获取更多工业自动化技术干货！</strong> 🎯</p><p><div style="display: flex; justify-content: center; align-items: center; gap: 40px; margin: 30px 0;">
    <div style="text-align: center;">
        <img src="images/微信公众号.jpg" alt="微信公众号" style="width: 200px; height: 200px; object-fit: contain;">
        <p style="margin: 10px 0 0 0; font-size: 14px; color: #666;">微信公众号</p>
    </div>
    <div style="text-align: center;">
        <img src="images/单人二维码.png" alt="技术支持" style="width: 200px; height: 200px; object-fit: contain;">
        <p style="margin: 10px 0 0 0; font-size: 14px; color: #666;">技术支持</p>
    </div>
</div></p>
        </div>
        <div class="content-section" id="section-18-脚本配置教程">
            <h1>📜 FUXA 脚本配置教程</h1><hr><h2>📋 概述</h2><p>脚本是 FUXA 中用于实现自定义逻辑和自动化的重要功能。通过编写 JavaScript 函数，您可以实现复杂的数据处理、设备控制和业务逻辑。</p><hr><h2>🎯 访问脚本配置</h2><h3>步骤 1：打开编辑器</h3><p>进入 FUXA 编辑器界面。</p><h3>步骤 2：进入脚本设置</h3><p>点击编辑器中的 <strong>"Scripts"</strong>（脚本）。</p><p><img src="images/setup-scripts.png" alt="脚本设置"></p><hr><h2>🔧 创建脚本</h2><h3>添加新脚本</h3><p><li>点击 <strong>"Add"</strong>（添加）按钮</li>
<li>配置函数名称和参数</li>
<li>编写脚本逻辑</li></p><h3>参数类型</h3><p>脚本支持两种参数类型：</p><table>
<tr><th>参数类型</th><th>说明</th><th>示例</th></tr>
<tr><td><strong>Tag ID</strong></td><td>标签 ID，用于获取或设置标签值</td><td>'temperature'</td></tr>
<tr><td><strong>Value</strong></td><td>数值或字符串，用于传递参数</td><td>25.5 或 'Hello'</td></tr>
</table><hr><h2>📝 编写脚本逻辑</h2><h3>系统调用函数</h3><p>FUXA 提供了以下系统调用函数：</p><table>
<tr><th>函数</th><th>说明</th><th>示例</th></tr>
<tr><td><strong>$setTag</strong></td><td>设置标签值</td><td>$setTag(tagId, value)</td></tr>
<tr><td><strong>$getTag</strong></td><td>获取标签当前值</td><td>$getTag(tagId)</td></tr>
</table><h3>基本示例</h3><pre><code class="javascript">// 设置标签值
function setTemperature(tagId, value) {
  $setTag(tagId, value);
}</p><p>// 获取标签值
function getTemperature(tagId) {
  return $getTag(tagId);
}
</code></pre><hr><h2>🧪 测试脚本</h2><h3>使用 console.log</h3><p>您可以使用 <code>console.log</code> 方法来测试脚本，验证逻辑是否正确。</p><p><img src="images/fuxa-script.gif" alt="测试脚本"></p><h3>示例</h3><pre><code class="javascript">function calculateAverage(tagId1, tagId2) {
  let value1 = $getTag(tagId1);
  let value2 = $getTag(tagId2);
  
  let average = (value1 + value2) / 2;
  
  console.log('Value 1:', value1);
  console.log('Value 2:', value2);
  console.log('Average:', average);
  
  return average;
}
</code></pre><hr><h2>🎯 从 GUI 调用脚本</h2><h3>在事件中配置脚本调用</h3><p>您可以从 GUI 的 <strong>"Events"</strong>（事件）中配置脚本的调用。</p><p><img src="images/fuxa-script2.gif" alt="事件调用脚本"></p><h3>示例</h3><p><li>选择一个控件或形状</li>
<li>在属性面板中找到 <strong>"Events"</strong>（事件）</li>
<li>添加一个事件（如点击事件）</li>
<li>选择要调用的脚本</li>
<li>配置参数</li></p><hr><h2>⚠️ 定时器处理</h2><h3>重要提示</h3><p>如果在脚本中使用定时器（如 <code>setInterval</code>），正确处理它们非常重要。</p><h3>问题说明</h3><p>如果在脚本中有 <code>setInterval</code> 并且多次运行测试，每次调用都会创建一个新的定时器，执行相同的代码片段。您需要重启 FUXA 才能清除这些定时器。</p><h3>解决方案</h3><p>一种处理方法是给定时器分配一个 ID，并进行简单的检查以判断它是否已存在。<pre><code class="javascript">// 检查定时器是否存在
if (typeof globalThis.myTimer === 'undefined') globalThis.myTimer = null;</p><p>// 如果定时器不存在，则创建它
if (!globalThis.myTimer) globalThis.myTimer = setInterval(myTimerFunction, 1000);</p><p>// 定时器函数
async function myTimerFunction() {
  // 每 1 秒执行的代码
  console.log('Timer function executed');
  
  // 示例：读取标签值
  let temperature = $getTag($getTagId('temperature'));
  console.log('Temperature:', temperature);
  
  // 示例：设置标签值
  $setTag($getTagId('status'), 1);
}
</code></pre><hr><h2>💡 高级脚本示例</h2><h3>示例 1：数据验证</h3><pre><code class="javascript">function validateAndSet(tagId, value, min, max) {
  if (value < min || value > max) {
    console.log('值超出范围:', value);
    return false;
  }
  
  $setTag(tagId, value);
  console.log('值已设置:', value);
  return true;
}
</code></pre><h3>示例 2：条件控制</h3><pre><code class="javascript">function controlPump(tagId, threshold) {
  let currentLevel = $getTag($getTagId('tankLevel'));
  
  if (currentLevel < threshold) {
    $setTag($getTagId('pumpStatus'), 1);
    console.log('泵已启动');
  } else {
    $setTag($getTagId('pumpStatus'), 0);
    console.log('泵已停止');
  }
}
</code></pre><h3>示例 3：数据转换</h3><pre><code class="javascript">function convertTemperature(tagId, fromUnit, toUnit) {
  let value = $getTag(tagId);
  
  if (fromUnit === 'C' && toUnit === 'F') {
    return (value * 9/5) + 32;
  } else if (fromUnit === 'F' && toUnit === 'C') {
    return (value - 32) * 5/9;
  }
  
  return value;
}
</code></pre><h3>示例 4：报警检查</h3><pre><code class="javascript">function checkAlarms(tagId, highHigh, high, low) {
  let value = $getTag(tagId);
  
  if (value >= highHigh) {
    $setTag($getTagId('alarmLevel'), 3);
    console.log('高高报警');
  } else if (value >= high) {
    $setTag($getTagId('alarmLevel'), 2);
    console.log('高报警');
  } else if (value <= low) {
    $setTag($getTagId('alarmLevel'), 1);
    console.log('低报警');
  } else {
    $setTag($getTagId('alarmLevel'), 0);
    console.log('正常');
  }
}
</code></pre><h3>示例 5：数据统计</h3><pre><code class="javascript">function calculateStatistics(tagId) {
  let values = [];
  
  // 收集最近 10 个值
  for (let i = 0; i < 10; i++) {
    values.push($getTag(tagId));
  }
  
  // 计算平均值
  let sum = values.reduce((a, b) => a + b, 0);
  let average = sum / values.length;
  
  // 计算最大值和最小值
  let max = Math.max(...values);
  let min = Math.min(...values);
  
  console.log('Average:', average);
  console.log('Max:', max);
  console.log('Min:', min);
  
  return { average, max, min };
}
</code></pre><hr><h2>🔧 故障排除</h2><h3>常见问题</h3><h4>❓ 脚本不执行</h4><p><strong>可能原因</strong>：
<ul><li>脚本未正确配置</li>
<li>事件未正确触发</li>
<li>参数错误</li>
</ul>
<strong>解决方案</strong>：
<li>检查脚本配置是否正确</li>
<li>验证事件触发条件</li>
<li>检查参数是否正确</li></p><hr><h4>❓ 定时器重复创建</h4><p><strong>可能原因</strong>：
<ul><li>未检查定时器是否存在</li>
<li>多次测试脚本</li>
</ul>
<strong>解决方案</strong>：
<li>使用 <code>globalThis</code> 存储定时器 ID</li>
<li>在创建定时器前检查是否存在</li>
<li>必要时重启 FUXA</li></p><hr><h4>❓ 标签值未更新</h4><p><strong>可能原因</strong>：
<ul><li>标签 ID 错误</li>
<li>权限不足</li>
<li>数据类型不匹配</li>
</ul>
<strong>解决方案</strong>：
<li>检查标签 ID 是否正确</li>
<li>验证用户权限</li>
<li>确认数据类型是否匹配</li></p><hr><h2>📚 最佳实践</h2><h3>1️⃣ 错误处理</h3><pre><code class="javascript">function safeOperation(tagId, value) {
  try {
    $setTag(tagId, value);
    console.log('操作成功');
  } catch (error) {
    console.error('操作失败:', error);
  }
}
</code></pre><h3>2️⃣ 日志记录</h3><pre><code class="javascript">function logOperation(operation, tagId, value) {
  console.log('[' + new Date().toISOString() + ']', operation, tagId, value);
}
</code></pre><h3>3️⃣ 模块化设计</h3><pre><code class="javascript">// 模块化函数
function validateValue(value, min, max) {
  return value >= min && value <= max;
}</p><p>function setValue(tagId, value) {
  $setTag(tagId, value);
}</p><p>// 组合使用
function safeSetValue(tagId, value, min, max) {
  if (validateValue(value, min, max)) {
    setValue(tagId, value);
  }
}
</code></pre><h3>4️⃣ 性能优化</h3><pre><code class="javascript">// 避免频繁调用
let lastExecutionTime = 0;
const minInterval = 1000; // 最小间隔 1 秒</p><p>function throttledFunction(tagId, value) {
  const now = Date.now();
  if (now - lastExecutionTime >= minInterval) {
    $setTag(tagId, value);
    lastExecutionTime = now;
  }
}
</code></pre><hr><h2>🎉 总结</h2><p>通过本教程，您已经学会了：</p><p>✅ 访问脚本配置  
✅ 创建和配置脚本  
✅ 编写脚本逻辑  
✅ 测试脚本  
✅ 从 GUI 调用脚本  
✅ 处理定时器  
✅ 高级脚本示例  
✅ 故障排除  
✅ 应用最佳实践  </p><p>现在您可以在 FUXA 中创建强大的自动化脚本了！</p><hr><h2>📚 快速参考</h2><h3>系统函数对照表</h3><table>
<tr><th>函数</th><th>说明</th><th>示例</th></tr>
<tr><td><strong>$setTag</strong></td><td>设置标签值</td><td>$setTag(tagId, value)</td></tr>
<tr><td><strong>$getTag</strong></td><td>获取标签值</td><td>$getTag(tagId)</td></tr>
<tr><td><strong>$getTagId</strong></td><td>获取标签 ID</td><td>$getTagId(tagName)</td></tr>
</table><h3>定时器函数对照表</h3><table>
<tr><th>函数</th><th>说明</th><th>示例</th></tr>
<tr><td><strong>setInterval</strong></td><td>设置重复执行的定时器</td><td>setInterval(function, 1000)</td></tr>
<tr><td><strong>setTimeout</strong></td><td>设置延迟执行的定时器</td><td>setTimeout(function, 1000)</td></tr>
<tr><td><strong>clearInterval</strong></td><td>清除重复执行的定时器</td><td>clearInterval(timerId)</td></tr>
<tr><td><strong>clearTimeout</strong></td><td>清除延迟执行的定时器</td><td>clearTimeout(timerId)</td></tr>
</table><hr><blockquote>💡 <strong>提示</strong>：建议在开发环境中充分测试脚本逻辑，确认无误后再部署到生产环境。</blockquote><hr><p><strong>关注我们，获取更多工业自动化技术干货！</strong> 🎯</p><p><div style="display: flex; justify-content: center; align-items: center; gap: 40px; margin: 30px 0;">
    <div style="text-align: center;">
        <img src="images/微信公众号.jpg" alt="微信公众号" style="width: 200px; height: 200px; object-fit: contain;">
        <p style="margin: 10px 0 0 0; font-size: 14px; color: #666;">微信公众号</p>
    </div>
    <div style="text-align: center;">
        <img src="images/单人二维码.png" alt="技术支持" style="width: 200px; height: 200px; object-fit: contain;">
        <p style="margin: 10px 0 0 0; font-size: 14px; color: #666;">技术支持</p>
    </div>
</div></p>
        </div>
        <div class="content-section" id="section-19-事件配置教程">
            <h1>🎯 FUXA 事件配置教程</h1><hr><h2>📋 概述</h2><p>事件是 FUXA 中用于响应用户交互和系统状态变化的重要功能。通过配置鼠标事件（点击、按下、释放），您可以执行各种任务，如打开页面、设置值、切换值等。</p><hr><h2>🎯 事件类型</h2><p>在形状和按钮控件中，您可以配置以下鼠标事件：</p><table>
<tr><th>事件</th><th>说明</th><th>触发时机</th></tr>
<tr><td><strong>click</strong></td><td>点击事件</td><td>鼠标点击时触发</td></tr>
<tr><td><strong>mouseDown</strong></td><td>按下事件</td><td>鼠标按下时触发</td></tr>
<tr><td><strong>mouseUp</strong></td><td>释放事件</td><td>鼠标释放时触发</td></tr>
</table><hr><h2>📋 事件动作列表</h2><p>FUXA 支持以下事件动作：</p><p><ul><li><a href="#打开页面" target="_blank">打开页面</a></li>
<li><a href="#打开卡片" target="_blank">打开卡片</a></li>
<li><a href="#打开对话框" target="_blank">打开对话框</a></li>
<li><a href="#打开-iframe" target="_blank">打开 iframe</a></li>
<li><a href="#打开窗口" target="_blank">打开窗口</a></li>
<li><a href="#设置值" target="_blank">设置值</a></li>
<li><a href="#切换值" target="_blank">切换值</a></li>
<li><a href="#从输入设置并关闭" target="_blank">从输入设置并关闭</a></li>
</ul>
<hr></p><h2>📄 打开页面</h2><h3>用途</h3><p>用于在主窗口中显示视图。</p><h3>配置步骤</h3><p><li>选择一个形状或按钮控件</li>
<li>在属性面板中找到 <strong>"Events"</strong>（事件）</li>
<li>添加一个事件（如点击事件）</li>
<li>选择动作类型为 <strong>"Open Page"</strong>（打开页面）</li>
<li>选择要打开的视图</li></p><h3>示例</h3><p><img src="images/fuxa-events1.gif" alt="打开页面"></p><h3>应用场景</h3><p><ul><li>导航到不同的监控界面</li>
<li>切换到设备详情页面</li>
<li>显示历史数据视图</li>
</ul>
<hr></p><h2>🃏 打开卡片</h2><h3>用途</h3><p>用于以弹出窗口的形式显示视图。卡片将在事件发生时显示在鼠标旁边，可以同时显示多个卡片。同一个卡片可以用于显示多个泵的值。</p><h3>配置步骤</h3><p><li>选择一个形状或按钮控件</li>
<li>在属性面板中找到 <strong>"Events"</strong>（事件）</li>
<li>添加一个事件（如点击事件）</li>
<li>选择动作类型为 <strong>"Open Card"</strong>（打开卡片）</li>
<li>选择要打开的视图</li></p><h3>示例</h3><p><img src="images/fuxa-events2.gif" alt="打开卡片"></p><h3>应用场景</h3><p><ul><li>显示设备详细信息</li>
<li>显示实时数据</li>
<li>显示报警信息</li>
</ul>
<hr></p><h2>💬 打开对话框</h2><h3>用途</h3><p>用于以对话框的形式显示视图，通常用于配置值。对话框将显示在屏幕顶部。同一个对话框可以用于配置多个泵的值。</p><h3>配置步骤</h3><p><li>选择一个形状或按钮控件</li>
<li>在属性面板中找到 <strong>"Events"</strong>（事件）</li>
<li>添加一个事件（如点击事件）</li>
<li>选择动作类型为 <strong>"Open Dialog"</strong>（打开对话框）</li>
<li>选择要打开的视图</li></p><h3>示例</h3><p><img src="images/fuxa-events3.gif" alt="打开对话框"></p><h3>应用场景</h3><p><ul><li>配置设备参数</li>
<li>设置目标值</li>
<li>输入用户数据</li>
</ul>
<hr></p><h2>🖼️ 打开 iframe</h2><h3>用途</h3><p>用于以 iframe 的形式打开窗口（嵌入来自外部源的 HTML 文档）。您可以定义窗口大小和缩放比例。</p><h3>配置步骤</h3><p><li>选择一个形状或按钮控件</li>
<li>在属性面板中找到 <strong>"Events"</strong>（事件）</li>
<li>添加一个事件（如点击事件）</li>
<li>选择动作类型为 <strong>"Open iframe"</strong>（打开 iframe）</li>
<li>输入 URL</li>
<li>设置窗口大小和缩放比例</li></p><h3>示例</h3><p><img src="images/fuxa-events4.gif" alt="打开 iframe"></p><h3>应用场景</h3><p><ul><li>嵌入外部网页</li>
<li>显示第三方仪表板</li>
<li>集成外部应用</li>
</ul>
<h3>配置属性</h3></p><table>
<tr><th>属性</th><th>说明</th><th>示例</th></tr>
<tr><td><strong>URL</strong></td><td>要嵌入的网页地址</td><td>https://example.com</td></tr>
<tr><td><strong>宽度</strong></td><td>窗口宽度</td><td>800px</td></tr>
<tr><td><strong>高度</strong></td><td>窗口高度</td><td>600px</td></tr>
<tr><td><strong>缩放比例</strong></td><td>缩放比例</td><td>1.0</td></tr>
</table><hr><h2>🪟 打开窗口</h2><h3>用途</h3><p>用于在新浏览器中打开窗口。您可以定义窗口大小。</p><h3>配置步骤</h3><p><li>选择一个形状或按钮控件</li>
<li>在属性面板中找到 <strong>"Events"</strong>（事件）</li>
<li>添加一个事件（如点击事件）</li>
<li>选择动作类型为 <strong>"Open Window"</strong>（打开窗口）</li>
<li>输入 URL</li>
<li>设置窗口大小</li></p><h3>示例</h3><p><img src="images/fuxa-events5.gif" alt="打开窗口"></p><h3>应用场景</h3><p><ul><li>打开外部网页</li>
<li>打开文档</li>
<li>打开帮助页面</li>
</ul>
<h3>配置属性</h3></p><table>
<tr><th>属性</th><th>说明</th><th>示例</th></tr>
<tr><td><strong>URL</strong></td><td>要打开的网页地址</td><td>https://example.com</td></tr>
<tr><td><strong>宽度</strong></td><td>窗口宽度</td><td>1024px</td></tr>
<tr><td><strong>高度</strong></td><td>窗口高度</td><td>768px</td></tr>
</table><hr><h2>🔢 设置值</h2><h3>用途</h3><p>用于设置标签值或增加/减少当前值。</p><h3>配置步骤</h3><p><li>选择一个形状或按钮控件</li>
<li>在属性面板中找到 <strong>"Events"</strong>（事件）</li>
<li>添加一个事件（如点击事件）</li>
<li>选择动作类型为 <strong>"Set Value"</strong>（设置值）</li>
<li>选择要设置的标签</li>
<li>设置值或选择增加/减少</li></p><h3>示例</h3><p><img src="images/fuxa-events6.gif" alt="设置值"></p><h3>应用场景</h3><p><ul><li>设置设备参数</li>
<li>调整控制值</li>
<li>增加或减少数值</li>
</ul>
<h3>配置选项</h3></p><table>
<tr><th>选项</th><th>说明</th><th>示例</th></tr>
<tr><td><strong>设置值</strong></td><td>直接设置标签值</td><td>设置为 50</td></tr>
<tr><td><strong>增加值</strong></td><td>增加标签值</td><td>增加 5</td></tr>
<tr><td><strong>减少值</strong></td><td>减少标签值</td><td>减少 5</td></tr>
</table><hr><h2>🔄 切换值</h2><h3>用途</h3><p>用于切换标签值 1/0（如果是 1 则设置为 0，如果是 0 则设置为 1）。</p><h3>配置步骤</h3><p><li>选择一个形状或按钮控件</li>
<li>在属性面板中找到 <strong>"Events"</strong>（事件）</li>
<li>添加一个事件（如点击事件）</li>
<li>选择动作类型为 <strong>"Toggle Value"</strong>（切换值）</li>
<li>选择要切换的标签</li></p><h3>示例</h3><p><img src="images/fuxa-events7.gif" alt="切换值"></p><h3>应用场景</h3><p><ul><li>开启/关闭设备</li>
<li>启动/停止泵</li>
<li>启用/禁用功能</li>
</ul>
<hr></p><h2>✅ 从输入设置并关闭</h2><h3>用途</h3><p>结合使用，可以通过对话框设置一些值，并使用 OK 确认关闭对话框。</p><h3>配置步骤</h3><p><li>创建一个对话框视图，包含输入控件</li>
<li>在对话框中添加确认按钮</li>
<li>为确认按钮配置 <strong>"Set from Input and Close"</strong>（从输入设置并关闭）事件</li>
<li>选择要设置的标签和输入控件</li></p><h3>示例</h3><p><img src="images/fuxa-events8.gif" alt="从输入设置并关闭"></p><h3>应用场景</h3><p><ul><li>确认设置参数</li>
<li>确认修改配置</li>
<li>确认执行操作</li>
</ul>
<hr></p><h2>💡 高级用法</h2><h3>1️⃣ 多事件组合</h3><pre><code class="javascript">// 在一个控件上配置多个事件
事件 1: mouseDown → 设置值为 1
事件 2: mouseUp → 设置值为 0
</code></pre><h3>2️⃣ 条件事件</h3><pre><code class="javascript">// 使用脚本实现条件事件
function handleEvent(tagId, value) {
  let currentValue = $getTag(tagId);
  
  if (currentValue === 0) {
    $setTag(tagId, 1);
  } else {
    $setTag(tagId, 0);
  }
}
</code></pre><h3>3️⃣ 事件链</h3><pre><code class="javascript">// 事件 1: 打开对话框
事件 2: 在对话框中设置值
事件 3: 关闭对话框并执行后续操作
</code></pre><hr><h2>🔧 故障排除</h2><h3>常见问题</h3><h4>❓ 事件不触发</h4><p><strong>可能原因</strong>：
<ul><li>事件未正确配置</li>
<li>控件未启用</li>
<li>权限不足</li>
</ul>
<strong>解决方案</strong>：
<li>检查事件配置是否正确</li>
<li>确认控件是否启用</li>
<li>验证用户权限</li></p><hr><h4>❓ 页面不打开</h4><p><strong>可能原因</strong>：
<ul><li>视图不存在</li>
<li>URL 错误</li>
<li>浏览器阻止弹窗</li>
</ul>
<strong>解决方案</strong>：
<li>确认视图是否存在</li>
<li>检查 URL 是否正确</li>
<li>允许浏览器弹窗</li></p><hr><h4>❓ 值未设置</h4><p><strong>可能原因</strong>：
<ul><li>标签 ID 错误</li>
<li>权限不足</li>
<li>数据类型不匹配</li>
</ul>
<strong>解决方案</strong>：
<li>检查标签 ID 是否正确</li>
<li>验证用户权限</li>
<li>确认数据类型是否匹配</li></p><hr><h2>📚 最佳实践</h2><h3>1️⃣ 事件命名</h3><p><ul><li>使用有意义的名称</li>
<li>描述事件的功能</li>
<li>例如：<code>打开设备详情</code>、<code>启动泵</code></li>
</ul>
<h3>2️⃣ 用户体验</h3></p><p><ul><li>提供清晰的反馈</li>
<li>使用合适的图标和颜色</li>
<li>确认重要操作</li>
</ul>
<h3>3️⃣ 错误处理</h3></p><p><ul><li>验证输入数据</li>
<li>提供错误提示</li>
<li>记录操作日志</li>
</ul>
<h3>4️⃣ 性能优化</h3></p><p><ul><li>避免过于频繁的事件触发</li>
<li>使用防抖和节流</li>
<li>优化事件处理逻辑</li>
</ul>
<hr></p><h2>🎉 总结</h2><p>通过本教程，您已经学会了：</p><p>✅ 配置鼠标事件  
✅ 使用各种事件动作  
✅ 应用高级用法  
✅ 故障排除  
✅ 应用最佳实践  </p><p>现在您可以在 FUXA 中创建交互式的用户界面了！</p><hr><h2>📚 快速参考</h2><h3>事件类型对照表</h3><table>
<tr><th>事件类型</th><th>说明</th><th>触发时机</th></tr>
<tr><td><strong>click</strong></td><td>点击事件</td><td>鼠标点击时触发</td></tr>
<tr><td><strong>mouseDown</strong></td><td>按下事件</td><td>鼠标按下时触发</td></tr>
<tr><td><strong>mouseUp</strong></td><td>释放事件</td><td>鼠标释放时触发</td></tr>
</table><h3>事件动作对照表</h3><table>
<tr><th>动作类型</th><th>说明</th><th>应用场景</th></tr>
<tr><td><strong>Open Page</strong></td><td>打开页面</td><td>导航到不同视图</td></tr>
<tr><td><strong>Open Card</strong></td><td>打开卡片</td><td>显示详细信息</td></tr>
<tr><td><strong>Open Dialog</strong></td><td>打开对话框</td><td>配置参数</td></tr>
<tr><td><strong>Open iframe</strong></td><td>打开 iframe</td><td>嵌入外部网页</td></tr>
<tr><td><strong>Open Window</strong></td><td>打开窗口</td><td>打开外部网页</td></tr>
<tr><td><strong>Set Value</strong></td><td>设置值</td><td>设置标签值</td></tr>
<tr><td><strong>Toggle Value</strong></td><td>切换值</td><td>开启/关闭设备</td></tr>
<tr><td><strong>Set from Input and Close</strong></td><td>从输入设置并关闭</td><td>确认设置</td></tr>
</table><hr><blockquote>💡 <strong>提示</strong>：建议在实际应用中为每个事件添加清晰的说明和反馈，提高用户体验。</blockquote><hr><p><strong>关注我们，获取更多工业自动化技术干货！</strong> 🎯</p><p><div style="display: flex; justify-content: center; align-items: center; gap: 40px; margin: 30px 0;">
    <div style="text-align: center;">
        <img src="images/微信公众号.jpg" alt="微信公众号" style="width: 200px; height: 200px; object-fit: contain;">
        <p style="margin: 10px 0 0 0; font-size: 14px; color: #666;">微信公众号</p>
    </div>
    <div style="text-align: center;">
        <img src="images/单人二维码.png" alt="技术支持" style="width: 200px; height: 200px; object-fit: contain;">
        <p style="margin: 10px 0 0 0; font-size: 14px; color: #666;">技术支持</p>
    </div>
</div></p>
        </div>
        <div class="content-section" id="section-20-系统配置教程">
            <h1>🔧 FUXA 系统配置教程</h1><hr><h2>📋 概述</h2><p>系统配置允许您自定义 FUXA 的各种设置，包括常规设置、认证设置、邮件设置、数据库设置等。</p><hr><h2>🎯 访问系统配置</h2><h3>步骤 1：打开编辑器</h3><p>进入 FUXA 编辑器界面。</p><h3>步骤 2：进入系统设置</h3><p>点击编辑器中的 <strong>"Settings"</strong>（设置）→ <strong>"System"</strong>（系统）。</p><p><img src="images/setup-system.png" alt="系统设置"></p><hr><h2>⚙️ 常规设置</h2><h3>基本配置</h3><table>
<tr><th>设置项</th><th>说明</th><th>推荐值</th></tr>
<tr><td><strong>应用名称</strong></td><td>应用程序的名称</td><td>FUXA</td></tr>
<tr><td><strong>主题</strong></td><td>界面主题</td><td>深色/浅色</td></tr>
<tr><td><strong>语言</strong></td><td>界面语言</td><td>中文</td></tr>
<tr><td><strong>时区</strong></td><td>系统时区</td><td>Asia/Shanghai</td></tr>
</table><h3>高级配置</h3><table>
<tr><th>设置项</th><th>说明</th><th>推荐值</th></tr>
<tr><td><strong>启用调试</strong></td><td>启用调试模式</td><td>false（生产环境）</td></tr>
<tr><td><strong>日志级别</strong></td><td>日志记录级别</td><td>INFO</td></tr>
<tr><td><strong>会话超时</strong></td><td>会话超时时间（分钟）</td><td>30</td></tr>
<tr><td><strong>最大会话数</strong></td><td>最大并发会话数</td><td>10</td></tr>
</table><hr><h2>🔐 认证设置</h2><h3>启用认证</h3><p>FUXA 支持多种认证方式：</p><table>
<tr><th>认证方式</th><th>说明</th><th>应用场景</th></tr>
<tr><td><strong>无认证</strong></td><td>不需要登录</td><td>开发环境</td></tr>
<tr><td><strong>本地认证</strong></td><td>使用本地用户</td><td>小型系统</td></tr>
<tr><td><strong>LDAP 认证</strong></td><td>使用 LDAP 服务器</td><td>企业环境</td></tr>
<tr><td><strong>OAuth2 认证</strong></td><td>使用 OAuth2 提供商</td><td>云应用</td></tr>
</table><h3>本地认证配置</h3><pre><code class="javascript">// 用户配置
{
  "users": [
    {
      "username": "admin",
      "password": "admin123",
      "role": "admin",
      "permissions": ["read", "write", "admin"]
    },
    {
      "username": "operator",
      "password": "operator123",
      "role": "operator",
      "permissions": ["read", "write"]
    },
    {
      "username": "viewer",
      "password": "viewer123",
      "role": "viewer",
      "permissions": ["read"]
    }
  ]
}
</code></pre><h3>LDAP 认证配置</h3><pre><code class="javascript">// LDAP 配置
{
  "ldap": {
    "url": "ldap://ldap.example.com",
    "bindDN": "cn=admin,dc=example,dc=com",
    "bindCredentials": "password",
    "searchBase": "ou=users,dc=example,dc=com",
    "searchFilter": "(uid={{username}})",
    "userAttributes": {
      "username": "uid",
      "email": "mail",
      "displayName": "cn"
    }
  }
}
</code></pre><hr><h2>📧 邮件设置</h2><h3>SMTP 配置</h3><table>
<tr><th>设置项</th><th>说明</th><th>示例</th></tr>
<tr><td><strong>SMTP 服务器</strong></td><td>SMTP 服务器地址</td><td>smtp.example.com</td></tr>
<tr><td><strong>端口</strong></td><td>SMTP 端口</td><td>587</td></tr>
<tr><td><strong>用户名</strong></td><td>SMTP 用户名</td><td>user@example.com</td></tr>
<tr><td><strong>密码</strong></td><td>SMTP 密码</td><td>password</td></tr>
<tr><td><strong>发件人</strong></td><td>发件人地址</td><td>noreply@example.com</td></tr>
<tr><td><strong>启用 SSL</strong></td><td>是否启用 SSL</td><td>true</td></tr>
</table><h3>配置示例</h3><pre><code class="javascript">// 邮件配置
{
  "mail": {
    "host": "smtp.example.com",
    "port": 587,
    "secure": false,
    "auth": {
      "user": "user@example.com",
      "pass": "password"
    },
    "from": "noreply@example.com",
    "tls": {
      "rejectUnauthorized": false
    }
  }
}
</code></pre><h3>邮件通知</h3><p>FUXA 可以通过邮件发送以下通知：</p><p><ul><li>报警通知</li>
<li>系统警告</li>
<li>定期报告</li>
<li>用户操作日志</li>
</ul>
<hr></p><h2>🗄️ 数据库设置</h2><h3>支持的数据库</h3><table>
<tr><th>数据库</th><th>说明</th><th>应用场景</th></tr>
<tr><td><strong>SQLite</strong></td><td>轻量级数据库</td><td>小型系统</td></tr>
<tr><td><strong>MySQL</strong></td><td>关系型数据库</td><td>中型系统</td></tr>
<tr><td><strong>PostgreSQL</strong></td><td>高级关系型数据库</td><td>大型系统</td></tr>
<tr><td><strong>MongoDB</strong></td><td>文档型数据库</td><td>需要灵活数据结构</td></tr>
</table><h3>SQLite 配置</h3><pre><code class="javascript">// SQLite 配置
{
  "database": {
    "type": "sqlite",
    "path": "./data/fuxa.db"
  }
}
</code></pre><h3>MySQL 配置</h3><pre><code class="javascript">// MySQL 配置
{
  "database": {
    "type": "mysql",
    "host": "localhost",
    "port": 3306,
    "username": "fuxa",
    "password": "password",
    "database": "fuxa",
    "connectionLimit": 10
  }
}
</code></pre><h3>PostgreSQL 配置</h3><pre><code class="javascript">// PostgreSQL 配置
{
  "database": {
    "type": "postgresql",
    "host": "localhost",
    "port": 5432,
    "username": "fuxa",
    "password": "password",
    "database": "fuxa",
    "max": 20,
    "idleTimeoutMillis": 30000
  }
}
</code></pre><h3>MongoDB 配置</h3><pre><code class="javascript">// MongoDB 配置
{
  "database": {
    "type": "mongodb",
    "url": "mongodb://localhost:27017",
    "database": "fuxa",
    "options": {
      "useNewUrlParser": true,
      "useUnifiedTopology": true
    }
  }
}
</code></pre><hr><h2>🌐 网络设置</h2><h3>HTTP 配置</h3><table>
<tr><th>设置项</th><th>说明</th><th>推荐值</th></tr>
<tr><td><strong>端口</strong></td><td>HTTP 端口</td><td>1881</td></tr>
<tr><td><strong>启用 HTTPS</strong></td><td>是否启用 HTTPS</td><td>true（生产环境）</td></tr>
<tr><td><strong>HTTPS 端口</strong></td><td>HTTPS 端口</td><td>1882</td></tr>
<tr><td><strong>证书路径</strong></td><td>SSL 证书路径</td><td>./certs/server.crt</td></tr>
<tr><td><strong>密钥路径</strong></td><td>SSL 密钥路径</td><td>./certs/server.key</td></tr>
</table><h3>WebSocket 配置</h3><table>
<tr><th>设置项</th><th>说明</th><th>推荐值</th></tr>
<tr><td><strong>启用 WebSocket</strong></td><td>是否启用 WebSocket</td><td>true</td></tr>
<tr><td><strong>端口</strong></td><td>WebSocket 端口</td><td>1883</td></tr>
<tr><td><strong>路径</strong></td><td>WebSocket 路径</td><td>/ws</td></tr>
</table><h3>配置示例</h3><pre><code class="javascript">// 网络配置
{
  "server": {
    "port": 1881,
    "host": "0.0.0.0"
  },
  "https": {
    "enabled": true,
    "port": 1882,
    "cert": "./certs/server.crt",
    "key": "./certs/server.key"
  },
  "websocket": {
    "enabled": true,
    "port": 1883,
    "path": "/ws"
  }
}
</code></pre><hr><h2>📊 日志设置</h2><h3>日志级别</h3><table>
<tr><th>级别</th><th>说明</th><th>应用场景</th></tr>
<tr><td><strong>ERROR</strong></td><td>错误信息</td><td>生产环境</td></tr>
<tr><td><strong>WARN</strong></td><td>警告信息</td><td>生产环境</td></tr>
<tr><td><strong>INFO</strong></td><td>一般信息</td><td>开发/测试环境</td></tr>
<tr><td><strong>DEBUG</strong></td><td>调试信息</td><td>开发环境</td></tr>
<tr><td><strong>TRACE</strong></td><td>详细跟踪</td><td>调试复杂问题</td></tr>
</table><h3>日志配置</h3><pre><code class="javascript">// 日志配置
{
  "logging": {
    "level": "INFO",
    "file": {
      "enabled": true,
      "path": "./logs/fuxa.log",
      "maxSize": "10M",
      "maxFiles": 5
    },
    "console": {
      "enabled": true,
      "colorize": true
    }
  }
}
</code></pre><hr><h2>🔧 故障排除</h2><h3>常见问题</h3><h4>❓ 无法启动 FUXA</h4><p><strong>可能原因</strong>：
<ul><li>端口被占用</li>
<li>配置文件错误</li>
<li>数据库连接失败</li>
</ul>
<strong>解决方案</strong>：
<li>检查端口是否被占用</li>
<li>验证配置文件语法</li>
<li>确认数据库连接参数</li></p><hr><h4>❓ 无法登录</h4><p><strong>可能原因</strong>：
<ul><li>用户名或密码错误</li>
<li>认证服务未启动</li>
<li>权限配置错误</li>
</ul>
<strong>解决方案</strong>：
<li>检查用户名和密码</li>
<li>确认认证服务状态</li>
<li>验证权限配置</li></p><hr><h4>❓ 邮件发送失败</h4><p><strong>可能原因</strong>：
<ul><li>SMTP 配置错误</li>
<li>网络连接问题</li>
<li>邮件服务器限制</li>
</ul>
<strong>解决方案</strong>：
<li>检查 SMTP 配置</li>
<li>验证网络连接</li>
<li>联系邮件服务提供商</li></p><hr><h2>📚 最佳实践</h2><h3>1️⃣ 安全配置</h3><p><ul><li>使用强密码</li>
<li>启用 HTTPS</li>
<li>定期更新证书</li>
<li>限制访问权限</li>
</ul>
<h3>2️⃣ 性能优化</h3></p><p><ul><li>使用适当的数据库</li>
<li>配置连接池</li>
<li>优化日志级别</li>
<li>定期清理日志</li>
</ul>
<h3>3️⃣ 备份策略</h3></p><p><ul><li>定期备份数据库</li>
<li>备份配置文件</li>
<li>测试恢复流程</li>
<li>使用版本控制</li>
</ul>
<h3>4️⃣ 监控和维护</h3></p><p><ul><li>监控系统性能</li>
<li>定期检查日志</li>
<li>更新系统和依赖</li>
<li>制定维护计划</li>
</ul>
<hr></p><h2>🎉 总结</h2><p>通过本教程，您已经学会了：</p><p>✅ 访问系统配置  
✅ 配置常规设置  
✅ 配置认证设置  
✅ 配置邮件设置  
✅ 配置数据库设置  
✅ 配置网络设置  
✅ 配置日志设置  
✅ 故障排除  
✅ 应用最佳实践  </p><p>现在您可以根据实际需求自定义 FUXA 系统了！</p><hr><h2>📚 快速参考</h2><h3>数据库类型对照表</h3><table>
<tr><th>数据库类型</th><th>配置参数</th><th>适用场景</th></tr>
<tr><td><strong>SQLite</strong></td><td>path</td><td>小型系统、开发环境</td></tr>
<tr><td><strong>MySQL</strong></td><td>host, port, username, password, database</td><td>中型系统</td></tr>
<tr><td><strong>PostgreSQL</strong></td><td>host, port, username, password, database</td><td>大型系统</td></tr>
<tr><td><strong>MongoDB</strong></td><td>url, database</td><td>需要灵活数据结构</td></tr>
</table><h3>日志级别对照表</h3><table>
<tr><th>级别</th><th>严重程度</th><th>应用场景</th></tr>
<tr><td><strong>ERROR</strong></td><td>最高</td><td>生产环境</td></tr>
<tr><td><strong>WARN</strong></td><td>高</td><td>生产环境</td></tr>
<tr><td><strong>INFO</strong></td><td>中</td><td>开发/测试环境</td></tr>
<tr><td><strong>DEBUG</strong></td><td>低</td><td>开发环境</td></tr>
<tr><td><strong>TRACE</strong></td><td>最低</td><td>调试复杂问题</td></tr>
</table><hr><blockquote>💡 <strong>提示</strong>：建议在生产环境中使用 HTTPS、启用认证、配置适当的日志级别，并定期备份数据。</blockquote><hr><p><strong>关注我们，获取更多工业自动化技术干货！</strong> 🎯</p><p><div style="display: flex; justify-content: center; align-items: center; gap: 40px; margin: 30px 0;">
    <div style="text-align: center;">
        <img src="images/微信公众号.jpg" alt="微信公众号" style="width: 200px; height: 200px; object-fit: contain;">
        <p style="margin: 10px 0 0 0; font-size: 14px; color: #666;">微信公众号</p>
    </div>
    <div style="text-align: center;">
        <img src="images/单人二维码.png" alt="技术支持" style="width: 200px; height: 200px; object-fit: contain;">
        <p style="margin: 10px 0 0 0; font-size: 14px; color: #666;">技术支持</p>
    </div>
</div></p>
        </div>
        <div class="content-section" id="section-21-视图复用教程">
            <h1>🔄 FUXA 视图复用教程</h1><hr><h2>📋 概述</h2><p>视图复用功能允许您为重复组件（如泵和阀门）使用相同的视图，提高开发效率并保持界面一致性。</p><hr><h2>🎯 应用场景</h2><p>视图复用适用于以下场景：</p><table>
<tr><th>场景</th><th>说明</th><th>示例</th></tr>
<tr><td><strong>多个相同设备</strong></td><td>多个相同类型的设备</td><td>多个泵、多个阀门</td></tr>
<tr><td><strong>统一界面风格</strong></td><td>保持界面风格一致</td><td>统一的设备控制界面</td></tr>
<tr><td><strong>减少重复工作</strong></td><td>避免重复创建相同界面</td><td>一次创建，多次使用</td></tr>
<tr><td><strong>便于维护</strong></td><td>集中管理界面逻辑</td><td>修改一处，全局生效</td></tr>
</table><hr><h2>🔧 实现步骤</h2><h3>步骤 1：定义内部设备</h3><p>创建一个内部设备，用于存储可复用视图所需的变量（标签）。</p><p><img src="images/fuxa-reuse-view2.gif" alt="定义内部设备"></p><h4>配置说明</h4><table>
<tr><th>配置项</th><th>说明</th><th>示例</th></tr>
<tr><td><strong>设备名称</strong></td><td>内部设备名称</td><td>InternalDevice</td></tr>
<tr><td><strong>设备类型</strong></td><td>设备类型</td><td>Internal</td></tr>
<tr><td><strong>变量名称</strong></td><td>变量名称</td><td>pumpName, pumpStatus, targetValue</td></tr>
</table><h4>示例配置</h4><pre><code class="javascript">// 内部设备配置
{
  "name": "InternalDevice",
  "type": "internal",
  "variables": [
    {
      "name": "pumpName",
      "type": "string",
      "value": ""
    },
    {
      "name": "pumpStatus",
      "type": "number",
      "value": 0
    },
    {
      "name": "targetValue",
      "type": "number",
      "value": 0
    }
  ]
}
</code></pre><hr><h3>步骤 2：创建可复用视图</h3><p>创建一个视图，将控件绑定到内部设备的变量。</p><p><img src="images/fuxa-reuse-view1.gif" alt="创建可复用视图"></p><h4>视图设计</h4><p><li>添加显示控件（如文本框）绑定到 <code>pumpName</code></li>
<li>添加状态指示器绑定到 <code>pumpStatus</code></li>
<li>添加输入控件绑定到 <code>targetValue</code></li>
<li>添加确认按钮（可选）</li></p><h4>控件绑定示例</h4><pre><code class="javascript">// 标题显示
{
  type: "text",
  tagId: "pumpName",
  text: "{value}"
}</p><p>// 状态显示
{
  type: "circle",
  tagId: "pumpStatus",
  fillColor: {
    0: "#95a5a6",  // 停止
    1: "#2ecc71"   // 运行
  }
}</p><p>// 目标值输入
{
  type: "input",
  tagId: "targetValue",
  label: "目标值",
  unit: "%"
}
</code></pre><hr><h3>步骤 3：配置事件</h3><p>在每个组件中配置事件，打开对话框并定义内部标签与设备标签的连接。</p><p><img src="images/fuxa-reuse-view3.gif" alt="配置事件"></p><h4>事件配置</h4><p><li>选择要使用复用视图的组件</li>
<li>添加点击事件</li>
<li>选择动作类型为 <strong>"Open Dialog"</strong>（打开对话框）</li>
<li>选择可复用视图</li>
<li>配置标签映射</li></p><h4>标签映射示例</h4><pre><code class="javascript">// 泵 1 的事件配置
{
  "action": "Open Dialog",
  "view": "PumpControlView",
  "tagMappings": {
    "pumpName": "Pump1.name",
    "pumpStatus": "Pump1.status",
    "targetValue": "Pump1.targetValue"
  }
}</p><p>// 泵 2 的事件配置
{
  "action": "Open Dialog",
  "view": "PumpControlView",
  "tagMappings": {
    "pumpName": "Pump2.name",
    "pumpStatus": "Pump2.status",
    "targetValue": "Pump2.targetValue"
  }
}
</code></pre><hr><h3>步骤 4：添加确认按钮（可选）</h3><p>如果需要，可以添加确认按钮来保存设置。</p><p><img src="images/fuxa-reuse-view4.gif" alt="添加确认按钮"></p><h4>确认按钮配置</h4><pre><code class="javascript">// 确认按钮事件
{
  "action": "Set from Input and Close",
  "tagId": "targetValue",
  "inputId": "targetValueInput"
}
</code></pre><hr><h2>💡 完整示例</h2><h3>示例 1：泵控制界面</h3><h4>主视图</h4><pre><code class="javascript">// 主视图：显示多个泵
{
  "view": "MainView",
  "components": [
    {
      "type": "pump",
      "name": "Pump1",
      "events": [
        {
          "type": "click",
          "action": "Open Dialog",
          "view": "PumpControlView",
          "tagMappings": {
            "pumpName": "Pump1.name",
            "pumpStatus": "Pump1.status",
            "targetValue": "Pump1.targetValue"
          }
        }
      ]
    },
    {
      "type": "pump",
      "name": "Pump2",
      "events": [
        {
          "type": "click",
          "action": "Open Dialog",
          "view": "PumpControlView",
          "tagMappings": {
            "pumpName": "Pump2.name",
            "pumpStatus": "Pump2.status",
            "targetValue": "Pump2.targetValue"
          }
        }
      ]
    }
  ]
}
</code></pre><h4>可复用视图</h4><pre><code class="javascript">// 可复用视图：泵控制
{
  "view": "PumpControlView",
  "controls": [
    {
      "type": "text",
      "tagId": "pumpName",
      "text": "泵: {value}"
    },
    {
      "type": "circle",
      "tagId": "pumpStatus",
      "fillColor": {
        0: "#95a5a6",
        1: "#2ecc71"
      }
    },
    {
      "type": "input",
      "tagId": "targetValue",
      "label": "目标值",
      "unit": "%"
    },
    {
      "type": "button",
      "text": "确认",
      "events": [
        {
          "type": "click",
          "action": "Set from Input and Close",
          "tagId": "targetValue"
        }
      ]
    }
  ]
}
</code></pre><hr><h3>示例 2：阀门控制界面</h3><h4>主视图</h4><pre><code class="javascript">// 主视图：显示多个阀门
{
  "view": "MainView",
  "components": [
    {
      "type": "valve",
      "name": "Valve1",
      "events": [
        {
          "type": "click",
          "action": "Open Dialog",
          "view": "ValveControlView",
          "tagMappings": {
            "valveName": "Valve1.name",
            "valveStatus": "Valve1.status",
            "valvePosition": "Valve1.position"
          }
        }
      ]
    },
    {
      "type": "valve",
      "name": "Valve2",
      "events": [
        {
          "type": "click",
          "action": "Open Dialog",
          "view": "ValveControlView",
          "tagMappings": {
            "valveName": "Valve2.name",
            "valveStatus": "Valve2.status",
            "valvePosition": "Valve2.position"
          }
        }
      ]
    }
  ]
}
</code></pre><h4>可复用视图</h4><pre><code class="javascript">// 可复用视图：阀门控制
{
  "view": "ValveControlView",
  "controls": [
    {
      "type": "text",
      "tagId": "valveName",
      "text": "阀门: {value}"
    },
    {
      "type": "diamond",
      "tagId": "valveStatus",
      "fillColor": {
        0: "#95a5a6",
        1: "#2ecc71"
      }
    },
    {
      "type": "slider",
      "tagId": "valvePosition",
      "label": "阀门位置",
      "min": 0,
      "max": 100,
      "unit": "%"
    },
    {
      "type": "button",
      "text": "确认",
      "events": [
        {
          "type": "click",
          "action": "Set from Input and Close",
          "tagId": "valvePosition"
        }
      ]
    }
  ]
}
</code></pre><hr><h2>🔧 故障排除</h2><h3>常见问题</h3><h4>❓ 标签映射不正确</h4><p><strong>可能原因</strong>：
<ul><li>标签名称拼写错误</li>
<li>标签不存在</li>
<li>数据类型不匹配</li>
</ul>
<strong>解决方案</strong>：
<li>检查标签名称是否正确</li>
<li>确认标签是否存在</li>
<li>验证数据类型是否匹配</li></p><hr><h4>❓ 对话框不显示</h4><p><strong>可能原因</strong>：
<ul><li>视图未正确配置</li>
<li>事件未正确触发</li>
<li>权限不足</li>
</ul>
<strong>解决方案</strong>：
<li>检查视图配置</li>
<li>验证事件触发条件</li>
<li>确认用户权限</li></p><hr><h4>❓ 值未更新</h4><p><strong>可能原因</strong>：
<ul><li>标签映射错误</li>
<li>设备未连接</li>
<li>权限不足</li>
</ul>
<strong>解决方案</strong>：
<li>检查标签映射</li>
<li>确认设备连接状态</li>
<li>验证用户权限</li></p><hr><h2>📚 最佳实践</h2><h3>1️⃣ 命名规范</h3><p><ul><li>使用有意义的名称</li>
<li>保持命名一致性</li>
<li>例如：<code>PumpControlView</code>、<code>ValveControlView</code></li>
</ul>
<h3>2️⃣ 模块化设计</h3></p><p><ul><li>将复杂视图分解为简单组件</li>
<li>创建可重用的子视图</li>
<li>提高代码可维护性</li>
</ul>
<h3>3️⃣ 文档化</h3></p><p><ul><li>记录可复用视图的用途</li>
<li>说明标签映射关系</li>
<li>提供使用示例</li>
</ul>
<h3>4️⃣ 测试</h3></p><p><ul><li>在开发环境中充分测试</li>
<li>验证所有标签映射</li>
<li>确认事件正常触发</li>
</ul>
<hr></p><h2>🎉 总结</h2><p>通过本教程，您已经学会了：</p><p>✅ 定义内部设备  
✅ 创建可复用视图  
✅ 配置事件和标签映射  
✅ 添加确认按钮  
✅ 应用完整示例  
✅ 故障排除  
✅ 应用最佳实践  </p><p>现在您可以在 FUXA 中高效地复用视图了！</p><hr><h2>📚 快速参考</h2><h3>视图复用步骤对照表</h3><table>
<tr><th>步骤</th><th>操作</th><th>说明</th></tr>
<tr><td><strong>1</strong></td><td>定义内部设备</td><td>创建内部设备和变量</td></tr>
<tr><td><strong>2</strong></td><td>创建可复用视图</td><td>设计视图并绑定控件</td></tr>
<tr><td><strong>3</strong></td><td>配置事件</td><td>配置打开对话框事件</td></tr>
<tr><td><strong>4</strong></td><td>添加确认按钮（可选）</td><td>添加确认按钮保存设置</td></tr>
</table><hr><blockquote>💡 <strong>提示</strong>：建议在实际应用中为每个可复用视图添加清晰的说明和文档，便于其他开发者理解和使用。</blockquote><hr><p><strong>关注我们，获取更多工业自动化技术干货！</strong> 🎯</p><p><div style="display: flex; justify-content: center; align-items: center; gap: 40px; margin: 30px 0;">
    <div style="text-align: center;">
        <img src="images/微信公众号.jpg" alt="微信公众号" style="width: 200px; height: 200px; object-fit: contain;">
        <p style="margin: 10px 0 0 0; font-size: 14px; color: #666;">微信公众号</p>
    </div>
    <div style="text-align: center;">
        <img src="images/单人二维码.png" alt="技术支持" style="width: 200px; height: 200px; object-fit: contain;">
        <p style="margin: 10px 0 0 0; font-size: 14px; color: #666;">技术支持</p>
    </div>
</div></p>
        </div>
        <div class="content-section" id="section-22-报警配置教程">
            <h1>🚨 FUXA 报警配置教程</h1><hr><h2>📋 概述</h2><p>报警是 FUXA 中用于监控设备状态和异常情况的重要功能。通过配置报警，您可以及时了解系统中的异常情况，并采取相应的措施。</p><hr><h2>🎯 访问报警配置</h2><h3>步骤 1：打开编辑器</h3><p>进入 FUXA 编辑器界面。</p><h3>步骤 2：进入报警设置</h3><p>点击编辑器中的 <strong>"Alarms"</strong>（报警）。</p><p><img src="images/setup-alarms.png" alt="报警设置"></p><hr><h2>🔧 配置报警</h2><h3>报警绑定</h3><p>报警绑定到一个标签（Tag），可以为该标签定义 4 种类型的条件，对应不同的报警级别。</p><p><img src="images/fuxa-alarms.gif" alt="配置报警"></p><h3>报警级别</h3><table>
<tr><th>报警级别</th><th>说明</th><th>优先级</th><th>应用场景</th></tr>
<tr><td><strong>High High</strong></td><td>高高报警</td><td>最高</td><td>严重异常，需要立即处理</td></tr>
<tr><td><strong>High</strong></td><td>高报警</td><td>高</td><td>重要异常，需要尽快处理</td></tr>
<tr><td><strong>Low</strong></td><td>低报警</td><td>中</td><td>一般异常，需要关注</td></tr>
<tr><td><strong>Message</strong></td><td>消息</td><td>低</td><td>信息提示，仅供参考</td></tr>
</table><h3>报警条件</h3><table>
<tr><th>条件类型</th><th>说明</th><th>示例</th></tr>
<tr><td><strong>大于</strong></td><td>值大于设定值</td><td>温度 > 100</td></tr>
<tr><td><strong>小于</strong></td><td>值小于设定值</td><td>压力 < 10</td></tr>
<tr><td><strong>等于</strong></td><td>值等于设定值</td><td>状态 = 3</td></tr>
<tr><td><strong>不等于</strong></td><td>值不等于设定值</td><td>状态 != 0</td></tr>
<tr><td><strong>范围内</strong></td><td>值在设定范围内</td><td>20 <= 温度 <= 80</td></tr>
<tr><td><strong>范围外</strong></td><td>值在设定范围外</td><td>温度 < 20 或 温度 > 80</td></tr>
</table><h3>配置示例</h3><pre><code class="javascript">// 报警配置示例
{
  "tagId": "temperature",
  "alarms": [
    {
      "level": "High High",
      "condition": "value > 100",
      "message": "温度过高！",
      "actions": [
        {
          "type": "setTag",
          "tagId": "emergencyShutdown",
          "value": 1
        }
      ]
    },
    {
      "level": "High",
      "condition": "value > 80",
      "message": "温度偏高！",
      "actions": [
        {
          "type": "showPopup",
          "message": "温度偏高，请检查设备！"
        }
      ]
    },
    {
      "level": "Low",
      "condition": "value < 20",
      "message": "温度偏低！",
      "actions": []
    },
    {
      "level": "Message",
      "condition": "value >= 50 && value <= 60",
      "message": "温度正常",
      "actions": []
    }
  ]
}
</code></pre><hr><h2>📊 显示报警</h2><h3>活动报警和历史记录</h3><p>通过从菜单或标题栏上的按钮配置视图，可以显示活动报警和历史记录。</p><p><img src="images/fuxa-alarms2.gif" alt="显示报警"></p><h3>视图配置</h3><h4>布局设置</h4><p><li>进入 <strong>"Settings"</strong>（设置）→ <strong>"Layout"</strong>（布局）</li>
<li>配置报警显示选项</li>
<li>选择要显示的报警视图</li></p><h4>配置选项</h4><table>
<tr><th>选项</th><th>说明</th><th>推荐值</th></tr>
<tr><td><strong>显示活动报警</strong></td><td>是否显示活动报警</td><td>是</td></tr>
<tr><td><strong>显示报警历史</strong></td><td>是否显示报警历史</td><td>是</td></tr>
<tr><td><strong>报警刷新间隔</strong></td><td>报警刷新间隔（秒）</td><td>5</td></tr>
<tr><td><strong>最大报警数量</strong></td><td>最大显示的报警数量</td><td>100</td></tr>
</table><hr><h2>🎯 报警动作</h2><h3>动作类型</h3><p>可以为每个报警配置多个动作，例如显示弹出对话框或设置标签值。</p><p><img src="images/fuxa-alarms3.gif" alt="报警动作"></p><h3>支持的动作</h3><table>
<tr><th>动作类型</th><th>说明</th><th>应用场景</th></tr>
<tr><td><strong>showPopup</strong></td><td>显示弹出对话框</td><td>提示用户注意</td></tr>
<tr><td><strong>setTag</strong></td><td>设置标签值</td><td>执行控制操作</td></tr>
<tr><td><strong>sendEmail</strong></td><td>发送邮件</td><td>通知相关人员</td></tr>
<tr><td><strong>playSound</strong></td><td>播放声音</td><td>提醒操作员</td></tr>
<tr><td><strong>executeScript</strong></td><td>执行脚本</td><td>执行自定义逻辑</td></tr>
</table><h3>动作配置示例</h3><pre><code class="javascript">// 报警动作配置
{
  "tagId": "tankLevel",
  "alarms": [
    {
      "level": "High High",
      "condition": "value > 90",
      "message": "液位过高！",
      "actions": [
        {
          "type": "showPopup",
          "title": "警告",
          "message": "液位过高，请立即检查！"
        },
        {
          "type": "setTag",
          "tagId": "pumpStatus",
          "value": 0
        },
        {
          "type": "sendEmail",
          "to": "admin@example.com",
          "subject": "液位过高报警",
          "body": "储罐液位超过 90%，请立即处理！"
        },
        {
          "type": "playSound",
          "sound": "alarm.mp3"
        }
      ]
    }
  ]
}
</code></pre><hr><h2>💡 完整示例</h2><h3>示例 1：温度监控</h3><pre><code class="javascript">// 温度监控报警配置
{
  "tagId": "temperature",
  "name": "主泵温度",
  "unit": "°C",
  "alarms": [
    {
      "level": "High High",
      "condition": "value > 100",
      "message": "温度过高，紧急停机！",
      "actions": [
        {
          "type": "showPopup",
          "title": "紧急警告",
          "message": "温度超过 100°C，系统将紧急停机！"
        },
        {
          "type": "setTag",
          "tagId": "emergencyShutdown",
          "value": 1
        },
        {
          "type": "sendEmail",
          "to": "admin@example.com",
          "subject": "紧急报警：温度过高",
          "body": "主泵温度超过 100°C，系统已紧急停机！"
        }
      ]
    },
    {
      "level": "High",
      "condition": "value > 80",
      "message": "温度偏高",
      "actions": [
        {
          "type": "showPopup",
          "title": "警告",
          "message": "温度偏高，请检查设备！"
        }
      ]
    },
    {
      "level": "Low",
      "condition": "value < 20",
      "message": "温度偏低",
      "actions": []
    }
  ]
}
</code></pre><h3>示例 2：液位监控</h3><pre><code class="javascript">// 液位监控报警配置
{
  "tagId": "tankLevel",
  "name": "储罐液位",
  "unit": "%",
  "alarms": [
    {
      "level": "High High",
      "condition": "value > 90",
      "message": "液位过高",
      "actions": [
        {
          "type": "setTag",
          "tagId": "pumpStatus",
          "value": 0
        },
        {
          "type": "sendEmail",
          "to": "operator@example.com",
          "subject": "液位过高报警",
          "body": "储罐液位超过 90%，泵已停止！"
        }
      ]
    },
    {
      "level": "High",
      "condition": "value > 80",
      "message": "液位偏高",
      "actions": []
    },
    {
      "level": "Low",
      "condition": "value < 20",
      "message": "液位偏低",
      "actions": [
        {
          "type": "setTag",
          "tagId": "pumpStatus",
          "value": 1
        }
      ]
    }
  ]
}
</code></pre><h3>示例 3：压力监控</h3><pre><code class="javascript">// 压力监控报警配置
{
  "tagId": "pressure",
  "name": "管道压力",
  "unit": "bar",
  "alarms": [
    {
      "level": "High High",
      "condition": "value > 10",
      "message": "压力过高",
      "actions": [
        {
          "type": "showPopup",
          "title": "紧急警告",
          "message": "压力超过 10 bar，请立即泄压！"
        },
        {
          "type": "setTag",
          "tagId": "valveOpen",
          "value": 1
        },
        {
          "type": "playSound",
          "sound": "alarm.mp3"
        }
      ]
    },
    {
      "level": "High",
      "condition": "value > 8",
      "message": "压力偏高",
      "actions": []
    },
    {
      "level": "Low",
      "condition": "value < 2",
      "message": "压力偏低",
      "actions": []
    }
  ]
}
</code></pre><hr><h2>🔧 故障排除</h2><h3>常见问题</h3><h4>❓ 报警不触发</h4><p><strong>可能原因</strong>：
<ul><li>报警条件不正确</li>
<li>标签未更新</li>
<li>报警未启用</li>
</ul>
<strong>解决方案</strong>：
<li>检查报警条件是否正确</li>
<li>确认标签是否正常更新</li>
<li>验证报警是否已启用</li></p><hr><h4>❓ 动作不执行</h4><p><strong>可能原因</strong>：
<ul><li>动作配置错误</li>
<li>权限不足</li>
<li>资源不可用</li>
</ul>
<strong>解决方案</strong>：
<li>检查动作配置是否正确</li>
<li>验证用户权限</li>
<li>确认所需资源是否可用</li></p><hr><h4>❓ 邮件未发送</h4><p><strong>可能原因</strong>：
<ul><li>邮件配置错误</li>
<li>网络连接问题</li>
<li>邮件服务器限制</li>
</ul>
<strong>解决方案</strong>：
<li>检查邮件配置</li>
<li>验证网络连接</li>
<li>联系邮件服务提供商</li></p><hr><h2>📚 最佳实践</h2><h3>1️⃣ 报警级别设置</h3><p><ul><li><strong>High High</strong>：用于严重异常，需要立即处理</li>
<li><strong>High</strong>：用于重要异常，需要尽快处理</li>
<li><strong>Low</strong>：用于一般异常，需要关注</li>
<li><strong>Message</strong>：用于信息提示，仅供参考</li>
</ul>
<h3>2️⃣ 报警条件设计</h3></p><p><ul><li>使用合理的阈值</li>
<li>避免过于频繁的报警</li>
<li>考虑滞后性（hysteresis）</li>
</ul>
<h3>3️⃣ 动作配置</h3></p><p><ul><li>为严重报警配置多个动作</li>
<li>避免动作冲突</li>
<li>测试所有动作是否正常执行</li>
</ul>
<h3>4️⃣ 报警管理</h3></p><p><ul><li>定期审查报警配置</li>
<li>调整不合理的报警</li>
<li>记录报警处理流程</li>
</ul>
<hr></p><h2>🎉 总结</h2><p>通过本教程，您已经学会了：</p><p>✅ 访问报警配置  
✅ 配置报警条件和级别  
✅ 显示活动报警和历史记录  
✅ 配置报警动作  
✅ 应用完整示例  
✅ 故障排除  
✅ 应用最佳实践  </p><p>现在您可以在 FUXA 中配置强大的报警系统了！</p><hr><h2>📚 快速参考</h2><h3>报警级别对照表</h3><table>
<tr><th>报警级别</th><th>优先级</th><th>说明</th><th>应用场景</th></tr>
<tr><td><strong>High High</strong></td><td>最高</td><td>严重异常</td><td>需要立即处理</td></tr>
<tr><td><strong>High</strong></td><td>高</td><td>重要异常</td><td>需要尽快处理</td></tr>
<tr><td><strong>Low</strong></td><td>中</td><td>一般异常</td><td>需要关注</td></tr>
<tr><td><strong>Message</strong></td><td>低</td><td>信息提示</td><td>仅供参考</td></tr>
</table><h3>报警动作对照表</h3><table>
<tr><th>动作类型</th><th>说明</th><th>应用场景</th></tr>
<tr><td><strong>showPopup</strong></td><td>显示弹出对话框</td><td>提示用户注意</td></tr>
<tr><td><strong>setTag</strong></td><td>设置标签值</td><td>执行控制操作</td></tr>
<tr><td><strong>sendEmail</strong></td><td>发送邮件</td><td>通知相关人员</td></tr>
<tr><td><strong>playSound</strong></td><td>播放声音</td><td>提醒操作员</td></tr>
<tr><td><strong>executeScript</strong></td><td>执行脚本</td><td>执行自定义逻辑</td></tr>
</table><hr><blockquote>💡 <strong>提示</strong>：建议在实际应用中为每个报警配置合理的阈值和动作，避免报警过于频繁或遗漏重要异常。</blockquote><hr><p><strong>关注我们，获取更多工业自动化技术干货！</strong> 🎯</p><p><div style="display: flex; justify-content: center; align-items: center; gap: 40px; margin: 30px 0;">
    <div style="text-align: center;">
        <img src="images/微信公众号.jpg" alt="微信公众号" style="width: 200px; height: 200px; object-fit: contain;">
        <p style="margin: 10px 0 0 0; font-size: 14px; color: #666;">微信公众号</p>
    </div>
    <div style="text-align: center;">
        <img src="images/单人二维码.png" alt="技术支持" style="width: 200px; height: 200px; object-fit: contain;">
        <p style="margin: 10px 0 0 0; font-size: 14px; color: #666;">技术支持</p>
    </div>
</div></p>
        </div>
        <div class="content-section" id="section-23-项目管理教程">
            <h1>💾 FUXA 项目管理教程</h1><hr><h2>📋 概述</h2><p>项目管理功能允许您创建、保存、加载和导出 FUXA 项目，方便项目备份和迁移。</p><hr><h2>🎯 创建项目</h2><h3>创建新项目</h3><p>您可以创建一个新项目，当前项目将被新的空项目覆盖（新项目只包含一个空的 MainView）。</p><p><img src="images/fuxa-project.png" alt="创建项目"></p><h3>操作步骤</h3><p><li>打开 FUXA 编辑器</li>
<li>点击 <strong>"File"</strong>（文件）→ <strong>"New Project"</strong>（新建项目）</li>
<li>确认创建新项目</li></p><h3>注意事项</h3><p>⚠️ <strong>警告</strong>：创建新项目将覆盖当前项目，请确保已备份重要数据！</p><hr><h2>💾 保存项目</h2><h3>自动保存</h3><p>项目会在每次设置更改（对话框确认）后自动保存到内部数据库，例如编辑设备、标签、图表等。</p><p>视图会在选择其他视图或离开编辑器时自动保存。</p><h3>手动保存</h3><h4>保存项目</h4><p>通过 <strong>"Save Project"</strong>（保存项目）可以强制执行内部保存过程。</p><p><strong>操作步骤</strong>：
<li>点击 <strong>"File"</strong>（文件）→ <strong>"Save Project"</strong>（保存项目）</li>
<li>等待保存完成</li></p><h4>另存为</h4><p>通过 <strong>"Save Project As…"</strong>（项目另存为）可以将整个项目导出为 JSON 格式的文件（MyProject.json），这对于项目备份非常有用。</p><p><strong>操作步骤</strong>：
<li>点击 <strong>"File"</strong>（文件）→ <strong>"Save Project As…"</strong>（项目另存为）</li>
<li>选择保存位置</li>
<li>输入文件名</li>
<li>点击保存</li></p><h3>项目文件格式</h3><pre><code class="json">{
  "name": "MyProject",
  "version": "1.0.0",
  "created": "2024-01-01T00:00:00.000Z",
  "modified": "2024-01-01T00:00:00.000Z",
  "devices": [],
  "tags": [],
  "views": [],
  "charts": [],
  "alarms": [],
  "scripts": [],
  "settings": {}
}
</code></pre><hr><h2>📂 打开项目</h2><h3>从文件打开项目</h3><p>您可以从导出的文件（MyProject.json）打开项目。</p><p><strong>操作步骤</strong>：
<li>点击 <strong>"File"</strong>（文件）→ <strong>"Open Project"</strong>（打开项目）</li>
<li>选择项目文件</li>
<li>点击打开</li></p><h3>注意事项</h3><p>⚠️ <strong>警告</strong>：打开项目将覆盖当前项目，请确保已备份重要数据！</p><hr><h2>🔄 项目备份与恢复</h2><h3>备份策略</h3><h4>定期备份</h4><p>建议定期备份项目，特别是在进行重大更改之前。</p><p><strong>备份步骤</strong>：
<li>点击 <strong>"File"</strong>（文件）→ <strong>"Save Project As…"</strong>（项目另存为）</li>
<li>选择备份目录</li>
<li>使用带日期的文件名（例如：MyProject_20240101.json）</li>
<li>点击保存</li></p><h4>版本控制</h4><p>使用版本控制系统（如 Git）管理项目文件。</p><p><strong>示例</strong>：</p><p>
<pre><code class="bash"># 初始化 Git 仓库
git init</p><p># 添加项目文件
git add MyProject.json</p><p># 提交更改
git commit -m "Initial commit"</p><p># 创建标签
git tag v1.0.0
</code></pre></p><h3>恢复项目</h3><h4>从备份恢复</h4><p><strong>恢复步骤</strong>：
<li>点击 <strong>"File"</strong>（文件）→ <strong>"Open Project"</strong>（打开项目）</li>
<li>选择备份文件</li>
<li>点击打开</li></p><h4>从版本控制恢复</h4><p><strong>示例</strong>：</p><p>
<pre><code class="bash"># 查看提交历史
git log</p><p># 恢复到特定版本
git checkout v1.0.0
</code></pre></p><hr><h2>💡 完整示例</h2><h3>示例 1：创建新项目</h3><pre><code class="javascript">// 创建新项目
1. 打开 FUXA 编辑器
2. 点击 File → New Project
3. 确认创建新项目
4. 开始配置设备和标签
5. 自动保存或手动保存
</code></pre><h3>示例 2：备份项目</h3><pre><code class="javascript">// 备份项目
1. 点击 File → Save Project As…
2. 选择备份目录：C:\Backups\FUXA
3. 输入文件名：MyProject_20240101.json
4. 点击保存
5. 确认备份成功
</code></pre><h3>示例 3：恢复项目</h3><pre><code class="javascript">// 恢复项目
1. 点击 File → Open Project
2. 选择备份文件：C:\Backups\FUXA\MyProject_20240101.json
3. 点击打开
4. 确认恢复成功
5. 验证项目配置
</code></pre><hr><h2>🔧 故障排除</h2><h3>常见问题</h3><h4>❓ 项目无法保存</h4><p><strong>可能原因</strong>：
<ul><li>磁盘空间不足</li>
<li>文件权限问题</li>
<li>数据库连接失败</li>
</ul>
<strong>解决方案</strong>：
<li>检查磁盘空间</li>
<li>验证文件权限</li>
<li>确认数据库连接</li></p><hr><h4>❓ 项目无法打开</h4><p><strong>可能原因</strong>：
<ul><li>文件损坏</li>
<li>文件格式不正确</li>
<li>版本不兼容</li>
</ul>
<strong>解决方案</strong>：
<li>检查文件完整性</li>
<li>验证文件格式</li>
<li>确认版本兼容性</li></p><hr><h4>❓ 自动保存不工作</h4><p><strong>可能原因</strong>：
<ul><li>自动保存未启用</li>
<li>数据库连接失败</li>
<li>权限不足</li>
</ul>
<strong>解决方案</strong>：
<li>检查自动保存设置</li>
<li>验证数据库连接</li>
<li>确认用户权限</li></p><hr><h2>📚 最佳实践</h2><h3>1️⃣ 命名规范</h3><p><ul><li>使用有意义的名称</li>
<li>包含版本号或日期</li>
<li>例如：<code>MyProject_v1.0.0.json</code>、<code>MyProject_20240101.json</code></li>
</ul>
<h3>2️⃣ 备份策略</h3></p><p><ul><li>定期备份项目</li>
<li>在重大更改前备份</li>
<li>保留多个版本</li>
<li>使用版本控制系统</li>
</ul>
<h3>3️⃣ 文档化</h3></p><p><ul><li>记录项目变更</li>
<li>编写项目文档</li>
<li>提供使用说明</li>
</ul>
<h3>4️⃣ 测试</h3></p><p><ul><li>在测试环境中测试项目</li>
<li>验证备份和恢复流程</li>
<li>确认项目功能正常</li>
</ul>
<hr></p><h2>🎉 总结</h2><p>通过本教程，您已经学会了：</p><p>✅ 创建新项目  
✅ 保存项目  
✅ 打开项目  
✅ 项目备份与恢复  
✅ 应用完整示例  
✅ 故障排除  
✅ 应用最佳实践  </p><p>现在您可以在 FUXA 中高效地管理项目了！</p><hr><h2>📚 快速参考</h2><h3>项目管理操作对照表</h3><table>
<tr><th>操作</th><th>说明</th><th>快捷键</th></tr>
<tr><td><strong>New Project</strong></td><td>创建新项目</td><td>Ctrl + N</td></tr>
<tr><td><strong>Save Project</strong></td><td>保存项目</td><td>Ctrl + S</td></tr>
<tr><td><strong>Save Project As…</strong></td><td>项目另存为</td><td>Ctrl + Shift + S</td></tr>
<tr><td><strong>Open Project</strong></td><td>打开项目</td><td>Ctrl + O</td></tr>
</table><hr><blockquote>💡 <strong>提示</strong>：建议定期备份项目，特别是在进行重大更改之前，以防数据丢失。</blockquote><hr><p><strong>关注我们，获取更多工业自动化技术干货！</strong> 🎯</p><p><div style="display: flex; justify-content: center; align-items: center; gap: 40px; margin: 30px 0;">
    <div style="text-align: center;">
        <img src="images/微信公众号.jpg" alt="微信公众号" style="width: 200px; height: 200px; object-fit: contain;">
        <p style="margin: 10px 0 0 0; font-size: 14px; color: #666;">微信公众号</p>
    </div>
    <div style="text-align: center;">
        <img src="images/单人二维码.png" alt="技术支持" style="width: 200px; height: 200px; object-fit: contain;">
        <p style="margin: 10px 0 0 0; font-size: 14px; color: #666;">技术支持</p>
    </div>
</div></p>
        </div>
        <div class="content-section" id="section-24-自定义形状定义教程">
            <h1>🎨 FUXA 自定义形状定义教程</h1><hr><h2>📋 概述</h2><p>FUXA 允许您定义自定义形状，扩展编辑器的图形库，以满足特定的工业可视化需求。</p><hr><h2>🎯 形状文件位置</h2><p>形状文件夹位于：<code>client/dist/assets/lib/svgeditor/shapes</code>（如果您正在调试，则在 <code>client/src/lib/svgeditor/shapes</code>）。</p><p>您可以通过创建新的 JavaScript 文件（最好从 <code>my-shapes.js</code> 复制）或编辑现有文件来添加新形状。</p><hr><h2>🔧 配置形状文件</h2><h3>基本配置</h3><p>在 JavaScript 文件中，您可以更改以下内容：<pre><code class="javascript">var shapesGroupName = 'Shapes';  // 用于组织和分组形状，在编辑器菜单中显示为可展开/折叠的标签</p><p>var typeId = 'shapes';  // 用于标识形状类型，'shapes' 与 Angular 组件 'ShapesComponent' 绑定
                       // 如果您创建新类型，还必须实现相应的 Angular 组件
</code></pre><h3>形状数据数组</h3><p>在此数组中定义您的形状数据，形状对象具有以下属性：<pre><code class="javascript">var shapes = [
  {
    name: 'diamond',  // 形状类型的唯一名称
    ico: 'assets/lib/svgeditor/shapes/img/shape-diamond.svg',  // 在编辑器菜单中显示的图标路径
    content: [  // SVG 元素数组
      {
        id: '',  // 元素 ID，如果您想在 Angular 组件中管理动画，可以使用此 ID
        type: 'path',  // SVG 元素类型（path, text, ellipse,...），参见 SVG 文档
        attr: {  // 元素属性，取决于类型
          d: 'M 20 0 L 40 20 L 20 40 L 0 20 Z'
        }
      }
    ]
  },
  // ... 更多形状
];
</code></pre><h3>属性说明</h3><table>
<tr><th>属性</th><th>说明</th><th>示例</th></tr>
<tr><td><strong>name</strong></td><td>形状类型的唯一名称</td><td>'diamond', 'circle', 'pump'</td></tr>
<tr><td><strong>ico</strong></td><td>在编辑器菜单中显示的图标路径</td><td>'assets/lib/svgeditor/shapes/img/shape-diamond.svg'</td></tr>
<tr><td><strong>content</strong></td><td>SVG 元素数组</td><td>包含一个或多个 SVG 元素的数组</td></tr>
<tr><td><strong>id</strong></td><td>元素 ID，用于动画管理</td><td>'pump-blade', 'valve-handle'</td></tr>
<tr><td><strong>type</strong></td><td>SVG 元素类型</td><td>'path', 'text', 'ellipse', 'rect', 'circle'</td></tr>
<tr><td><strong>attr</strong></td><td>元素属性，取决于类型</td><td>{ d: 'M 20 0 L 40 20 L 20 40 L 0 20 Z' }</td></tr>
</table><hr><h2>🎨 设计形状</h2><h3>使用 Inkscape 设计</h3><p>要设计我的形状，我使用了 Inkscape 应用程序。您可以使用 XML 编辑器查看元素和节点属性，以便添加到 'type' 和 'attr' 中。</p><h3>设计步骤</h3><p><li>打开 Inkscape</li>
<li>创建或导入形状</li>
<li>使用 XML 编辑器查看元素</li>
<li>复制元素属性到形状文件</li></p><h3>示例：菱形</h3><pre><code class="javascript">{
  name: 'diamond',
  ico: 'assets/lib/svgeditor/shapes/img/shape-diamond.svg',
  content: [
    {
      id: '',
      type: 'path',
      attr: {
        d: 'M 20 0 L 40 20 L 20 40 L 0 20 Z',
        fill: '#3498db',
        stroke: '#2c3e50',
        'stroke-width': 2
      }
    }
  ]
}
</code></pre><h3>示例：圆形</h3><pre><code class="javascript">{
  name: 'circle',
  ico: 'assets/lib/svgeditor/shapes/img/shape-circle.svg',
  content: [
    {
      id: '',
      type: 'circle',
      attr: {
        cx: 20,
        cy: 20,
        r: 18,
        fill: '#e74c3c',
        stroke: '#2c3e50',
        'stroke-width': 2
      }
    }
  ]
}
</code></pre><h3>示例：矩形</h3><pre><code class="javascript">{
  name: 'rectangle',
  ico: 'assets/lib/svgeditor/shapes/img/shape-rectangle.svg',
  content: [
    {
      id: '',
      type: 'rect',
      attr: {
        x: 0,
        y: 0,
        width: 40,
        height: 40,
        fill: '#2ecc71',
        stroke: '#2c3e50',
        'stroke-width': 2
      }
    }
  ]
}
</code></pre><h3>示例：文本</h3><pre><code class="javascript">{
  name: 'text',
  ico: 'assets/lib/svgeditor/shapes/img/shape-text.svg',
  content: [
    {
      id: '',
      type: 'text',
      attr: {
        x: 20,
        y: 20,
        'text-anchor': 'middle',
        'font-size': 14,
        fill: '#2c3e50'
      },
      text: 'Text'
    }
  ]
}
</code></pre><hr><h2>⚠️ 重要提示</h2><p><strong>!您必须保留文件其余部分的内容！</strong></p><p>不要删除或修改文件中的其他内容，只添加或修改形状数据。</p><hr><h2>📂 加载新形状文件</h2><h3>添加到加载器</h3><p>如果您创建了新的 JavaScript 形状文件，还必须将其添加到加载器中。</p><h3>配置步骤</h3><p><li>打开 <code>shapesLoader.js</code></li>
<li>添加您的文件名，该文件将被动态加载</li>
<li>不要删除 <code>shapesLoader.js</code></li><pre><code class="javascript">var shapesToLoad = [
  'my-shapes.js',
  'your-shape-file-name.js'
];
</code></pre><hr><h2>🎭 创建新形状类型</h2><h3>实现组件</h3><p>如果您创建了新的形状类型，例如定义自己的动画，还必须实现相应的 Angular 组件。</p><h3>组件位置</h3><p>最好查看 <code>client/src/app/gauges/shapes/</code> 中的文件内容。</p><h3>组件示例</h3><pre><code class="javascript">import { Component, Input, OnInit } from '@angular/core';</p><p>@Component({
  selector: 'app-my-shape',
  templateUrl: './my-shape.component.html',
  styleUrls: ['./my-shape.component.css']
})
export class MyShapeComponent implements OnInit {
  @Input() id: string;
  @Input() tagId: string;
  @Input() value: any;</p><p>  constructor() { }</p><p>  ngOnInit(): void {
    // 初始化逻辑
  }</p><p>  updateAnimation(value: any): void {
    // 更新动画逻辑
  }
}
</code></pre><hr><h2>💡 完整示例</h2><h3>示例 1：自定义泵形状</h3><pre><code class="javascript">// my-pumps.js
var shapesGroupName = 'Pumps';</p><p>var typeId = 'shapes';</p><p>var shapes = [
  {
    name: 'pump',
    ico: 'assets/lib/svgeditor/shapes/img/pump.svg',
    content: [
      {
        id: 'pump-body',
        type: 'circle',
        attr: {
          cx: 30,
          cy: 30,
          r: 25,
          fill: '#3498db',
          stroke: '#2c3e50',
          'stroke-width': 3
        }
      },
      {
        id: 'pump-blade',
        type: 'path',
        attr: {
          d: 'M 30 10 L 30 50',
          stroke: '#ecf0f1',
          'stroke-width': 4
        }
      },
      {
        id: 'pump-label',
        type: 'text',
        attr: {
          x: 30,
          y: 35,
          'text-anchor': 'middle',
          'font-size': 12,
          fill: '#ecf0f1'
        },
        text: 'PUMP'
      }
    ]
  }
];
</code></pre><h3>示例 2：自定义阀门形状</h3><pre><code class="javascript">// my-valves.js
var shapesGroupName = 'Valves';</p><p>var typeId = 'shapes';</p><p>var shapes = [
  {
    name: 'valve',
    ico: 'assets/lib/svgeditor/shapes/img/valve.svg',
    content: [
      {
        id: 'valve-body',
        type: 'path',
        attr: {
          d: 'M 20 0 L 40 20 L 20 40 L 0 20 Z',
          fill: '#e74c3c',
          stroke: '#2c3e50',
          'stroke-width': 2
        }
      },
      {
        id: 'valve-handle',
        type: 'rect',
        attr: {
          x: 15,
          y: 15,
          width: 10,
          height: 10,
          fill: '#ecf0f1',
          stroke: '#2c3e50',
          'stroke-width': 1
        }
      }
    ]
  }
];
</code></pre><h3>示例 3：自定义管道形状</h3><pre><code class="javascript">// my-pipes.js
var shapesGroupName = 'Pipes';</p><p>var typeId = 'shapes';</p><p>var shapes = [
  {
    name: 'pipe-horizontal',
    ico: 'assets/lib/svgeditor/shapes/img/pipe-horizontal.svg',
    content: [
      {
        id: 'pipe-body',
        type: 'rect',
        attr: {
          x: 0,
          y: 15,
          width: 60,
          height: 10,
          fill: '#95a5a6',
          stroke: '#2c3e50',
          'stroke-width': 2
        }
      },
      {
        id: 'pipe-flow',
        type: 'path',
        attr: {
          d: 'M 10 20 L 20 20',
          stroke: '#3498db',
          'stroke-width': 3,
          'stroke-dasharray': '5,5'
        }
      }
    ]
  },
  {
    name: 'pipe-vertical',
    ico: 'assets/lib/svgeditor/shapes/img/pipe-vertical.svg',
    content: [
      {
        id: 'pipe-body',
        type: 'rect',
        attr: {
          x: 15,
          y: 0,
          width: 10,
          height: 60,
          fill: '#95a5a6',
          stroke: '#2c3e50',
          'stroke-width': 2
        }
      },
      {
        id: 'pipe-flow',
        type: 'path',
        attr: {
          d: 'M 20 10 L 20 20',
          stroke: '#3498db',
          'stroke-width': 3,
          'stroke-dasharray': '5,5'
        }
      }
    ]
  }
];
</code></pre><hr><h2>🔧 故障排除</h2><h3>常见问题</h3><h4>❓ 形状不显示</h4><p><strong>可能原因</strong>：
<ul><li>文件未添加到加载器</li>
<li>文件路径错误</li>
<li>形状数据格式错误</li>
</ul>
<strong>解决方案</strong>：
<li>检查文件是否添加到 <code>shapesLoader.js</code></li>
<li>验证文件路径是否正确</li>
<li>检查形状数据格式</li></p><hr><h4>❓ 动画不工作</h4><p><strong>可能原因</strong>：
<ul><li>元素 ID 未设置</li>
<li>组件未实现</li>
<li>绑定错误</li>
</ul>
<strong>解决方案</strong>：
<li>确保元素 ID 已设置</li>
<li>实现相应的 Angular 组件</li>
<li>检查标签绑定</li></p><hr><h4>❓ 图标不显示</h4><p><strong>可能原因</strong>：
<ul><li>图标路径错误</li>
<li>图标文件不存在</li>
<li>文件格式不支持</li>
</ul>
<strong>解决方案</strong>：
<li>检查图标路径是否正确</li>
<li>确认图标文件是否存在</li>
<li>验证文件格式（推荐 SVG）</li></p><hr><h2>📚 最佳实践</h2><h3>1️⃣ 命名规范</h3><p><ul><li>使用有意义的名称</li>
<li>保持命名一致性</li>
<li>例如：<code>pump</code>、<code>valve</code>、<code>pipe-horizontal</code></li>
</ul>
<h3>2️⃣ 组织结构</h3></p><p><ul><li>按类型分组形状</li>
<li>使用清晰的组名</li>
<li>例如：<code>Pumps</code>、<code>Valves</code>、<code>Pipes</code></li>
</ul>
<h3>3️⃣ 设计一致性</h3></p><p><ul><li>保持设计风格一致</li>
<li>使用统一的颜色方案</li>
<li>遵循设计规范</li>
</ul>
<h3>4️⃣ 文档化</h3></p><p><ul><li>记录形状用途</li>
<li>说明动画逻辑</li>
<li>提供使用示例</li>
</ul>
<hr></p><h2>🎉 总结</h2><p>通过本教程，您已经学会了：</p><p>✅ 了解形状文件位置  
✅ 配置形状文件  
✅ 设计自定义形状  
✅ 加载新形状文件  
✅ 创建新形状类型  
✅ 应用完整示例  
✅ 故障排除  
✅ 应用最佳实践  </p><p>现在您可以在 FUXA 中创建自定义形状了！</p><hr><h2>📚 快速参考</h2><h3>SVG 元素类型对照表</h3><table>
<tr><th>类型</th><th>说明</th><th>常用属性</th></tr>
<tr><td><strong>path</strong></td><td>路径</td><td>d, fill, stroke</td></tr>
<tr><td><strong>circle</strong></td><td>圆形</td><td>cx, cy, r, fill, stroke</td></tr>
<tr><td><strong>ellipse</strong></td><td>椭圆</td><td>cx, cy, rx, ry, fill, stroke</td></tr>
<tr><td><strong>rect</strong></td><td>矩形</td><td>x, y, width, height, fill, stroke</td></tr>
<tr><td><strong>text</strong></td><td>文本</td><td>x, y, 'text-anchor', 'font-size', fill</td></tr>
<tr><td><strong>line</strong></td><td>线条</td><td>x1, y1, x2, y2, stroke</td></tr>
<tr><td><strong>polygon</strong></td><td>多边形</td><td>points, fill, stroke</td></tr>
</table><hr><blockquote>💡 <strong>提示</strong>：建议使用 Inkscape 等矢量图形编辑工具设计形状，然后导出为 SVG 格式，再手动转换为形状文件格式。</blockquote><hr><p><strong>关注我们，获取更多工业自动化技术干货！</strong> 🎯</p><p><div style="display: flex; justify-content: center; align-items: center; gap: 40px; margin: 30px 0;">
    <div style="text-align: center;">
        <img src="images/微信公众号.jpg" alt="微信公众号" style="width: 200px; height: 200px; object-fit: contain;">
        <p style="margin: 10px 0 0 0; font-size: 14px; color: #666;">微信公众号</p>
    </div>
    <div style="text-align: center;">
        <img src="images/单人二维码.png" alt="技术支持" style="width: 200px; height: 200px; object-fit: contain;">
        <p style="margin: 10px 0 0 0; font-size: 14px; color: #666;">技术支持</p>
    </div>
</div></p>
        </div>
        <div class="content-section" id="section-25-脚本配置教程">
            <h1>📜 FUXA 脚本配置教程</h1><hr><h2>📋 概述</h2><p>脚本功能允许您在 FUXA 中编写 JavaScript 函数，实现复杂的业务逻辑和数据处理。</p><hr><h2>🎯 访问脚本配置</h2><h3>步骤 1：打开编辑器</h3><p>进入 FUXA 编辑器界面。</p><h3>步骤 2：进入脚本设置</h3><p>点击编辑器中的 <strong>"Scripts"</strong>（脚本）。</p><p><img src="images/setup-scripts.png" alt="脚本设置"></p><hr><h2>🔧 配置脚本</h2><h3>创建新脚本</h3><p>添加一个新脚本（脚本是一个 JavaScript 函数），配置函数名称和参数。</p><p>有两种类型的参数：</p><table>
<tr><th>参数类型</th><th>说明</th><th>示例</th></tr>
<tr><td><strong>Tag ID</strong></td><td>标签 ID</td><td>'temperature', 'pressure'</td></tr>
<tr><td><strong>Value</strong></td><td>值（数字或字符串）</td><td>100, 'ON'</td></tr>
</table><h3>编写脚本逻辑</h3><p>然后您将逻辑写入函数中。可以使用以下系统调用：</p><table>
<tr><th>系统调用</th><th>说明</th><th>示例</th></tr>
<tr><td><strong>$setTag</strong></td><td>设置标签值</td><td>$setTag('temperature', 100)</td></tr>
<tr><td><strong>$getTag</strong></td><td>获取当前标签值</td><td>$getTag('temperature')</td></tr>
</table><p><img src="images/fuxa-script.gif" alt="配置脚本"></p><h3>脚本示例</h3><pre><code class="javascript">// 简单的脚本示例
function myScript(tagId, value) {
  var currentValue = $getTag(tagId);
  var newValue = currentValue + value;
  $setTag(tagId, newValue);
  return newValue;
}
</code></pre><hr><h2>🧪 测试脚本</h2><h3>使用 console.log 测试</h3><p>您可以测试脚本，以验证它是否有意义，使用 console.log 方法。</p><p><img src="images/fuxa-script1.gif" alt="测试脚本"></p><h3>测试示例</h3><pre><code class="javascript">// 带日志的脚本
function myScript(tagId, value) {
  console.log('开始执行脚本');
  console.log('标签 ID:', tagId);
  console.log('输入值:', value);
  
  var currentValue = $getTag(tagId);
  console.log('当前值:', currentValue);
  
  var newValue = currentValue + value;
  $setTag(tagId, newValue);
  console.log('新值:', newValue);
  
  return newValue;
}
</code></pre><hr><h2>🔗 从 GUI 配置脚本调用</h2><h3>在事件中调用脚本</h3><p>从 GUI 您可以在 <strong>"Events"</strong>（事件）中配置脚本的调用。</p><p><img src="images/fuxa-script2.gif" alt="调用脚本"></p><h3>事件配置</h3><p><li>选择要触发脚本的控件</li>
<li>添加事件（如点击事件）</li>
<li>选择动作类型为 <strong>"Execute Script"</strong>（执行脚本）</li>
<li>选择要执行的脚本</li>
<li>配置参数</li></p><hr><h2>⏱️ 处理定时器</h2><h3>定时器管理</h3><p>如果您在脚本中使用间隔（intervals），正确处理它们非常重要。</p><h3>问题示例</h3><p>例如，如果脚本中有 setInterval 并且多次运行测试，这将每次调用同一段代码时创建一个新的间隔，您必须重新启动 Fuxa 来清除它。</p><h3>解决方案</h3><p>处理此问题的一种方法是为间隔分配一个 ID，并对其进行简单检查（如果存在）。<pre><code class="javascript">// 检查定时器是否存在
if (typeof globalThis.myTimer === 'undefined') {
  globalThis.myTimer = null;
}</p><p>// 如果定时器不存在，则创建
if (!globalThis.myTimer) {
  globalThis.myTimer = setInterval(myTimerFunction, 1000);
}</p><p>async function myTimerFunction() {
  // 每 1 秒执行的代码
  console.log('定时器执行中...');
  
  var value = $getTag('temperature');
  console.log('温度值:', value);
  
  if (value > 100) {
    $setTag('alarm', 1);
  }
}
</code></pre><h3>清除定时器</h3><pre><code class="javascript">// 清除定时器
function clearTimer() {
  if (globalThis.myTimer) {
    clearInterval(globalThis.myTimer);
    globalThis.myTimer = null;
    console.log('定时器已清除');
  }
}
</code></pre><hr><h2>💡 完整示例</h2><h3>示例 1：温度控制</h3><pre><code class="javascript">// 温度控制脚本
function temperatureControl(targetTemp) {
  var currentTemp = $getTag('temperature');
  var heaterStatus = $getTag('heaterStatus');
  
  console.log('当前温度:', currentTemp);
  console.log('目标温度:', targetTemp);
  
  if (currentTemp < targetTemp - 2) {
    $setTag('heaterStatus', 1);
    console.log('加热器开启');
  } else if (currentTemp > targetTemp + 2) {
    $setTag('heaterStatus', 0);
    console.log('加热器关闭');
  }
  
  return heaterStatus;
}
</code></pre><h3>示例 2：液位监控</h3><pre><code class="javascript">// 液位监控脚本
function tankLevelMonitor(tankId, maxLevel, minLevel) {
  var currentLevel = $getTag(tankId + '.level');
  var pumpStatus = $getTag(tankId + '.pumpStatus');
  var alarmStatus = $getTag(tankId + '.alarmStatus');
  
  console.log('储罐 ID:', tankId);
  console.log('当前液位:', currentLevel);
  
  if (currentLevel > maxLevel) {
    $setTag(tankId + '.pumpStatus', 0);
    $setTag(tankId + '.alarmStatus', 1);
    console.log('液位过高，泵停止，报警触发');
  } else if (currentLevel < minLevel) {
    $setTag(tankId + '.pumpStatus', 1);
    $setTag(tankId + '.alarmStatus', 0);
    console.log('液位过低，泵启动，报警清除');
  }
  
  return alarmStatus;
}
</code></pre><h3>示例 3：数据计算</h3><pre><code class="javascript">// 数据计算脚本
function calculateFlowRate(pressure, pipeDiameter) {
  var flowRate = 0;
  
  if (pressure > 0 && pipeDiameter > 0) {
    var area = Math.PI * Math.pow(pipeDiameter / 2, 2);
    flowRate = pressure * area;
    
    console.log('压力:', pressure);
    console.log('管道直径:', pipeDiameter);
    console.log('流量:', flowRate);
    
    $setTag('flowRate', flowRate);
  }
  
  return flowRate;
}
</code></pre><h3>示例 4：复杂逻辑</h3><pre><code class="javascript">// 复杂逻辑脚本
function complexLogic(tagId, threshold) {
  var value = $getTag(tagId);
  var status = $getTag('systemStatus');
  var alarm = $getTag('alarm');
  
  console.log('标签值:', value);
  console.log('阈值:', threshold);
  console.log('系统状态:', status);
  
  if (status === 1) {
    if (value > threshold) {
      $setTag('alarm', 1);
      $setTag('systemStatus', 0);
      console.log('触发报警，系统停止');
      
      if (typeof globalThis.emergencyTimer === 'undefined') {
        globalThis.emergencyTimer = null;
      }
      
      if (!globalThis.emergencyTimer) {
        globalThis.emergencyTimer = setInterval(emergencyFunction, 5000);
      }
    }
  } else {
    if (value < threshold - 10) {
      $setTag('alarm', 0);
      $setTag('systemStatus', 1);
      console.log('报警清除，系统恢复');
      
      if (globalThis.emergencyTimer) {
        clearInterval(globalThis.emergencyTimer);
        globalThis.emergencyTimer = null;
      }
    }
  }
  
  return alarm;
}</p><p>function emergencyFunction() {
  console.log('紧急处理中...');
  var value = $getTag('temperature');
  if (value > 50) {
    $setTag('coolingSystem', 1);
  }
}
</code></pre><hr><h2>🔧 故障排除</h2><h3>常见问题</h3><h4>❓ 脚本不执行</h4><p><strong>可能原因</strong>：
<ul><li>脚本未正确配置</li>
<li>事件未触发</li>
<li>参数错误</li>
</ul>
<strong>解决方案</strong>：
<li>检查脚本配置</li>
<li>验证事件触发条件</li>
<li>确认参数是否正确</li></p><hr><h4>❓ 标签值未更新</h4><p><strong>可能原因</strong>：
<ul><li>标签 ID 错误</li>
<li>权限不足</li>
<li>设备未连接</li>
</ul>
<strong>解决方案</strong>：
<li>检查标签 ID</li>
<li>验证用户权限</li>
<li>确认设备连接状态</li></p><hr><h4>❓ 定时器重复创建</h4><p><strong>可能原因</strong>：
<ul><li>未检查定时器是否存在</li>
<li>多次测试脚本</li>
</ul>
<strong>解决方案</strong>：
<li>使用 globalThis 存储定时器 ID</li>
<li>检查定时器是否存在</li>
<li>重新启动 FUXA 清除定时器</li></p><hr><h2>📚 最佳实践</h2><h3>1️⃣ 命名规范</h3><p><ul><li>使用有意义的函数名</li>
<li>使用驼峰命名法</li>
<li>例如：<code>temperatureControl</code>、<code>tankLevelMonitor</code></li>
</ul>
<h3>2️⃣ 错误处理</h3></p><p><ul><li>添加错误处理</li>
<li>验证输入参数</li>
<li>记录错误日志</li>
</ul></p><p>
<pre><code class="javascript">function myScript(tagId, value) {
  try {
    if (!tagId) {
      throw new Error('标签 ID 不能为空');
    }
    
    var currentValue = $getTag(tagId);
    var newValue = currentValue + value;
    $setTag(tagId, newValue);
    
    return newValue;
  } catch (error) {
    console.error('脚本执行错误:', error);
    return null;
  }
}
</code></pre></p><h3>3️⃣ 日志记录</h3><p><ul><li>使用 console.log 记录关键信息</li>
<li>记录输入和输出</li>
<li>便于调试和问题排查</li>
</ul>
<h3>4️⃣ 性能优化</h3></p><p><ul><li>避免无限循环</li>
<li>合理使用定时器</li>
<li>及时清理资源</li>
</ul>
<hr></p><h2>🎉 总结</h2><p>通过本教程，您已经学会了：</p><p>✅ 访问脚本配置  
✅ 配置脚本参数  
✅ 编写脚本逻辑  
✅ 测试脚本  
✅ 从 GUI 调用脚本  
✅ 处理定时器  
✅ 应用完整示例  
✅ 故障排除  
✅ 应用最佳实践  </p><p>现在您可以在 FUXA 中编写强大的脚本了！</p><hr><h2>📚 快速参考</h2><h3>系统调用对照表</h3><table>
<tr><th>系统调用</th><th>说明</th><th>示例</th></tr>
<tr><td><strong>$getTag</strong></td><td>获取标签值</td><td>$getTag('temperature')</td></tr>
<tr><td><strong>$setTag</strong></td><td>设置标签值</td><td>$setTag('temperature', 100)</td></tr>
</table><h3>定时器方法对照表</h3><table>
<tr><th>方法</th><th>说明</th><th>示例</th></tr>
<tr><td><strong>setInterval</strong></td><td>设置定时器</td><td>setInterval(myFunction, 1000)</td></tr>
<tr><td><strong>clearInterval</strong></td><td>清除定时器</td><td>clearInterval(timerId)</td></tr>
</table><hr><blockquote>💡 <strong>提示</strong>：建议在脚本中添加详细的日志记录，便于调试和问题排查。使用 try-catch 处理错误，提高脚本的健壮性。</blockquote><hr><p><strong>关注我们，获取更多工业自动化技术干货！</strong> 🎯</p><p><div style="display: flex; justify-content: center; align-items: center; gap: 40px; margin: 30px 0;">
    <div style="text-align: center;">
        <img src="images/微信公众号.jpg" alt="微信公众号" style="width: 200px; height: 200px; object-fit: contain;">
        <p style="margin: 10px 0 0 0; font-size: 14px; color: #666;">微信公众号</p>
    </div>
    <div style="text-align: center;">
        <img src="images/单人二维码.png" alt="技术支持" style="width: 200px; height: 200px; object-fit: contain;">
        <p style="margin: 10px 0 0 0; font-size: 14px; color: #666;">技术支持</p>
    </div>
</div></p>
        </div>
        <div class="content-section" id="section-26-事件配置教程">
            <h1>🎯 FUXA 事件配置教程</h1><hr><h2>📋 概述</h2><p>事件功能允许您在形状和按钮控件中配置鼠标事件（click、mouseDown、mouseUp）来执行各种任务。</p><hr><h2>🎯 支持的事件类型</h2><table>
<tr><th>事件类型</th><th>说明</th><th>应用场景</th></tr>
<tr><td><strong>click</strong></td><td>点击事件</td><td>最常用的事件</td></tr>
<tr><td><strong>mouseDown</strong></td><td>鼠标按下事件</td><td>需要立即响应的场景</td></tr>
<tr><td><strong>mouseUp</strong></td><td>鼠标释放事件</td><td>需要在释放时执行的场景</td></tr>
</table><hr><h2>🔧 支持的动作</h2><h3>动作列表</h3><p><ul><li><a href="#打开页面-open-page" target="_blank">打开页面</a></li>
<li><a href="#打开卡片-open-card" target="_blank">打开卡片</a></li>
<li><a href="#打开对话框-open-dialog" target="_blank">打开对话框</a></li>
<li><a href="#打开-iframe-open-iframe" target="_blank">打开 iframe</a></li>
<li><a href="#打开窗口-open-window" target="_blank">打开窗口</a></li>
<li><a href="#设置值-set-value" target="_blank">设置值</a></li>
<li><a href="#切换值-toggle-value" target="_blank">切换值</a></li>
<li><a href="#从输入设置并关闭-set-from-input-and-close" target="_blank">从输入设置并关闭</a></li>
</ul>
<hr></p><h2>📄 打开页面 (Open Page)</h2><h3>说明</h3><p>用于在主窗口中显示视图。</p><h3>配置步骤</h3><p><li>选择要触发事件的控件</li>
<li>添加点击事件</li>
<li>选择动作类型为 <strong>"Open Page"</strong>（打开页面）</li>
<li>选择要打开的视图</li></p><p><img src="images/fuxa-events1.gif" alt="打开页面"></p><h3>配置示例</h3><pre><code class="javascript">// 打开页面事件配置
{
  "type": "click",
  "action": "Open Page",
  "view": "MainView",
  "transition": "fade"
}
</code></pre><hr><h2>🃏 打开卡片 (Open Card)</h2><h3>说明</h3><p>用于将视图显示为弹出窗口。卡片将在事件发生时显示在鼠标旁边，可以同时显示多个卡片。同一个卡片可以用于例如显示多个泵的值。</p><h3>配置步骤</h3><p><li>选择要触发事件的控件</li>
<li>添加点击事件</li>
<li>选择动作类型为 <strong>"Open Card"</strong>（打开卡片）</li>
<li>选择要打开的视图</li>
<li>配置标签映射（可选）</li></p><p><img src="images/fuxa-events2.gif" alt="打开卡片"></p><h3>配置示例</h3><pre><code class="javascript">// 打开卡片事件配置
{
  "type": "click",
  "action": "Open Card",
  "view": "PumpInfoCard",
  "tagMappings": {
    "pumpName": "Pump1.name",
    "pumpStatus": "Pump1.status",
    "pumpValue": "Pump1.value"
  },
  "position": "mouse"
}
</code></pre><hr><h2>💬 打开对话框 (Open Dialog)</h2><h3>说明</h3><p>用于将视图显示为对话框，通常用于配置值。对话框将显示在屏幕顶部。同一个对话框可以用于例如配置多个泵的值。</p><h3>配置步骤</h3><p><li>选择要触发事件的控件</li>
<li>添加点击事件</li>
<li>选择动作类型为 <strong>"Open Dialog"</strong>（打开对话框）</li>
<li>选择要打开的视图</li>
<li>配置标签映射</li></p><p><img src="images/fuxa-events3.gif" alt="打开对话框"></p><h3>配置示例</h3><pre><code class="javascript">// 打开对话框事件配置
{
  "type": "click",
  "action": "Open Dialog",
  "view": "PumpControlDialog",
  "tagMappings": {
    "pumpName": "Pump1.name",
    "pumpStatus": "Pump1.status",
    "targetValue": "Pump1.targetValue"
  },
  "title": "泵控制",
  "width": 400,
  "height": 300
}
</code></pre><hr><h2>🖼️ 打开 iframe (Open iframe)</h2><h3>说明</h3><p>用于将窗口打开为 iframe（来自外部源的嵌入式 HTML 文档）。您可以定义窗口大小和缩放比例。</p><h3>配置步骤</h3><p><li>选择要触发事件的控件</li>
<li>添加点击事件</li>
<li>选择动作类型为 <strong>"Open iframe"</strong>（打开 iframe）</li>
<li>输入 URL</li>
<li>配置窗口大小和缩放比例</li></p><p><img src="images/fuxa-events4.gif" alt="打开 iframe"></p><h3>配置示例</h3><pre><code class="javascript">// 打开 iframe 事件配置
{
  "type": "click",
  "action": "Open iframe",
  "url": "https://example.com/dashboard",
  "width": 800,
  "height": 600,
  "zoom": 1.0
}
</code></pre><hr><h2>🪟 打开窗口 (Open Window)</h2><h3>说明</h3><p>用于在新浏览器中打开窗口。您可以定义窗口大小。</p><h3>配置步骤</h3><p><li>选择要触发事件的控件</li>
<li>添加点击事件</li>
<li>选择动作类型为 <strong>"Open Window"</strong>（打开窗口）</li>
<li>输入 URL</li>
<li>配置窗口大小</li></p><p><img src="images/fuxa-events5.gif" alt="打开窗口"></p><h3>配置示例</h3><pre><code class="javascript">// 打开窗口事件配置
{
  "type": "click",
  "action": "Open Window",
  "url": "https://example.com/report",
  "width": 1024,
  "height": 768,
  "target": "_blank"
}
</code></pre><hr><h2>🔢 设置值 (Set Value)</h2><h3>说明</h3><p>用于设置标签值或增加和减少当前值。</p><h3>配置步骤</h3><p><li>选择要触发事件的控件</li>
<li>添加点击事件</li>
<li>选择动作类型为 <strong>"Set Value"</strong>（设置值）</li>
<li>选择标签</li>
<li>设置值或选择增加/减少</li></p><p><img src="images/fuxa-events6.gif" alt="设置值"></p><h3>配置示例</h3><pre><code class="javascript">// 设置值事件配置
{
  "type": "click",
  "action": "Set Value",
  "tagId": "pumpStatus",
  "value": 1
}</p><p>// 增加值
{
  "type": "click",
  "action": "Set Value",
  "tagId": "temperature",
  "operation": "increase",
  "value": 5
}</p><p>// 减少值
{
  "type": "click",
  "action": "Set Value",
  "tagId": "temperature",
  "operation": "decrease",
  "value": 5
}
</code></pre><hr><h2>🔄 切换值 (Toggle Value)</h2><h3>说明</h3><p>用于切换标签值 1/0（如果为 1 则设置为 0，如果为 0 则设置为 1）。</p><h3>配置步骤</h3><p><li>选择要触发事件的控件</li>
<li>添加点击事件</li>
<li>选择动作类型为 <strong>"Toggle Value"</strong>（切换值）</li>
<li>选择标签</li></p><p><img src="images/fuxa-events7.gif" alt="切换值"></p><h3>配置示例</h3><pre><code class="javascript">// 切换值事件配置
{
  "type": "click",
  "action": "Toggle Value",
  "tagId": "pumpStatus"
}
</code></pre><hr><h2>✅ 从输入设置并关闭 (Set from Input and Close)</h2><h3>说明</h3><p>结合使用，可以通过带有 OK 确认的对话框设置一些值。</p><h3>配置步骤</h3><p><li>创建对话框视图</li>
<li>添加输入控件</li>
<li>添加确认按钮</li>
<li>配置按钮事件为 <strong>"Set from Input and Close"</strong>（从输入设置并关闭）</li>
<li>选择要设置的标签</li></p><p><img src="images/fuxa-events8.gif" alt="从输入设置并关闭"></p><h3>配置示例</h3><pre><code class="javascript">// 对话框视图配置
{
  "view": "PumpControlDialog",
  "controls": [
    {
      "type": "text",
      "tagId": "pumpName",
      "text": "泵: {value}"
    },
    {
      "type": "input",
      "tagId": "targetValue",
      "label": "目标值",
      "unit": "%"
    },
    {
      "type": "button",
      "text": "确认",
      "events": [
        {
          "type": "click",
          "action": "Set from Input and Close",
          "tagId": "targetValue",
          "inputId": "targetValueInput"
        }
      ]
    }
  ]
}</p><p>// 打开对话框事件配置
{
  "type": "click",
  "action": "Open Dialog",
  "view": "PumpControlDialog",
  "tagMappings": {
    "pumpName": "Pump1.name",
    "targetValue": "Pump1.targetValue"
  }
}
</code></pre><hr><h2>💡 完整示例</h2><h3>示例 1：泵控制系统</h3><pre><code class="javascript">// 主视图
{
  "view": "MainView",
  "components": [
    {
      "type": "pump",
      "name": "Pump1",
      "events": [
        {
          "type": "click",
          "action": "Open Card",
          "view": "PumpInfoCard",
          "tagMappings": {
            "pumpName": "Pump1.name",
            "pumpStatus": "Pump1.status",
            "pumpValue": "Pump1.value"
          }
        }
      ]
    },
    {
      "type": "button",
      "text": "控制",
      "events": [
        {
          "type": "click",
          "action": "Open Dialog",
          "view": "PumpControlDialog",
          "tagMappings": {
            "pumpName": "Pump1.name",
            "pumpStatus": "Pump1.status",
            "targetValue": "Pump1.targetValue"
          }
        }
      ]
    }
  ]
}</p><p>// 泵信息卡片
{
  "view": "PumpInfoCard",
  "controls": [
    {
      "type": "text",
      "tagId": "pumpName",
      "text": "泵: {value}"
    },
    {
      "type": "text",
      "tagId": "pumpStatus",
      "text": "状态: {value}"
    },
    {
      "type": "text",
      "tagId": "pumpValue",
      "text": "值: {value}"
    }
  ]
}</p><p>// 泵控制对话框
{
  "view": "PumpControlDialog",
  "controls": [
    {
      "type": "text",
      "tagId": "pumpName",
      "text": "泵: {value}"
    },
    {
      "type": "input",
      "tagId": "targetValue",
      "label": "目标值",
      "unit": "%"
    },
    {
      "type": "button",
      "text": "确认",
      "events": [
        {
          "type": "click",
          "action": "Set from Input and Close",
          "tagId": "targetValue",
          "inputId": "targetValueInput"
        }
      ]
    }
  ]
}
</code></pre><h3>示例 2：导航系统</h3><pre><code class="javascript">// 导航按钮
{
  "view": "MainView",
  "components": [
    {
      "type": "button",
      "text": "主页",
      "events": [
        {
          "type": "click",
          "action": "Open Page",
          "view": "HomeView"
        }
      ]
    },
    {
      "type": "button",
      "text": "设备监控",
      "events": [
        {
          "type": "click",
          "action": "Open Page",
          "view": "DeviceMonitorView"
        }
      ]
    },
    {
      "type": "button",
      "text": "报警历史",
      "events": [
        {
          "type": "click",
          "action": "Open Page",
          "view": "AlarmHistoryView"
        }
      ]
    },
    {
      "type": "button",
      "text": "数据报表",
      "events": [
        {
          "type": "click",
          "action": "Open Window",
          "url": "https://example.com/report",
          "width": 1024,
          "height": 768
        }
      ]
    }
  ]
}
</code></pre><h3>示例 3：快速控制</h3><pre><code class="javascript">// 快速控制按钮
{
  "view": "MainView",
  "components": [
    {
      "type": "button",
      "text": "启动泵",
      "events": [
        {
          "type": "click",
          "action": "Set Value",
          "tagId": "pumpStatus",
          "value": 1
        }
      ]
    },
    {
      "type": "button",
      "text": "停止泵",
      "events": [
        {
          "type": "click",
          "action": "Set Value",
          "tagId": "pumpStatus",
          "value": 0
        }
      ]
    },
    {
      "type": "button",
      "text": "切换泵",
      "events": [
        {
          "type": "click",
          "action": "Toggle Value",
          "tagId": "pumpStatus"
        }
      ]
    },
    {
      "type": "button",
      "text": "增加温度",
      "events": [
        {
          "type": "click",
          "action": "Set Value",
          "tagId": "temperature",
          "operation": "increase",
          "value": 5
        }
      ]
    },
    {
      "type": "button",
      "text": "减少温度",
      "events": [
        {
          "type": "click",
          "action": "Set Value",
          "tagId": "temperature",
          "operation": "decrease",
          "value": 5
        }
      ]
    }
  ]
}
</code></pre><hr><h2>🔧 故障排除</h2><h3>常见问题</h3><h4>❓ 事件不触发</h4><p><strong>可能原因</strong>：
<ul><li>事件未正确配置</li>
<li>控件未启用</li>
<li>权限不足</li>
</ul>
<strong>解决方案</strong>：
<li>检查事件配置</li>
<li>确认控件是否启用</li>
<li>验证用户权限</li></p><hr><h4>❓ 页面不打开</h4><p><strong>可能原因</strong>：
<ul><li>视图不存在</li>
<li>视图名称错误</li>
<li>权限不足</li>
</ul>
<strong>解决方案</strong>：
<li>检查视图是否存在</li>
<li>验证视图名称</li>
<li>确认用户权限</li></p><hr><h4>❓ 值未设置</h4><p><strong>可能原因</strong>：
<ul><li>标签 ID 错误</li>
<li>标签不存在</li>
<li>权限不足</li>
</ul>
<strong>解决方案</strong>：
<li>检查标签 ID</li>
<li>确认标签是否存在</li>
<li>验证用户权限</li></p><hr><h2>📚 最佳实践</h2><h3>1️⃣ 事件设计</h3><p><ul><li>使用合适的事件类型</li>
<li>避免事件冲突</li>
<li>提供清晰的反馈</li>
</ul>
<h3>2️⃣ 动作选择</h3></p><p><ul><li>根据需求选择合适的动作</li>
<li>组合多个动作实现复杂功能</li>
<li>测试所有动作是否正常执行</li>
</ul>
<h3>3️⃣ 用户体验</h3></p><p><ul><li>提供直观的界面</li>
<li>添加确认对话框</li>
<li>显示操作结果</li>
</ul>
<h3>4️⃣ 性能优化</h3></p><p><ul><li>避免频繁触发事件</li>
<li>优化事件处理逻辑</li>
<li>减少不必要的操作</li>
</ul>
<hr></p><h2>🎉 总结</h2><p>通过本教程，您已经学会了：</p><p>✅ 了解事件类型  
✅ 配置打开页面  
✅ 配置打开卡片  
✅ 配置打开对话框  
✅ 配置打开 iframe  
✅ 配置打开窗口  
✅ 配置设置值  
✅ 配置切换值  
✅ 配置从输入设置并关闭  
✅ 应用完整示例  
✅ 故障排除  
✅ 应用最佳实践  </p><p>现在您可以在 FUXA 中配置强大的事件系统了！</p><hr><h2>📚 快速参考</h2><h3>事件类型对照表</h3><table>
<tr><th>事件类型</th><th>说明</th><th>应用场景</th></tr>
<tr><td><strong>click</strong></td><td>点击事件</td><td>最常用的事件</td></tr>
<tr><td><strong>mouseDown</strong></td><td>鼠标按下事件</td><td>需要立即响应的场景</td></tr>
<tr><td><strong>mouseUp</strong></td><td>鼠标释放事件</td><td>需要在释放时执行的场景</td></tr>
</table><h3>动作类型对照表</h3><table>
<tr><th>动作类型</th><th>说明</th><th>应用场景</th></tr>
<tr><td><strong>Open Page</strong></td><td>打开页面</td><td>在主窗口中显示视图</td></tr>
<tr><td><strong>Open Card</strong></td><td>打开卡片</td><td>显示弹出窗口</td></tr>
<tr><td><strong>Open Dialog</strong></td><td>打开对话框</td><td>配置值</td></tr>
<tr><td><strong>Open iframe</strong></td><td>打开 iframe</td><td>嵌入外部 HTML</td></tr>
<tr><td><strong>Open Window</strong></td><td>打开窗口</td><td>在新浏览器中打开</td></tr>
<tr><td><strong>Set Value</strong></td><td>设置值</td><td>设置标签值</td></tr>
<tr><td><strong>Toggle Value</strong></td><td>切换值</td><td>切换标签值 1/0</td></tr>
<tr><td><strong>Set from Input and Close</strong></td><td>从输入设置并关闭</td><td>通过对话框设置值</td></tr>
</table><hr><blockquote>💡 <strong>提示</strong>：建议在实际应用中为每个事件提供清晰的反馈，例如显示操作结果或确认对话框，提高用户体验。</blockquote><hr><p><strong>关注我们，获取更多工业自动化技术干货！</strong> 🎯</p><p><div style="display: flex; justify-content: center; align-items: center; gap: 40px; margin: 30px 0;">
    <div style="text-align: center;">
        <img src="images/微信公众号.jpg" alt="微信公众号" style="width: 200px; height: 200px; object-fit: contain;">
        <p style="margin: 10px 0 0 0; font-size: 14px; color: #666;">微信公众号</p>
    </div>
    <div style="text-align: center;">
        <img src="images/单人二维码.png" alt="技术支持" style="width: 200px; height: 200px; object-fit: contain;">
        <p style="margin: 10px 0 0 0; font-size: 14px; color: #666;">技术支持</p>
    </div>
</div></p>
        </div>
        <div class="content-section" id="section-27-形状绑定教程">
            <h1>🔗 FUXA 形状绑定教程</h1><hr><h2>📋 概述</h2><p>形状绑定功能允许您将形状与设备标签（变量）关联，实现数据的实时显示和动画效果。</p><hr><h2>🎯 绑定形状到设备标签</h2><h3>步骤 1：选择视图</h3><p>进入编辑器并选择要绑定形状的视图。</p><p><img src="images/fuxa-shapes.gif" alt="绑定形状"></p><h3>步骤 2：选择形状</h3><p>在视图中选择要绑定的形状。</p><h3>步骤 3：配置绑定</h3><p>在属性面板中配置形状绑定：</p><table>
<tr><th>配置项</th><th>说明</th><th>示例</th></tr>
<tr><td><strong>标签 ID</strong></td><td>要绑定的标签 ID</td><td>temperature, pressure</td></tr>
<tr><td><strong>显示值</strong></td><td>是否显示标签值</td><td>是/否</td></tr>
<tr><td><strong>单位</strong></td><td>显示单位</td><td>°C, bar, %</td></tr>
<tr><td><strong>小数位数</strong></td><td>显示小数位数</td><td>2</td></tr>
</table><h3>步骤 4：配置动画（可选）</h3><p>配置形状的动画效果：</p><table>
<tr><th>动画类型</th><th>说明</th><th>示例</th></tr>
<tr><td><strong>颜色变化</strong></td><td>根据值改变颜色</td><td>温度 > 80 显示红色</td></tr>
<tr><td><strong>旋转</strong></td><td>根据值旋转</td><td>风扇旋转</td></tr>
<tr><td><strong>缩放</strong></td><td>根据值缩放</td><td>液位变化</td></tr>
<tr><td><strong>移动</strong></td><td>根据值移动</td><td>阀门开关</td></tr>
</table><hr><h2>🏭 绑定过程工程形状（储罐）</h2><h3>步骤 1：选择过程工程形状</h3><p>选择储罐形状。</p><p><img src="images/fuxa-proceng.gif" alt="绑定储罐"></p><h3>步骤 2：配置储罐绑定</h3><p>在属性面板中配置储罐绑定：</p><table>
<tr><th>配置项</th><th>说明</th><th>示例</th></tr>
<tr><td><strong>标签 ID</strong></td><td>要绑定的标签 ID</td><td>tankLevel</td></tr>
<tr><td><strong>最小值</strong></td><td>最小值</td><td>0</td></tr>
<tr><td><strong>最大值</strong></td><td>最大值</td><td>100</td></tr>
<tr><td><strong>单位</strong></td><td>显示单位</td><td>%</td></tr>
<tr><td><strong>显示值</strong></td><td>是否显示标签值</td><td>是</td></tr>
</table><h3>步骤 3：配置颜色（可选）</h3><p>配置储罐的颜色变化：</p><table>
<tr><th>值范围</th><th>颜色</th><th>说明</th></tr>
<tr><td>0-30</td><td>红色</td><td>液位过低</td></tr>
<tr><td>30-70</td><td>绿色</td><td>液位正常</td></tr>
<tr><td>70-100</td><td>黄色</td><td>液位偏高</td></tr>
</table><hr><h2>💡 完整示例</h2><h3>示例 1：温度计</h3><pre><code class="javascript">// 形状绑定配置
{
  "shape": "thermometer",
  "bindings": [
    {
      "tagId": "temperature",
      "displayValue": true,
      "unit": "°C",
      "decimals": 1,
      "animations": [
        {
          "type": "color",
          "conditions": [
            {
              "value": "< 20",
              "color": "#3498db"
            },
            {
              "value": ">= 20 && < 80",
              "color": "#2ecc71"
            },
            {
              "value": ">= 80",
              "color": "#e74c3c"
            }
          ]
        }
      ]
    }
  ]
}
</code></pre><h3>示例 2：压力表</h3><pre><code class="javascript">// 形状绑定配置
{
  "shape": "gauge",
  "bindings": [
    {
      "tagId": "pressure",
      "displayValue": true,
      "unit": "bar",
      "decimals": 2,
      "animations": [
        {
          "type": "rotation",
          "minValue": 0,
          "maxValue": 10,
          "minAngle": -135,
          "maxAngle": 135
        }
      ]
    }
  ]
}
</code></pre><h3>示例 3：液位计</h3><pre><code class="javascript">// 形状绑定配置
{
  "shape": "tank",
  "bindings": [
    {
      "tagId": "tankLevel",
      "displayValue": true,
      "unit": "%",
      "decimals": 0,
      "animations": [
        {
          "type": "fill",
          "minValue": 0,
          "maxValue": 100,
          "color": "#3498db"
        },
        {
          "type": "color",
          "conditions": [
            {
              "value": "< 30",
              "color": "#e74c3c"
            },
            {
              "value": ">= 30 && < 70",
              "color": "#2ecc71"
            },
            {
              "value": ">= 70",
              "color": "#f1c40f"
            }
          ]
        }
      ]
    }
  ]
}
</code></pre><h3>示例 4：风扇</h3><pre><code class="javascript">// 形状绑定配置
{
  "shape": "fan",
  "bindings": [
    {
      "tagId": "fanSpeed",
      "displayValue": true,
      "unit": "RPM",
      "decimals": 0,
      "animations": [
        {
          "type": "rotation",
          "speed": 0.1,
          "condition": "value > 0"
        }
      ]
    }
  ]
}
</code></pre><hr><h2>🔧 故障排除</h2><h3>常见问题</h3><h4>❓ 形状不显示值</h4><p><strong>可能原因</strong>：
<ul><li>标签 ID 错误</li>
<li>标签未绑定</li>
<li>显示值未启用</li>
</ul>
<strong>解决方案</strong>：
<li>检查标签 ID</li>
<li>确认标签是否绑定</li>
<li>启用显示值选项</li></p><hr><h4>❓ 动画不工作</h4><p><strong>可能原因</strong>：
<ul><li>动画配置错误</li>
<li>标签未更新</li>
<li>条件不满足</li>
</ul>
<strong>解决方案</strong>：
<li>检查动画配置</li>
<li>确认标签是否更新</li>
<li>验证条件是否满足</li></p><hr><h4>❓ 颜色不变化</h4><p><strong>可能原因</strong>：
<ul><li>颜色配置错误</li>
<li>条件不满足</li>
<li>标签值未变化</li>
</ul>
<strong>解决方案</strong>：
<li>检查颜色配置</li>
<li>验证条件是否满足</li>
<li>确认标签值是否变化</li></p><hr><h2>📚 最佳实践</h2><h3>1️⃣ 标签命名</h3><p><ul><li>使用有意义的标签名称</li>
<li>保持命名一致性</li>
<li>例如：<code>temperature</code>、<code>pressure</code>、<code>tankLevel</code></li>
</ul>
<h3>2️⃣ 动画设计</h3></p><p><ul><li>使用合理的动画类型</li>
<li>避免过于复杂的动画</li>
<li>提供清晰的视觉反馈</li>
</ul>
<h3>3️⃣ 颜色选择</h3></p><p><ul><li>使用直观的颜色</li>
<li>遵循颜色编码规范</li>
<li>考虑色盲用户</li>
</ul>
<h3>4️⃣ 性能优化</h3></p><p><ul><li>避免过多的动画</li>
<li>优化刷新频率</li>
<li>减少不必要的计算</li>
</ul>
<hr></p><h2>🎉 总结</h2><p>通过本教程，您已经学会了：</p><p>✅ 绑定形状到设备标签  
✅ 绑定过程工程形状（储罐）  
✅ 配置形状动画  
✅ 配置颜色变化  
✅ 应用完整示例  
✅ 故障排除  
✅ 应用最佳实践  </p><p>现在您可以在 FUXA 中绑定形状到标签了！</p><hr><h2>📚 快速参考</h2><h3>动画类型对照表</h3><table>
<tr><th>动画类型</th><th>说明</th><th>应用场景</th></tr>
<tr><td><strong>color</strong></td><td>颜色变化</td><td>状态指示</td></tr>
<tr><td><strong>rotation</strong></td><td>旋转</td><td>风扇、仪表</td></tr>
<tr><td><strong>scale</strong></td><td>缩放</td><td>液位、压力</td></tr>
<tr><td><strong>move</strong></td><td>移动</td><td>阀门、滑块</td></tr>
</table><hr><blockquote>💡 <strong>提示</strong>：建议在实际应用中使用直观的颜色和动画，提供清晰的视觉反馈，帮助操作员快速了解系统状态。</blockquote><hr><p><strong>关注我们，获取更多工业自动化技术干货！</strong> 🎯</p><p><div style="display: flex; justify-content: center; align-items: center; gap: 40px; margin: 30px 0;">
    <div style="text-align: center;">
        <img src="images/微信公众号.jpg" alt="微信公众号" style="width: 200px; height: 200px; object-fit: contain;">
        <p style="margin: 10px 0 0 0; font-size: 14px; color: #666;">微信公众号</p>
    </div>
    <div style="text-align: center;">
        <img src="images/单人二维码.png" alt="技术支持" style="width: 200px; height: 200px; object-fit: contain;">
        <p style="margin: 10px 0 0 0; font-size: 14px; color: #666;">技术支持</p>
    </div>
</div></p>
        </div>
        <div class="content-section" id="section-28-控件绑定教程">
            <h1>🎛️ FUXA 控件绑定教程</h1><hr><h2>📋 概述</h2><p>控件绑定功能允许您将控件与设备标签（变量）关联，实现数据的显示、输入和控制。</p><hr><h2>🎯 绑定输出控件</h2><h3>步骤 1：选择视图</h3><p>进入编辑器并选择要绑定控件的视图。</p><h3>步骤 2：添加输出控件</h3><p>在视图中添加输出控件（如文本框、指示灯等）。</p><h3>步骤 3：配置绑定</h3><p>在属性面板中配置输出控件绑定：</p><table>
<tr><th>配置项</th><th>说明</th><th>示例</th></tr>
<tr><td><strong>标签 ID</strong></td><td>要绑定的标签 ID</td><td>temperature, pressure</td></tr>
<tr><td><strong>显示值</strong></td><td>是否显示标签值</td><td>是/否</td></tr>
<tr><td><strong>单位</strong></td><td>显示单位</td><td>°C, bar, %</td></tr>
<tr><td><strong>小数位数</strong></td><td>显示小数位数</td><td>2</td></tr>
<tr><td><strong>格式</strong></td><td>显示格式</td><td>{value}, {value}°C</td></tr>
</table><p><img src="images/fuxa-output-control.gif" alt="绑定输出控件"></p><h3>配置示例</h3><pre><code class="javascript">// 输出控件绑定配置
{
  "type": "text",
  "tagId": "temperature",
  "text": "温度: {value}°C",
  "decimals": 1,
  "unit": "°C"
}
</code></pre><hr><h2>🎯 绑定输入控件</h2><h3>步骤 1：选择视图</h3><p>进入编辑器并选择要绑定控件的视图。</p><h3>步骤 2：添加输入控件</h3><p>在视图中添加输入控件（如文本输入框、数字输入框等）。</p><h3>步骤 3：配置绑定</h3><p>在属性面板中配置输入控件绑定：</p><table>
<tr><th>配置项</th><th>说明</th><th>示例</th></tr>
<tr><td><strong>标签 ID</strong></td><td>要绑定的标签 ID</td><td>targetValue</td></tr>
<tr><td><strong>最小值</strong></td><td>最小值</td><td>0</td></tr>
<tr><td><strong>最大值</strong></td><td>最大值</td><td>100</td></tr>
<tr><td><strong>单位</strong></td><td>显示单位</td><td>%</td></tr>
<tr><td><strong>小数位数</strong></td><td>输入小数位数</td><td>0</td></tr>
</table><p><img src="images/fuxa-input-control.gif" alt="绑定输入控件"></p><h3>配置示例</h3><pre><code class="javascript">// 输入控件绑定配置
{
  "type": "input",
  "tagId": "targetValue",
  "label": "目标值",
  "unit": "%",
  "min": 0,
  "max": 100,
  "decimals": 0
}
</code></pre><hr><h2>🎯 绑定选择控件</h2><h3>步骤 1：选择视图</h3><p>进入编辑器并选择要绑定控件的视图。</p><h3>步骤 2：添加选择控件</h3><p>在视图中添加选择控件（如下拉列表、单选按钮等）。</p><h3>步骤 3：配置绑定</h3><p>在属性面板中配置选择控件绑定：</p><table>
<tr><th>配置项</th><th>说明</th><th>示例</th></tr>
<tr><td><strong>标签 ID</strong></td><td>要绑定的标签 ID</td><td>mode</td></tr>
<tr><td><strong>选项</strong></td><td>可选值</td><td>自动, 手动, 停止</td></tr>
<tr><td><strong>默认值</strong></td><td>默认值</td><td>自动</td></tr>
</table><p><img src="images/fuxa-select-control.gif" alt="绑定选择控件"></p><h3>配置示例</h3><pre><code class="javascript">// 选择控件绑定配置
{
  "type": "select",
  "tagId": "mode",
  "label": "运行模式",
  "options": [
    {
      "label": "自动",
      "value": 0
    },
    {
      "label": "手动",
      "value": 1
    },
    {
      "label": "停止",
      "value": 2
    }
  ],
  "defaultValue": 0
}
</code></pre><hr><h2>🎯 绑定滑块控件</h2><h3>步骤 1：选择视图</h3><p>进入编辑器并选择要绑定控件的视图。</p><h3>步骤 2：添加滑块控件</h3><p>在视图中添加滑块控件。</p><h3>步骤 3：配置绑定</h3><p>在属性面板中配置滑块控件绑定：</p><table>
<tr><th>配置项</th><th>说明</th><th>示例</th></tr>
<tr><td><strong>标签 ID</strong></td><td>要绑定的标签 ID</td><td>valvePosition</td></tr>
<tr><td><strong>最小值</strong></td><td>最小值</td><td>0</td></tr>
<tr><td><strong>最大值</strong></td><td>最大值</td><td>100</td></tr>
<tr><td><strong>单位</strong></td><td>显示单位</td><td>%</td></tr>
<tr><td><strong>步长</strong></td><td>步长</td><td>1</td></tr>
</table><p><img src="images/fuxa-slider-control.gif" alt="绑定滑块控件"></p><h3>配置示例</h3><pre><code class="javascript">// 滑块控件绑定配置
{
  "type": "slider",
  "tagId": "valvePosition",
  "label": "阀门位置",
  "unit": "%",
  "min": 0,
  "max": 100,
  "step": 1
}
</code></pre><hr><h2>💡 完整示例</h2><h3>示例 1：温度控制面板</h3><pre><code class="javascript">// 温度控制面板
{
  "view": "TemperatureControlPanel",
  "controls": [
    {
      "type": "text",
      "tagId": "currentTemperature",
      "text": "当前温度: {value}°C",
      "decimals": 1,
      "unit": "°C"
    },
    {
      "type": "input",
      "tagId": "targetTemperature",
      "label": "目标温度",
      "unit": "°C",
      "min": 0,
      "max": 100,
      "decimals": 1
    },
    {
      "type": "button",
      "text": "设置",
      "events": [
        {
          "type": "click",
          "action": "Set Value",
          "tagId": "targetTemperature"
        }
      ]
    }
  ]
}
</code></pre><h3>示例 2：泵控制面板</h3><pre><code class="javascript">// 泵控制面板
{
  "view": "PumpControlPanel",
  "controls": [
    {
      "type": "text",
      "tagId": "pumpStatus",
      "text": "泵状态: {value}",
      "format": {
        "0": "停止",
        "1": "运行"
      }
    },
    {
      "type": "button",
      "text": "启动",
      "events": [
        {
          "type": "click",
          "action": "Set Value",
          "tagId": "pumpStatus",
          "value": 1
        }
      ]
    },
    {
      "type": "button",
      "text": "停止",
      "events": [
        {
          "type": "click",
          "action": "Set Value",
          "tagId": "pumpStatus",
          "value": 0
        }
      ]
    },
    {
      "type": "slider",
      "tagId": "pumpSpeed",
      "label": "泵速",
      "unit": "%",
      "min": 0,
      "max": 100,
      "step": 1
    }
  ]
}
</code></pre><h3>示例 3：模式选择面板</h3><pre><code class="javascript">// 模式选择面板
{
  "view": "ModeSelectionPanel",
  "controls": [
    {
      "type": "text",
      "tagId": "currentMode",
      "text": "当前模式: {value}",
      "format": {
        "0": "自动",
        "1": "手动",
        "2": "停止"
      }
    },
    {
      "type": "select",
      "tagId": "mode",
      "label": "运行模式",
      "options": [
        {
          "label": "自动",
          "value": 0
        },
        {
          "label": "手动",
          "value": 1
        },
        {
          "label": "停止",
          "value": 2
        }
      ],
      "defaultValue": 0
    }
  ]
}
</code></pre><h3>示例 4：阀门控制面板</h3><pre><code class="javascript">// 阀门控制面板
{
  "view": "ValveControlPanel",
  "controls": [
    {
      "type": "text",
      "tagId": "valvePosition",
      "text": "阀门位置: {value}%",
      "decimals": 0,
      "unit": "%"
    },
    {
      "type": "slider",
      "tagId": "valvePosition",
      "label": "阀门位置",
      "unit": "%",
      "min": 0,
      "max": 100,
      "step": 1
    },
    {
      "type": "button",
      "text": "全开",
      "events": [
        {
          "type": "click",
          "action": "Set Value",
          "tagId": "valvePosition",
          "value": 100
        }
      ]
    },
    {
      "type": "button",
      "text": "全关",
      "events": [
        {
          "type": "click",
          "action": "Set Value",
          "tagId": "valvePosition",
          "value": 0
        }
      ]
    }
  ]
}
</code></pre><hr><h2>🔧 故障排除</h2><h3>常见问题</h3><h4>❓ 控件不显示值</h4><p><strong>可能原因</strong>：
<ul><li>标签 ID 错误</li>
<li>标签未绑定</li>
<li>标签未更新</li>
</ul>
<strong>解决方案</strong>：
<li>检查标签 ID</li>
<li>确认标签是否绑定</li>
<li>验证标签是否更新</li></p><hr><h4>❓ 输入不生效</h4><p><strong>可能原因</strong>：
<ul><li>标签 ID 错误</li>
<li>权限不足</li>
<li>值超出范围</li>
</ul>
<strong>解决方案</strong>：
<li>检查标签 ID</li>
<li>验证用户权限</li>
<li>确认值是否在范围内</li></p><hr><h4>❓ 滑块不移动</h4><p><strong>可能原因</strong>：
<ul><li>标签 ID 错误</li>
<li>标签未更新</li>
<li>滑块配置错误</li>
</ul>
<strong>解决方案</strong>：
<li>检查标签 ID</li>
<li>确认标签是否更新</li>
<li>验证滑块配置</li></p><hr><h2>📚 最佳实践</h2><h3>1️⃣ 控件布局</h3><p><ul><li>合理安排控件位置</li>
<li>保持界面整洁</li>
<li>提供清晰的标签</li>
</ul>
<h3>2️⃣ 输入验证</h3></p><p><ul><li>设置合理的最小值和最大值</li>
<li>验证输入格式</li>
<li>提供错误提示</li>
</ul>
<h3>3️⃣ 用户体验</h3></p><p><ul><li>提供直观的界面</li>
<li>显示当前值</li>
<li>提供确认按钮</li>
</ul>
<h3>4️⃣ 性能优化</h3></p><p><ul><li>避免频繁更新</li>
<li>优化刷新频率</li>
<li>减少不必要的计算</li>
</ul>
<hr></p><h2>🎉 总结</h2><p>通过本教程，您已经学会了：</p><p>✅ 绑定输出控件  
✅ 绑定输入控件  
✅ 绑定选择控件  
✅ 绑定滑块控件  
✅ 应用完整示例  
✅ 故障排除  
✅ 应用最佳实践  </p><p>现在您可以在 FUXA 中绑定控件到标签了！</p><hr><h2>📚 快速参考</h2><h3>控件类型对照表</h3><table>
<tr><th>控件类型</th><th>说明</th><th>应用场景</th></tr>
<tr><td><strong>text</strong></td><td>文本显示</td><td>显示标签值</td></tr>
<tr><td><strong>input</strong></td><td>文本输入</td><td>输入标签值</td></tr>
<tr><td><strong>select</strong></td><td>下拉选择</td><td>选择模式或选项</td></tr>
<tr><td><strong>slider</strong></td><td>滑块</td><td>调节数值</td></tr>
<tr><td><strong>button</strong></td><td>按钮</td><td>执行操作</td></tr>
</table><hr><blockquote>💡 <strong>提示</strong>：建议在实际应用中为每个控件提供清晰的标签和单位，使用户能够快速理解控件的用途。</blockquote><hr><p><strong>关注我们，获取更多工业自动化技术干货！</strong> 🎯</p><p><div style="display: flex; justify-content: center; align-items: center; gap: 40px; margin: 30px 0;">
    <div style="text-align: center;">
        <img src="images/微信公众号.jpg" alt="微信公众号" style="width: 200px; height: 200px; object-fit: contain;">
        <p style="margin: 10px 0 0 0; font-size: 14px; color: #666;">微信公众号</p>
    </div>
    <div style="text-align: center;">
        <img src="images/单人二维码.png" alt="技术支持" style="width: 200px; height: 200px; object-fit: contain;">
        <p style="margin: 10px 0 0 0; font-size: 14px; color: #666;">技术支持</p>
    </div>
</div></p>
        </div>
        <div class="content-section" id="section-29-小组件开发教程">
            <h1>🧩 FUXA 小组件开发教程</h1><hr><h2>📋 概述</h2><p>FUXA 小组件（Widgets）使用纯 SVG 和 JavaScript，通过 script 标签实现自定义功能。</p><hr><h2>🎯 小组件结构</h2><h3>基本结构</h3><p>FUXA 小组件的基本结构如下：<pre><code class="html"><svg>
  SVG 内容在这里
  <script>
    JavaScript 脚本内容在这里
  </script>
</svg>
</code></pre><hr><h2>🔄 数据传输</h2><h3>全局变量</h3><p>我们可以使用一些简单的函数并在 SVG 脚本中将变量声明为全局变量来在 SVG 脚本之间传输数据：</p><table>
<tr><th>变量类型</th><th>说明</th><th>示例</th></tr>
<tr><td><strong>_pb_</strong></td><td>布尔参数</td><td>true 或 false</td></tr>
<tr><td><strong>_pn_</strong></td><td>数字参数</td><td>Int, Float, Real 等</td></tr>
<tr><td><strong>_ps_</strong></td><td>字符串参数</td><td>可以直接输入字符串</td></tr>
<tr><td><strong>_pc_</strong></td><td>颜色参数</td><td>十六进制颜色代码（#00ff00ff）</td></tr>
</table><h3>导出变量</h3><p>变量必须包含在这些注释 <code>//!export-start</code> 和 <code>//!export-end</code> 之间：<pre><code class="javascript">//!export-start
let _pn_value = 50;
//!export-end
</code></pre>现在变量将在 FUXA 的 SVG 属性面板中可用，您可以在其中绑定 FUXA 标签。</p><hr><h2>📤 向 FUXA 发送值</h2><h3>postValue 函数</h3><p>为了从 SVG 向 FUXA 发送值，我们需要使用 <code>postValue</code> 函数：<pre><code class="javascript">function postValue(id, value) {
  console.error('Not defined!');
}
</code></pre><h3>使用示例</h3><p>您需要调用该函数，ID 需要与确切的变量名称匹配：<pre><code class="javascript">postValue('_pn_value', someNewValue);
</code></pre><h3>完整示例</h3><pre><code class="javascript">// 从 SVG 向 FUXA 发送值
function updateValue(newValue) {
  postValue('_pn_value', newValue);
}</p><p>// 在按钮点击时调用
document.getElementById('myButton').addEventListener('click', function() {
  updateValue(100);
});
</code></pre><hr><h2>📥 从 FUXA 接收值</h2><h3>putValue 函数</h3><p>为了从 FUXA 向 SVG 接收值，我们需要使用 <code>putValue</code> 函数：<pre><code class="javascript">function putValue(id, value) {
  if (id === '_pn_value') {
    callFunction(value);
    newVar = value;
  }
}
</code></pre><h3>使用示例</h3><p>在这里我们等待函数在 FUXA 中被调用，并检查我们要找的 ID，即定义的确切变量名称：<pre><code class="javascript">function putValue(id, value) {
  if (id === '_pn_value') {
    updateDisplay(value);
  } else if (id === '_pb_status') {
    updateStatus(value);
  }
}</p><p>function updateDisplay(value) {
  document.getElementById('display').textContent = value;
}</p><p>function updateStatus(value) {
  var statusElement = document.getElementById('status');
  if (value) {
    statusElement.setAttribute('fill', '#2ecc71');
  } else {
    statusElement.setAttribute('fill', '#e74c3c');
  }
}
</code></pre><hr><h2>⏱️ 处理定时器</h2><h3>清除定时器</h3><p>如果您使用 <code>setInterval</code>，还需要在更改页面或进入编辑器时清除间隔，如果不这样做，小组件将由于调用另一个 <code>setInterval</code> 而损坏。在我们的示例中，我们检查对象是否存在并使用 MutationObserver。</p><h3>检查销毁</h3><pre><code class="javascript">const checkDestroy = document.getElementById('svgIdName'); // 重要：必须是 SVG 的名称！
if (!checkDestroy) {
  clearBlinking(); 
  return;
}
</code></pre><h3>Mutation Observer</h3><pre><code class="javascript">// 设置 MutationObserver 以监视 SVG 元素的移除
const observer = new MutationObserver((mutations) => {
  mutations.forEach((mutation) => {
    mutation.removedNodes.forEach((node) => {
      if (node.id === 'svgIdName') { // 重要：必须是 SVG 的名称！
        clearBlinking(); 
        observer.disconnect(); 
      }
    });
  });
});
// 开始观察 body 或 SVG 的父元素
observer.observe(document.body, { childList: true, subtree: true }); 
</code></pre><h3>完整示例</h3><pre><code class="javascript">// 设置定时器
let blinkInterval = null;</p><p>function startBlinking() {
  if (blinkInterval) return;
  
  blinkInterval = setInterval(() => {
    const element = document.getElementById('blinkingElement');
    if (element) {
      const currentOpacity = element.getAttribute('opacity') || 1;
      const newOpacity = currentOpacity == 1 ? 0.3 : 1;
      element.setAttribute('opacity', newOpacity);
    }
  }, 500);
}</p><p>function clearBlinking() {
  if (blinkInterval) {
    clearInterval(blinkInterval);
    blinkInterval = null;
  }
}</p><p>// 检查销毁
const checkDestroy = document.getElementById('svgIdName');
if (!checkDestroy) {
  clearBlinking(); 
  return;
}</p><p>// 设置 MutationObserver
const observer = new MutationObserver((mutations) => {
  mutations.forEach((mutation) => {
    mutation.removedNodes.forEach((node) => {
      if (node.id === 'svgIdName') {
        clearBlinking(); 
        observer.disconnect(); 
      }
    });
  });
});
observer.observe(document.body, { childList: true, subtree: true });
</code></pre><hr><h2>🎨 使用 CSS 和 JavaScript</h2><h3>CSS 样式</h3><p>您还可以在 SVG 中使用 CSS：<pre><code class="html"><svg id="svgIdName" width="200" height="200" xmlns="http://www.w3.org/2000/svg">
  <style>
    .circle {
      fill: #3498db;
      stroke: #2c3e50;
      stroke-width: 2;
    }
    .text {
      font-family: Arial, sans-serif;
      font-size: 14px;
      fill: #2c3e50;
    }
  </style>
  <circle class="circle" cx="100" cy="100" r="50" />
  <text class="text" x="100" y="105" text-anchor="middle">Hello</text>
</svg>
</code></pre><h3>JavaScript 访问</h3><p>您可以使用完整的 JavaScript 并使用标准的 <code>getElementById</code> 和 <code>addEventListener</code> 访问元素/ID：<pre><code class="javascript">// 获取元素
const circle = document.getElementById('myCircle');
const text = document.getElementById('myText');</p><p>// 添加事件监听器
circle.addEventListener('click', function() {
  const currentFill = this.getAttribute('fill');
  const newFill = currentFill === '#3498db' ? '#e74c3c' : '#3498db';
  this.setAttribute('fill', newFill);
});</p><p>// 更新文本
function updateText(newText) {
  text.textContent = newText;
}
</code></pre><hr><h2>💡 完整示例</h2><h3>示例 1：简单计数器</h3><pre><code class="html"><svg id="counterWidget" width="200" height="200" xmlns="http://www.w3.org/2000/svg">
  <style>
    .counter-text {
      font-family: Arial, sans-serif;
      font-size: 48px;
      fill: #2c3e50;
      text-anchor: middle;
    }
    .button {
      fill: #3498db;
      stroke: #2c3e50;
      stroke-width: 2;
      cursor: pointer;
    }
    .button:hover {
      fill: #2980b9;
    }
  </style>
  
  <rect x="50" y="50" width="100" height="60" class="button" id="incrementButton" />
  <text x="100" y="90" class="counter-text" id="counterDisplay">0</text>
  
  <script>
    //!export-start
    let _pn_count = 0;
    //!export-end
    
    const counterDisplay = document.getElementById('counterDisplay');
    const incrementButton = document.getElementById('incrementButton');
    
    function updateDisplay(value) {
      counterDisplay.textContent = value;
    }
    
    incrementButton.addEventListener('click', function() {
      _pn_count++;
      updateDisplay(_pn_count);
      postValue('_pn_count', _pn_count);
    });
    
    function putValue(id, value) {
      if (id === '_pn_count') {
        _pn_count = value;
        updateDisplay(_pn_count);
      }
    }
    
    function postValue(id, value) {
      console.error('Not defined!');
    }
  </script>
</svg>
</code></pre><h3>示例 2：状态指示器</h3><pre><code class="html"><svg id="statusWidget" width="200" height="200" xmlns="http://www.w3.org/2000/svg">
  <style>
    .status-circle {
      stroke: #2c3e50;
      stroke-width: 2;
    }
    .status-text {
      font-family: Arial, sans-serif;
      font-size: 16px;
      fill: #2c3e50;
      text-anchor: middle;
    }
  </style>
  
  <circle class="status-circle" cx="100" cy="80" r="40" id="statusCircle" />
  <text class="status-text" x="100" y="150" id="statusText">OFF</text>
  
  <script>
    //!export-start
    let _pb_status = false;
    let _ps_message = "OFF";
    //!export-end
    
    const statusCircle = document.getElementById('statusCircle');
    const statusText = document.getElementById('statusText');
    
    function updateStatus(status) {
      if (status) {
        statusCircle.setAttribute('fill', '#2ecc71');
        statusText.textContent = 'ON';
      } else {
        statusCircle.setAttribute('fill', '#e74c3c');
        statusText.textContent = 'OFF';
      }
    }
    
    function updateMessage(message) {
      statusText.textContent = message;
    }
    
    function putValue(id, value) {
      if (id === '_pb_status') {
        _pb_status = value;
        updateStatus(_pb_status);
      } else if (id === '_ps_message') {
        _ps_message = value;
        updateMessage(_ps_message);
      }
    }
    
    function postValue(id, value) {
      console.error('Not defined!');
    }
  </script>
</svg>
</code></pre><h3>示例 3：进度条</h3><pre><code class="html"><svg id="progressWidget" width="300" height="100" xmlns="http://www.w3.org/2000/svg">
  <style>
    .progress-bg {
      fill: #ecf0f1;
      stroke: #2c3e50;
      stroke-width: 2;
    }
    .progress-bar {
      fill: #3498db;
      stroke: none;
    }
    .progress-text {
      font-family: Arial, sans-serif;
      font-size: 14px;
      fill: #2c3e50;
      text-anchor: middle;
    }
  </style>
  
  <rect class="progress-bg" x="10" y="20" width="280" height="30" />
  <rect class="progress-bar" x="10" y="20" width="0" height="30" id="progressBar" />
  <text class="progress-text" x="150" y="75" id="progressText">0%</text>
  
  <script>
    //!export-start
    let _pn_value = 0;
    let _pn_min = 0;
    let _pn_max = 100;
    //!export-end
    
    const progressBar = document.getElementById('progressBar');
    const progressText = document.getElementById('progressText');
    
    function updateProgress(value) {
      const percentage = Math.min(Math.max(value, _pn_min), _pn_max);
      const width = (percentage / (_pn_max - _pn_min)) * 280;
      progressBar.setAttribute('width', width);
      progressText.textContent = Math.round(percentage) + '%';
    }
    
    function putValue(id, value) {
      if (id === '_pn_value') {
        _pn_value = value;
        updateProgress(_pn_value);
      } else if (id === '_pn_min') {
        _pn_min = value;
        updateProgress(_pn_value);
      } else if (id === '_pn_max') {
        _pn_max = value;
        updateProgress(_pn_value);
      }
    }
    
    function postValue(id, value) {
      console.error('Not defined!');
    }
  </script>
</svg>
</code></pre><hr><h2>🔧 故障排除</h2><h3>常见问题</h3><h4>❓ 变量不显示在属性面板</h4><p><strong>可能原因</strong>：
<ul><li>变量未在 <code>//!export-start</code> 和 <code>//!export-end</code> 之间</li>
<li>变量命名不正确</li>
<li>文件未正确保存</li>
</ul>
<strong>解决方案</strong>：
<li>确保变量在注释之间</li>
<li>检查变量命名格式</li>
<li>重新加载小组件</li></p><hr><h4>❓ 值未更新</h4><p><strong>可能原因</strong>：
<ul><li><code>putValue</code> 函数未正确实现</li>
<li>ID 不匹配</li>
<li>标签未绑定</li>
</ul>
<strong>解决方案</strong>：
<li>检查 <code>putValue</code> 函数实现</li>
<li>验证 ID 是否匹配</li>
<li>确认标签是否绑定</li></p><hr><h4>❓ 定时器未清除</h4><p><strong>可能原因</strong>：
<ul><li>未使用 MutationObserver</li>
<li>SVG ID 不正确</li>
<li>清除函数未调用</li>
</ul>
<strong>解决方案</strong>：
<li>实现 MutationObserver</li>
<li>确认 SVG ID 正确</li>
<li>确保清除函数被调用</li></p><hr><h2>📚 最佳实践</h2><h3>1️⃣ 命名规范</h3><p><ul><li>使用有意义的变量名</li>
<li>遵循命名约定（_pb_, _pn_, _ps_, _pc_）</li>
<li>例如：<code>_pn_value</code>, <code>_pb_status</code>, <code>_ps_message</code></li>
</ul>
<h3>2️⃣ 代码组织</h3></p><p><ul><li>将相关功能分组</li>
<li>使用注释说明代码</li>
<li>保持代码简洁</li>
</ul>
<h3>3️⃣ 性能优化</h3></p><p><ul><li>避免频繁的 DOM 操作</li>
<li>使用事件委托</li>
<li>及时清除定时器</li>
</ul>
<h3>4️⃣ 错误处理</h3></p><p><ul><li>添加错误处理</li>
<li>验证输入参数</li>
<li>提供有意义的错误消息</li>
</ul>
<hr></p><h2>🎉 总结</h2><p>通过本教程，您已经学会了：</p><p>✅ 了解小组件结构  
✅ 使用全局变量传输数据  
✅ 向 FUXA 发送值  
✅ 从 FUXA 接收值  
✅ 处理定时器  
✅ 使用 CSS 和 JavaScript  
✅ 应用完整示例  
✅ 故障排除  
✅ 应用最佳实践  </p><p>现在您可以在 FUXA 中创建自定义小组件了！</p><hr><h2>📚 快速参考</h2><h3>变量类型对照表</h3><table>
<tr><th>变量类型</th><th>说明</th><th>示例</th></tr>
<tr><td><strong>_pb_</strong></td><td>布尔参数</td><td>true 或 false</td></tr>
<tr><td><strong>_pn_</strong></td><td>数字参数</td><td>Int, Float, Real 等</td></tr>
<tr><td><strong>_ps_</strong></td><td>字符串参数</td><td>可以直接输入字符串</td></tr>
<tr><td><strong>_pc_</strong></td><td>颜色参数</td><td>十六进制颜色代码（#00ff00ff）</td></tr>
</table><h3>函数对照表</h3><table>
<tr><th>函数</th><th>说明</th><th>用途</th></tr>
<tr><td><strong>postValue</strong></td><td>向 FUXA 发送值</td><td>从 SVG 向 FUXA 发送数据</td></tr>
<tr><td><strong>putValue</strong></td><td>从 FUXA 接收值</td><td>从 FUXA 向 SVG 接收数据</td></tr>
</table><hr><blockquote>💡 <strong>提示</strong>：建议在实际应用中使用 MutationObserver 清除定时器，避免内存泄漏。查看小组件部分中的完整工作示例：https://github.com/frangoteam/FUXA/tree/master/server/_widgets</blockquote><hr><p><strong>关注我们，获取更多工业自动化技术干货！</strong> 🎯</p><p><div style="display: flex; justify-content: center; align-items: center; gap: 40px; margin: 30px 0;">
    <div style="text-align: center;">
        <img src="images/微信公众号.jpg" alt="微信公众号" style="width: 200px; height: 200px; object-fit: contain;">
        <p style="margin: 10px 0 0 0; font-size: 14px; color: #666;">微信公众号</p>
    </div>
    <div style="text-align: center;">
        <img src="images/单人二维码.png" alt="技术支持" style="width: 200px; height: 200px; object-fit: contain;">
        <p style="margin: 10px 0 0 0; font-size: 14px; color: #666;">技术支持</p>
    </div>
</div></p>
        </div>
        <div class="content-section" id="section-30-视图创建教程">
            <h1>🖼️ FUXA 视图创建教程</h1><hr><h2>📋 概述</h2><p>视图是 FUXA 中用于显示和控制设备的主要界面元素。通过创建视图，您可以构建直观的工业可视化界面。</p><hr><h2>🎯 创建视图</h2><h3>步骤 1：进入编辑器</h3><p>进入 FUXA 编辑器界面。</p><h3>步骤 2：添加新视图</h3><p>点击左上角的 <strong>"+"</strong> 图标。选择 <strong>"Canvas/SVG"</strong>（画布/SVG）。</p><p><img src="images/add-view.png" alt="添加视图"></p><h3>步骤 3：配置视图属性</h3><p>点击 <strong>"Property"</strong>（属性）。</p><p><img src="images/property-view.png" alt="视图属性"></p><h3>步骤 4：定义视图大小和背景</h3><p>定义视图大小和背景。</p><p><img src="images/property-view2.png" alt="视图大小和背景"></p><hr><h2>🔧 视图属性配置</h2><h3>基本属性</h3><table>
<tr><th>属性</th><th>说明</th><th>示例</th></tr>
<tr><td><strong>名称</strong></td><td>视图名称</td><td>MainView, DeviceMonitor</td></tr>
<tr><td><strong>宽度</strong></td><td>视图宽度（像素）</td><td>1920, 1280</td></tr>
<tr><td><strong>高度</strong></td><td>视图高度（像素）</td><td>1080, 720</td></tr>
<tr><td><strong>背景颜色</strong></td><td>背景颜色</td><td>#ffffff, #f0f0f0</td></tr>
<tr><td><strong>背景图片</strong></td><td>背景图片</td><td>./assets/background.png</td></tr>
</table><h3>高级属性</h3><table>
<tr><th>属性</th><th>说明</th><th>示例</th></tr>
<tr><td><strong>启用缩放</strong></td><td>是否启用缩放</td><td>是/否</td></tr>
<tr><td><strong>最小缩放</strong></td><td>最小缩放比例</td><td>0.5</td></tr>
<tr><td><strong>最大缩放</strong></td><td>最大缩放比例</td><td>2.0</td></tr>
<tr><td><strong>启用平移</strong></td><td>是否启用平移</td><td>是/否</td></tr>
<tr><td><strong>启用选择</strong></td><td>是否启用选择</td><td>是/否</td></tr>
</table><hr><h2>🎨 视图设计</h2><h3>设计原则</h3><p><li><strong>清晰性</strong>：界面清晰易懂，信息层次分明</li>
<li><strong>一致性</strong>：保持设计风格一致</li>
<li><strong>响应性</strong>：适应不同屏幕尺寸</li>
<li><strong>可用性</strong>：操作简单直观</li></p><h3>布局建议</h3><table>
<tr><th>布局类型</th><th>说明</th><th>应用场景</th></tr>
<tr><td><strong>网格布局</strong></td><td>按网格排列元素</td><td>仪表盘、监控面板</td></tr>
<tr><td><strong>流程图布局</strong></td><td>按流程排列元素</td><td>工艺流程图</td></tr>
<tr><td><strong>分层布局</strong></td><td>按层次排列元素</td><td>复杂系统监控</td></tr>
<tr><td><strong>自由布局</strong></td><td>自由排列元素</td><td>灵活界面设计</td></tr>
</table><hr><h2>💡 完整示例</h2><h3>示例 1：主视图</h3><pre><code class="javascript">// 主视图配置
{
  "view": "MainView",
  "width": 1920,
  "height": 1080,
  "backgroundColor": "#f0f0f0",
  "backgroundImage": "./assets/background.png",
  "enableZoom": true,
  "minZoom": 0.5,
  "maxZoom": 2.0,
  "enablePan": true,
  "enableSelection": true,
  "components": [
    {
      "type": "text",
      "text": "工厂监控系统",
      "x": 50,
      "y": 50,
      "fontSize": 24,
      "fillColor": "#2c3e50"
    },
    {
      "type": "pump",
      "name": "Pump1",
      "x": 200,
      "y": 200
    },
    {
      "type": "valve",
      "name": "Valve1",
      "x": 400,
      "y": 200
    }
  ]
}
</code></pre><h3>示例 2：设备监控视图</h3><pre><code class="javascript">// 设备监控视图配置
{
  "view": "DeviceMonitorView",
  "width": 1280,
  "height": 720,
  "backgroundColor": "#ffffff",
  "enableZoom": true,
  "enablePan": true,
  "components": [
    {
      "type": "text",
      "text": "设备监控",
      "x": 50,
      "y": 50,
      "fontSize": 20,
      "fillColor": "#2c3e50"
    },
    {
      "type": "gauge",
      "name": "TemperatureGauge",
      "x": 100,
      "y": 100,
      "tagId": "temperature"
    },
    {
      "type": "gauge",
      "name": "PressureGauge",
      "x": 300,
      "y": 100,
      "tagId": "pressure"
    },
    {
      "type": "tank",
      "name": "Tank1",
      "x": 500,
      "y": 100,
      "tagId": "tankLevel"
    }
  ]
}
</code></pre><h3>示例 3：报警历史视图</h3><pre><code class="javascript">// 报警历史视图配置
{
  "view": "AlarmHistoryView",
  "width": 1024,
  "height": 768,
  "backgroundColor": "#ffffff",
  "enableZoom": false,
  "enablePan": false,
  "components": [
    {
      "type": "text",
      "text": "报警历史",
      "x": 50,
      "y": 50,
      "fontSize": 20,
      "fillColor": "#2c3e50"
    },
    {
      "type": "table",
      "name": "AlarmTable",
      "x": 50,
      "y": 100,
      "width": 924,
      "height": 600,
      "columns": [
        {
          "header": "时间",
          "field": "timestamp",
          "width": 150
        },
        {
          "header": "级别",
          "field": "level",
          "width": 100
        },
        {
          "header": "消息",
          "field": "message",
          "width": 674
        }
      ]
    }
  ]
}
</code></pre><hr><h2>🔧 故障排除</h2><h3>常见问题</h3><h4>❓ 视图不显示</h4><p><strong>可能原因</strong>：
<ul><li>视图未正确创建</li>
<li>视图名称错误</li>
<li>权限不足</li>
</ul>
<strong>解决方案</strong>：
<li>检查视图是否正确创建</li>
<li>验证视图名称</li>
<li>确认用户权限</li></p><hr><h4>❓ 背景图片不显示</h4><p><strong>可能原因</strong>：
<ul><li>图片路径错误</li>
<li>图片文件不存在</li>
<li>文件格式不支持</li>
</ul>
<strong>解决方案</strong>：
<li>检查图片路径</li>
<li>确认图片文件是否存在</li>
<li>验证文件格式（推荐 PNG、JPG）</li></p><hr><h4>❓ 缩放不工作</h4><p><strong>可能原因</strong>：
<ul><li>缩放未启用</li>
<li>缩放范围设置错误</li>
<li>浏览器不支持</li>
</ul>
<strong>解决方案</strong>：
<li>启用缩放功能</li>
<li>检查缩放范围设置</li>
<li>更新浏览器</li></p><hr><h2>📚 最佳实践</h2><h3>1️⃣ 视图命名</h3><p><ul><li>使用有意义的名称</li>
<li>保持命名一致性</li>
<li>例如：<code>MainView</code>、<code>DeviceMonitorView</code>、<code>AlarmHistoryView</code></li>
</ul>
<h3>2️⃣ 尺寸选择</h3></p><p><ul><li>根据目标设备选择尺寸</li>
<li>考虑屏幕分辨率</li>
<li>常用尺寸：1920x1080、1280x720、1024x768</li>
</ul>
<h3>3️⃣ 背景设计</h3></p><p><ul><li>使用浅色背景</li>
<li>避免过于复杂的背景</li>
<li>确保内容清晰可见</li>
</ul>
<h3>4️⃣ 组件布局</h3></p><p><ul><li>合理安排组件位置</li>
<li>保持界面整洁</li>
<li>提供清晰的视觉层次</li>
</ul>
<hr></p><h2>🎉 总结</h2><p>通过本教程，您已经学会了：</p><p>✅ 创建新视图  
✅ 配置视图属性  
✅ 定义视图大小和背景  
✅ 设计视图布局  
✅ 应用完整示例  
✅ 故障排除  
✅ 应用最佳实践  </p><p>现在您可以在 FUXA 中创建视图了！</p><hr><h2>📚 快速参考</h2><h3>视图尺寸对照表</h3><table>
<tr><th>尺寸</th><th>分辨率</th><th>应用场景</th></tr>
<tr><td><strong>1920x1080</strong></td><td>Full HD</td><td>大屏幕、桌面</td></tr>
<tr><td><strong>1280x720</strong></td><td>HD</td><td>中等屏幕、平板</td></tr>
<tr><td><strong>1024x768</strong></td><td>XGA</td><td>小屏幕、旧设备</td></tr>
</table><h3>布局类型对照表</h3><table>
<tr><th>布局类型</th><th>说明</th><th>应用场景</th></tr>
<tr><td><strong>网格布局</strong></td><td>按网格排列元素</td><td>仪表盘、监控面板</td></tr>
<tr><td><strong>流程图布局</strong></td><td>按流程排列元素</td><td>工艺流程图</td></tr>
<tr><td><strong>分层布局</strong></td><td>按层次排列元素</td><td>复杂系统监控</td></tr>
<tr><td><strong>自由布局</strong></td><td>自由排列元素</td><td>灵活界面设计</td></tr>
</table><hr><blockquote>💡 <strong>提示</strong>：建议在实际应用中根据目标设备和用户需求选择合适的视图尺寸和布局，提供良好的用户体验。</blockquote><hr><p><strong>关注我们，获取更多工业自动化技术干货！</strong> 🎯</p><p><div style="display: flex; justify-content: center; align-items: center; gap: 40px; margin: 30px 0;">
    <div style="text-align: center;">
        <img src="images/微信公众号.jpg" alt="微信公众号" style="width: 200px; height: 200px; object-fit: contain;">
        <p style="margin: 10px 0 0 0; font-size: 14px; color: #666;">微信公众号</p>
    </div>
    <div style="text-align: center;">
        <img src="images/单人二维码.png" alt="技术支持" style="width: 200px; height: 200px; object-fit: contain;">
        <p style="margin: 10px 0 0 0; font-size: 14px; color: #666;">技术支持</p>
    </div>
</div></p>
        </div>
        <div class="content-section" id="section-31-编辑器快捷键技巧">
            <h1>⌨️ FUXA 编辑器快捷键技巧</h1><hr><h2>📋 概述</h2><p>掌握 FUXA 编辑器的键盘快捷键可以大大提高您的工作效率。以下是常用的快捷键列表。</p><hr><h2>🎯 编辑器键盘快捷键</h2><h3>旋转操作</h3><table>
<tr><th>快捷键</th><th>功能</th><th>说明</th></tr>
<tr><td><strong>Ctrl + 左 / 右</strong></td><td>旋转选中项</td><td>旋转选中的元素</td></tr>
<tr><td><strong>Ctrl + Shift + 左 / 右</strong></td><td>大步旋转</td><td>以较大步长旋转选中的元素</td></tr>
</table><h3>选择操作</h3><table>
<tr><th>快捷键</th><th>功能</th><th>说明</th></tr>
<tr><td><strong>Shift + O / P</strong></td><td>选择前一项 / 后一项</td><td>选择上一个 / 下一个元素</td></tr>
<tr><td><strong>Tab / Shift + Tab</strong></td><td>选择前一项 / 后一项</td><td>选择上一个 / 下一个元素</td></tr>
<tr><td><strong>Ctrl + A</strong></td><td>选择所有项</td><td>选择视图中的所有元素</td></tr>
</table><h3>缩放操作</h3><table>
<tr><th>快捷键</th><th>功能</th><th>说明</th></tr>
<tr><td><strong>Ctrl + 上 / 下</strong></td><td>中心缩放</td><td>以视图中心为基准放大 / 缩小</td></tr>
<tr><td><strong>Shift + 滚轮</strong></td><td>鼠标位置缩放</td><td>以鼠标位置为基准放大 / 缩小</td></tr>
</table><h3>撤销 / 重做</h3><table>
<tr><th>快捷键</th><th>功能</th><th>说明</th></tr>
<tr><td><strong>Ctrl + Z</strong></td><td>撤销</td><td>撤销上一步操作</td></tr>
<tr><td><strong>Ctrl + Y</strong></td><td>重做</td><td>重做上一步撤销的操作</td></tr>
</table><h3>移动操作</h3><table>
<tr><th>快捷键</th><th>功能</th><th>说明</th></tr>
<tr><td><strong>Shift + 上 / 下 / 左 / 右</strong></td><td>移动选中项</td><td>移动选中的元素</td></tr>
<tr><td><strong>Shift + 鼠标调整大小</strong></td><td>锁定宽高</td><td>在调整大小时锁定宽高比例</td></tr>
</table><h3>复制 / 粘贴</h3><table>
<tr><th>快捷键</th><th>功能</th><th>说明</th></tr>
<tr><td><strong>Ctrl + X</strong></td><td>剪切选中项</td><td>剪切选中的元素</td></tr>
<tr><td><strong>Ctrl + C</strong></td><td>复制选中项</td><td>复制选中的元素</td></tr>
<tr><td><strong>Ctrl + V</strong></td><td>粘贴选中项</td><td>粘贴剪贴板中的元素</td></tr>
<tr><td><strong>Ctrl + D</strong></td><td>复制选中项</td><td>复制选中的元素</td></tr>
</table><h3>分组操作</h3><table>
<tr><th>快捷键</th><th>功能</th><th>说明</th></tr>
<tr><td><strong>Ctrl + G</strong></td><td>分组 / 取消分组</td><td>将选中的元素分组或取消分组</td></tr>
</table><h3>绘图操作</h3><table>
<tr><th>快捷键</th><th>功能</th><th>说明</th></tr>
<tr><td><strong>Shift + 绘制线条</strong></td><td>线条渐变</td><td>绘制水平、垂直或 45° 对角线</td></tr>
</table><hr><h2>💡 使用技巧</h2><h3>1️⃣ 快速导航</h3><p>使用 <strong>Tab</strong> 或 <strong>Shift + Tab</strong> 快速在元素之间切换选择。</p><h3>2️⃣ 精确旋转</h3><p>使用 <strong>Ctrl + Shift + 左 / 右</strong> 进行大步旋转，快速调整角度。</p><h3>3️⃣ 保持比例</h3><p>使用 <strong>Shift + 鼠标调整大小</strong> 在调整大小时锁定宽高比例。</p><h3>4️⃣ 快速复制</h3><p>使用 <strong>Ctrl + D</strong> 快速复制选中的元素，提高工作效率。</p><h3>5️⃣ 精确移动</h3><p>使用 <strong>Shift + 方向键</strong> 精确移动选中的元素。</p><h3>6️⃣ 快速缩放</h3><p>使用 <strong>Shift + 滚轮</strong> 以鼠标位置为基准进行缩放，更加精确。</p><hr><h2>🎯 常用场景</h2><h3>场景 1：创建仪表盘</h3><p><li>使用 <strong>Ctrl + A</strong> 选择所有元素</li>
<li>使用 <strong>Ctrl + G</strong> 将元素分组</li>
<li>使用 <strong>Ctrl + D</strong> 复制分组</li>
<li>使用 <strong>Shift + 方向键</strong> 调整位置</li></p><h3>场景 2：调整布局</h3><p><li>使用 <strong>Tab</strong> 选择元素</li>
<li>使用 <strong>Shift + 鼠标调整大小</strong> 调整大小</li>
<li>使用 <strong>Ctrl + 左 / 右</strong> 旋转元素</li>
<li>使用 <strong>Shift + 滚轮</strong> 缩放视图</li></p><h3>场景 3：快速编辑</h3><p><li>使用 <strong>Ctrl + C / V</strong> 复制 / 粘贴元素</li>
<li>使用 <strong>Ctrl + Z / Y</strong> 撤销 / 重做操作</li>
<li>使用 <strong>Ctrl + X</strong> 剪切元素</li>
<li>使用 <strong>Ctrl + D</strong> 快速复制</li></p><hr><h2>🔧 故障排除</h2><h3>常见问题</h3><h4>❓ 快捷键不工作</h4><p><strong>可能原因</strong>：
<ul><li>输入法冲突</li>
<li>浏览器快捷键冲突</li>
<li>快捷键被禁用</li>
</ul>
<strong>解决方案</strong>：
<li>切换到英文输入法</li>
<li>检查浏览器快捷键设置</li>
<li>确认快捷键是否启用</li></p><hr><h4>❓ 无法旋转元素</h4><p><strong>可能原因</strong>：
<ul><li>元素不支持旋转</li>
<li>快捷键冲突</li>
<li>元素被锁定</li>
</ul>
<strong>解决方案</strong>：
<li>确认元素是否支持旋转</li>
<li>检查快捷键是否冲突</li>
<li>解锁元素</li></p><hr><h4>❓ 无法复制元素</h4><p><strong>可能原因</strong>：
<ul><li>元素被锁定</li>
<li>权限不足</li>
<li>快捷键冲突</li>
</ul>
<strong>解决方案</strong>：
<li>解锁元素</li>
<li>确认用户权限</li>
<li>检查快捷键是否冲突</li></p><hr><h2>📚 最佳实践</h2><h3>1️⃣ 快捷键记忆</h3><p><ul><li>经常使用快捷键，形成肌肉记忆</li>
<li>将常用快捷键写在便签上</li>
<li>逐步掌握所有快捷键</li>
</ul>
<h3>2️⃣ 组合使用</h3></p><p><ul><li>组合使用多个快捷键</li>
<li>例如：<strong>Ctrl + D</strong> + <strong>Shift + 方向键</strong> 快速复制并移动</li>
</ul>
<h3>3️⃣ 自定义快捷键</h3></p><p><ul><li>根据个人习惯自定义快捷键</li>
<li>保持快捷键的一致性</li>
<li>避免与系统快捷键冲突</li>
</ul>
<h3>4️⃣ 分享快捷键</h3></p><p><ul><li>与团队成员分享快捷键</li>
<li>建立团队快捷键规范</li>
<li>提高团队整体效率</li>
</ul>
<hr></p><h2>🎉 总结</h2><p>通过本教程，您已经学会了：</p><p>✅ 编辑器键盘快捷键  
✅ 使用技巧  
✅ 常用场景  
✅ 故障排除  
✅ 最佳实践  </p><p>现在您可以使用快捷键提高工作效率了！</p><hr><h2>📚 快速参考</h2><h3>快捷键分类对照表</h3><table>
<tr><th>分类</th><th>快捷键</th><th>功能</th></tr>
<tr><td><strong>旋转</strong></td><td>Ctrl + 左 / 右</td><td>旋转选中项</td></tr>
<tr><td><strong>选择</strong></td><td>Tab / Shift + Tab</td><td>选择前一项 / 后一项</td></tr>
<tr><td><strong>缩放</strong></td><td>Ctrl + 上 / 下</td><td>中心缩放</td></tr>
<tr><td><strong>撤销 / 重做</strong></td><td>Ctrl + Z / Y</td><td>撤销 / 重做</td></tr>
<tr><td><strong>移动</strong></td><td>Shift + 方向键</td><td>移动选中项</td></tr>
<tr><td><strong>复制 / 粘贴</strong></td><td>Ctrl + C / V</td><td>复制 / 粘贴选中项</td></tr>
<tr><td><strong>分组</strong></td><td>Ctrl + G</td><td>分组 / 取消分组</td></tr>
</table><hr><blockquote>💡 <strong>提示</strong>：建议在实际应用中经常使用快捷键，形成肌肉记忆，大大提高工作效率。</blockquote><hr><p><strong>关注我们，获取更多工业自动化技术干货！</strong> 🎯</p><p><div style="display: flex; justify-content: center; align-items: center; gap: 40px; margin: 30px 0;">
    <div style="text-align: center;">
        <img src="images/微信公众号.jpg" alt="微信公众号" style="width: 200px; height: 200px; object-fit: contain;">
        <p style="margin: 10px 0 0 0; font-size: 14px; color: #666;">微信公众号</p>
    </div>
    <div style="text-align: center;">
        <img src="images/单人二维码.png" alt="技术支持" style="width: 200px; height: 200px; object-fit: contain;">
        <p style="margin: 10px 0 0 0; font-size: 14px; color: #666;">技术支持</p>
    </div>
</div></p>
        </div>
        <div class="content-section" id="section-32-Node-RED及OPC实现SCADA系统">
            <h1>[FUXA] 使用Node-RED及OPC实现一个完整的SCADA系统</h1><p>FUXA是一个基于网络的过程可视化（SCADA/HMI/仪表板）软件。通过FUXA，您可以为您的机器创建个性化设计的现代过程可视化和实时数据显示。它支持Modbus RTU/TCP，Siemens S7协议，OPC-UA，BACnet IP，MQTT和其他协议。</p><p>本文主要介绍了如何使用FUXA实现SCADA系统。在本文中，FUXA接收来自Node-RED和OPC UA Simulator的数据，并使用图表和圆形量规显示它；同时，它绘制了一系列模式来模拟工业过程。</p><h2>开始使用</h2><p>在开始此项目之前，您可能需要按照此处所述提前准备硬件和软件。</p><h3>硬件准备</h3><h3>软件准备</h3><p>Python 3.11可能与FUXA不兼容。如果您的Python版本是3.11，请考虑更改为其他Python版本。</p><h2>安装FUXA</h2><p>您需要安装Node Version 14 || 16 || 18。<pre><code class="bash">wget https://nodejs.org/dist/v18.20.3/node-v18.20.3-linux-arm64.tar.xz
tar -xf node-v18.20.3-linux-arm64.tar.xz
cd node-v18.20.3-linux-arm64
sudo cp -R * /usr/local/
node -v
npm -v
</code></pre>接下来从npm安装FUXA：<pre><code class="bash">sudo npm install -g --unsafe-perm @frangoteam/fuxa
sudo fuxa
</code></pre><h2>Node-RED数据处理</h2><p>在Node-RED发布的数据是由函数模块处理的，循环模块用于连续发布。函数模块的代码如下：<pre><code class="javascript">// On Start
global.set('firstTank', '10000');
global.set('secondTank', '0');
global.set('thirdTank', '0');</p><p>// On Message
var firstTank = global.get('firstTank');
var secondTank = global.get('secondTank');
var thirdTank = global.get('thirdTank');</p><p>if (firstTank <= 0) {
    global.set('firstTank', 10000);
    global.set('secondTank', 0);
    global.set('thirdTank', 0);
    firstTank = 10000;
    secondTank = 0;
    thirdTank = 0;
}</p><p>firstTank = firstTank - 3;
secondTank++;
thirdTank++;
thirdTank++;</p><p>global.set('firstTank', firstTank);
global.set('secondTank', secondTank);
global.set('thirdTank', thirdTank);</p><p>var data = {
    "firstTank": firstTank,
    "secondTank": secondTank,
    "thirdTank": thirdTank,
};
msg.payload = data;
return msg;
</code></pre>需要将firstTank、secondTank和thirdTank封装成JSON格式，然后让mqtt-out模块发布它。</p><h2>FUXA配置</h2><h3>添加内部设备</h3><p>点击FUXA右下角的+按钮，输入Name，Type，选择Internal，最后点击OK得到一个新模块。</p><p>该模块不具有与外部设备通信的功能，但它允许我们添加自定义标签。这些标签支持boolean、number和string三种数据类型，可以方便我们后续的工作。</p><h3>硬件配置</h3><p>我们使用以太网电缆将W10 PC和R1000连接到交换机，以确保它们位于同一网段。</p><h2>显示和主要控制介绍</h2><h3>图表</h3><p>FUXA中有曲线图和直方图。以曲线图为例。</p><p>图表的属性如图所示。您可以设置图表的名称、字体大小、数据格式、时间格式、X轴和Y轴样式以及其他属性。</p><p>最重要的是要显示的Chart，它决定了我们要显示的数据源和行的格式。</p><p>我们点击Chart显示，然后选择New Chart，会出现一个新的弹出窗口，点击新弹出窗口右上角的+按钮，输入Name，然后点击OK，就可以成功新建一条线配置了。</p><p>然后点击新建的线配置，然后点击Add Line，选择要显示的数据，最后点击OK，就会出现一条新的曲线。可以通过此过程添加多条曲线。最后单击OK完成配置。</p><p>我们在这里使用Chart来显示来自Prosys OPC UA Simulation Server的数据。您可以看到数据以图表的形式成功显示。</p><h3>Switch 开关</h3><p>开关的属性如图所示。我们选择一个名为switch_1的布尔数据作为开关状态。</p><p>您可以配置开关在打开或关闭时的显示状态，包括颜色配置，文本显示等。</p><h3>形状</h3><p>FUXA提供了多种形状供用户绘制工业可视化界面。每个形状都有三个属性，即属性、事件和操作。</p><p>其中，Property主要用于配置形状的颜色。通过绑定标记，形状将根据标记值的更改显示不同的颜色。您可以点击右上角的+来设置不同的颜色。</p><p>这里我们以仓库模式为例，用Property填充它的颜色。</p><p>Events主要有两个内容，Type表示事件类型，Action表示事件触发后的动作。</p><p>操作需要绑定到一个Tag，以及不同的Tag值可以触发不同的动作。设置值的最小值和最大值，然后在"类型"选项中选择所需的操作。当Tag数据达到Min和Max之间的间隔时，将触发相应的操作。</p><p>这里我们以仓库模式为例，通过Actions控制其旋转和停止。</p><h3>Pipe 管道</h3><p>在显示工业流程时，可以使用管道来表示工业物料的流向。</p><p>管道的属性如图所示。属性部分可以设置管道的宽度、颜色和其他属性。</p><p>动作也需要绑定到一个标签。不同的标记值允许管道具有不同的动作。有四个主要的动作：停止，顺时针旋转，逆时针旋转和隐藏内容。</p><p>本文展示了两个操作：停止和顺时针旋转。为了模拟工业过程，我们添加了两个水箱和一些管道等图案。</p><h3>Circular Gauge 圆形量规</h3><p>除了图表外，Circular Gauge还可以真实的实时显示数据。有三种圆形量规可供选择，可以根据需要配置不同的显示样式和数据范围。</p><hr><p><strong>技术支持：科控物联</strong>
<ul><li>QQ: 2492123056</li>
</ul></p>
        </div>
        </div>
    </div>

    <div class="back-to-top" id="backToTop">↑</div>

    <script>
        document.addEventListener('DOMContentLoaded', function() {
            const navItems = document.querySelectorAll('.nav-item');
            const contentSections = document.querySelectorAll('.content-section');
            const searchInput = document.getElementById('searchInput');
            const backToTop = document.getElementById('backToTop');

            // 初始化：显示第一个文档
            if (navItems.length > 0 && contentSections.length > 0) {
                navItems[0].classList.add('active');
                contentSections[0].classList.add('active');
            }

            // 导航菜单点击
            navItems.forEach(item => {
                item.addEventListener('click', function() {
                    const section = this.getAttribute('data-section');
                    
                    // 移除所有active类
                    navItems.forEach(nav => nav.classList.remove('active'));
                    contentSections.forEach(sec => sec.classList.remove('active'));
                    
                    // 添加active类到当前项
                    this.classList.add('active');
                    const targetSection = document.getElementById('section-' + section);
                    if (targetSection) {
                        targetSection.classList.add('active');
                    }
                    
                    // 滚动到顶部
                    window.scrollTo({ top: 0, behavior: 'smooth' });
                });
            });

            // 搜索功能
            searchInput.addEventListener('input', function() {
                const query = this.value.toLowerCase();
                navItems.forEach(item => {
                    const text = item.textContent.toLowerCase();
                    if (text.includes(query)) {
                        item.style.display = 'block';
                    } else {
                        item.style.display = 'none';
                    }
                });
            });

            // 返回顶部
            window.addEventListener('scroll', function() {
                if (window.scrollY > 300) {
                    backToTop.style.display = 'block';
                } else {
                    backToTop.style.display = 'none';
                }
            });

            backToTop.addEventListener('click', function() {
                window.scrollTo({ top: 0, behavior: 'smooth' });
            });

            // 处理hash变化，显示对应的section
            function handleHashChange() {
                const hash = window.location.hash;
                if (hash && hash.startsWith('#section-')) {
                    // 解码URL编码的中文
                    const sectionId = decodeURIComponent(hash.replace('#section-', ''));
                    
                    // 隐藏所有section
                    contentSections.forEach(sec => sec.classList.remove('active'));
                    
                    // 移除所有导航项的active类
                    navItems.forEach(nav => nav.classList.remove('active'));
                    
                    // 显示目标section
                    const targetSection = document.getElementById('section-' + sectionId);
                    if (targetSection) {
                        targetSection.classList.add('active');
                    }
                    
                    // 更新导航菜单的active状态
                    navItems.forEach(nav => {
                        if (nav.getAttribute('data-section') === sectionId) {
                            nav.classList.add('active');
                        }
                    });
                    
                    // 滚动到顶部
                    window.scrollTo({ top: 0, behavior: 'smooth' });
                }
            }

            // 监听hash变化
            window.addEventListener('hashchange', handleHashChange);
            
            // 页面加载时检查hash
            handleHashChange();
        });
    </script>
</body>
</html>