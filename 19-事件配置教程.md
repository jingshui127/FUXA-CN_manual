# 🎯 FUXA 事件配置教程

---

## 📋 概述

事件是 FUXA 中用于响应用户交互和系统状态变化的重要功能。通过配置鼠标事件（点击、按下、释放），您可以执行各种任务，如打开页面、设置值、切换值等。

---

## 🎯 事件类型

在形状和按钮控件中，您可以配置以下鼠标事件：

| 事件 | 说明 | 触发时机 |
|------|------|----------|
| **click** | 点击事件 | 鼠标点击时触发 |
| **mouseDown** | 按下事件 | 鼠标按下时触发 |
| **mouseUp** | 释放事件 | 鼠标释放时触发 |

---

## 📋 事件动作列表

FUXA 支持以下事件动作：

- [打开页面](#打开页面)
- [打开卡片](#打开卡片)
- [打开对话框](#打开对话框)
- [打开 iframe](#打开-iframe)
- [打开窗口](#打开窗口)
- [设置值](#设置值)
- [切换值](#切换值)
- [从输入设置并关闭](#从输入设置并关闭)

---

## 📄 打开页面

### 用途

用于在主窗口中显示视图。

### 配置步骤

1. 选择一个形状或按钮控件
2. 在属性面板中找到 **"Events"**（事件）
3. 添加一个事件（如点击事件）
4. 选择动作类型为 **"Open Page"**（打开页面）
5. 选择要打开的视图

### 示例

![打开页面](images/fuxa-events1.gif)

### 应用场景

- 导航到不同的监控界面
- 切换到设备详情页面
- 显示历史数据视图

---

## 🃏 打开卡片

### 用途

用于以弹出窗口的形式显示视图。卡片将在事件发生时显示在鼠标旁边，可以同时显示多个卡片。同一个卡片可以用于显示多个泵的值。

### 配置步骤

1. 选择一个形状或按钮控件
2. 在属性面板中找到 **"Events"**（事件）
3. 添加一个事件（如点击事件）
4. 选择动作类型为 **"Open Card"**（打开卡片）
5. 选择要打开的视图

### 示例

![打开卡片](images/fuxa-events2.gif)

### 应用场景

- 显示设备详细信息
- 显示实时数据
- 显示报警信息

---

## 💬 打开对话框

### 用途

用于以对话框的形式显示视图，通常用于配置值。对话框将显示在屏幕顶部。同一个对话框可以用于配置多个泵的值。

### 配置步骤

1. 选择一个形状或按钮控件
2. 在属性面板中找到 **"Events"**（事件）
3. 添加一个事件（如点击事件）
4. 选择动作类型为 **"Open Dialog"**（打开对话框）
5. 选择要打开的视图

### 示例

![打开对话框](images/fuxa-events3.gif)

### 应用场景

- 配置设备参数
- 设置目标值
- 输入用户数据

---

## 🖼️ 打开 iframe

### 用途

用于以 iframe 的形式打开窗口（嵌入来自外部源的 HTML 文档）。您可以定义窗口大小和缩放比例。

### 配置步骤

1. 选择一个形状或按钮控件
2. 在属性面板中找到 **"Events"**（事件）
3. 添加一个事件（如点击事件）
4. 选择动作类型为 **"Open iframe"**（打开 iframe）
5. 输入 URL
6. 设置窗口大小和缩放比例

### 示例

![打开 iframe](images/fuxa-events4.gif)

### 应用场景

- 嵌入外部网页
- 显示第三方仪表板
- 集成外部应用

### 配置属性

| 属性 | 说明 | 示例 |
|------|------|------|
| **URL** | 要嵌入的网页地址 | https://example.com |
| **宽度** | 窗口宽度 | 800px |
| **高度** | 窗口高度 | 600px |
| **缩放比例** | 缩放比例 | 1.0 |

---

## 🪟 打开窗口

### 用途

用于在新浏览器中打开窗口。您可以定义窗口大小。

### 配置步骤

1. 选择一个形状或按钮控件
2. 在属性面板中找到 **"Events"**（事件）
3. 添加一个事件（如点击事件）
4. 选择动作类型为 **"Open Window"**（打开窗口）
5. 输入 URL
6. 设置窗口大小

### 示例

![打开窗口](images/fuxa-events5.gif)

### 应用场景

- 打开外部网页
- 打开文档
- 打开帮助页面

### 配置属性

| 属性 | 说明 | 示例 |
|------|------|------|
| **URL** | 要打开的网页地址 | https://example.com |
| **宽度** | 窗口宽度 | 1024px |
| **高度** | 窗口高度 | 768px |

---

## 🔢 设置值

### 用途

用于设置标签值或增加/减少当前值。

### 配置步骤

1. 选择一个形状或按钮控件
2. 在属性面板中找到 **"Events"**（事件）
3. 添加一个事件（如点击事件）
4. 选择动作类型为 **"Set Value"**（设置值）
5. 选择要设置的标签
6. 设置值或选择增加/减少

### 示例

![设置值](images/fuxa-events6.gif)

### 应用场景

- 设置设备参数
- 调整控制值
- 增加或减少数值

### 配置选项

| 选项 | 说明 | 示例 |
|------|------|------|
| **设置值** | 直接设置标签值 | 设置为 50 |
| **增加值** | 增加标签值 | 增加 5 |
| **减少值** | 减少标签值 | 减少 5 |

---

## 🔄 切换值

### 用途

用于切换标签值 1/0（如果是 1 则设置为 0，如果是 0 则设置为 1）。

### 配置步骤

1. 选择一个形状或按钮控件
2. 在属性面板中找到 **"Events"**（事件）
3. 添加一个事件（如点击事件）
4. 选择动作类型为 **"Toggle Value"**（切换值）
5. 选择要切换的标签

### 示例

![切换值](images/fuxa-events7.gif)

### 应用场景

- 开启/关闭设备
- 启动/停止泵
- 启用/禁用功能

---

## ✅ 从输入设置并关闭

### 用途

结合使用，可以通过对话框设置一些值，并使用 OK 确认关闭对话框。

### 配置步骤

1. 创建一个对话框视图，包含输入控件
2. 在对话框中添加确认按钮
3. 为确认按钮配置 **"Set from Input and Close"**（从输入设置并关闭）事件
4. 选择要设置的标签和输入控件

### 示例

![从输入设置并关闭](images/fuxa-events8.gif)

### 应用场景

- 确认设置参数
- 确认修改配置
- 确认执行操作

---

## 💡 高级用法

### 1️⃣ 多事件组合

```javascript
// 在一个控件上配置多个事件
事件 1: mouseDown → 设置值为 1
事件 2: mouseUp → 设置值为 0
```

### 2️⃣ 条件事件

```javascript
// 使用脚本实现条件事件
function handleEvent(tagId, value) {
  let currentValue = $getTag(tagId);
  
  if (currentValue === 0) {
    $setTag(tagId, 1);
  } else {
    $setTag(tagId, 0);
  }
}
```

### 3️⃣ 事件链

```javascript
// 事件 1: 打开对话框
事件 2: 在对话框中设置值
事件 3: 关闭对话框并执行后续操作
```

---

## 🔧 故障排除

### 常见问题

#### ❓ 事件不触发

**可能原因**：
- 事件未正确配置
- 控件未启用
- 权限不足

**解决方案**：
1. 检查事件配置是否正确
2. 确认控件是否启用
3. 验证用户权限

---

#### ❓ 页面不打开

**可能原因**：
- 视图不存在
- URL 错误
- 浏览器阻止弹窗

**解决方案**：
1. 确认视图是否存在
2. 检查 URL 是否正确
3. 允许浏览器弹窗

---

#### ❓ 值未设置

**可能原因**：
- 标签 ID 错误
- 权限不足
- 数据类型不匹配

**解决方案**：
1. 检查标签 ID 是否正确
2. 验证用户权限
3. 确认数据类型是否匹配

---

## 📚 最佳实践

### 1️⃣ 事件命名

- 使用有意义的名称
- 描述事件的功能
- 例如：`打开设备详情`、`启动泵`

### 2️⃣ 用户体验

- 提供清晰的反馈
- 使用合适的图标和颜色
- 确认重要操作

### 3️⃣ 错误处理

- 验证输入数据
- 提供错误提示
- 记录操作日志

### 4️⃣ 性能优化

- 避免过于频繁的事件触发
- 使用防抖和节流
- 优化事件处理逻辑

---

## 🎉 总结

通过本教程，您已经学会了：

✅ 配置鼠标事件  
✅ 使用各种事件动作  
✅ 应用高级用法  
✅ 故障排除  
✅ 应用最佳实践  

现在您可以在 FUXA 中创建交互式的用户界面了！

---

## 📚 快速参考

### 事件类型对照表

| 事件类型 | 说明 | 触发时机 |
|----------|------|----------|
| **click** | 点击事件 | 鼠标点击时触发 |
| **mouseDown** | 按下事件 | 鼠标按下时触发 |
| **mouseUp** | 释放事件 | 鼠标释放时触发 |

### 事件动作对照表

| 动作类型 | 说明 | 应用场景 |
|----------|------|----------|
| **Open Page** | 打开页面 | 导航到不同视图 |
| **Open Card** | 打开卡片 | 显示详细信息 |
| **Open Dialog** | 打开对话框 | 配置参数 |
| **Open iframe** | 打开 iframe | 嵌入外部网页 |
| **Open Window** | 打开窗口 | 打开外部网页 |
| **Set Value** | 设置值 | 设置标签值 |
| **Toggle Value** | 切换值 | 开启/关闭设备 |
| **Set from Input and Close** | 从输入设置并关闭 | 确认设置 |

---

> 💡 **提示**：建议在实际应用中为每个事件添加清晰的说明和反馈，提高用户体验。

---

**关注我们，获取更多工业自动化技术干货！** 🎯

<div style="display: flex; justify-content: center; align-items: center; gap: 40px; margin: 30px 0;">
    <div style="text-align: center;">
        <img src="images/微信公众号.jpg" alt="微信公众号" style="width: 200px; height: 200px; object-fit: contain;">
        <p style="margin: 10px 0 0 0; font-size: 14px; color: #666;">微信公众号</p>
    </div>
    <div style="text-align: center;">
        <img src="images/单人二维码.png" alt="技术支持" style="width: 200px; height: 200px; object-fit: contain;">
        <p style="margin: 10px 0 0 0; font-size: 14px; color: #666;">技术支持</p>
    </div>
</div>

