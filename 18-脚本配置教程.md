# ğŸ“œ FUXA è„šæœ¬é…ç½®æ•™ç¨‹

---

## ğŸ“‹ æ¦‚è¿°

è„šæœ¬æ˜¯ FUXA ä¸­ç”¨äºå®ç°è‡ªå®šä¹‰é€»è¾‘å’Œè‡ªåŠ¨åŒ–çš„é‡è¦åŠŸèƒ½ã€‚é€šè¿‡ç¼–å†™ JavaScript å‡½æ•°ï¼Œæ‚¨å¯ä»¥å®ç°å¤æ‚çš„æ•°æ®å¤„ç†ã€è®¾å¤‡æ§åˆ¶å’Œä¸šåŠ¡é€»è¾‘ã€‚

---

## ğŸ¯ è®¿é—®è„šæœ¬é…ç½®

### æ­¥éª¤ 1ï¼šæ‰“å¼€ç¼–è¾‘å™¨

è¿›å…¥ FUXA ç¼–è¾‘å™¨ç•Œé¢ã€‚

### æ­¥éª¤ 2ï¼šè¿›å…¥è„šæœ¬è®¾ç½®

ç‚¹å‡»ç¼–è¾‘å™¨ä¸­çš„ **"Scripts"**ï¼ˆè„šæœ¬ï¼‰ã€‚

![è„šæœ¬è®¾ç½®](images/setup-scripts.png)

---

## ğŸ”§ åˆ›å»ºè„šæœ¬

### æ·»åŠ æ–°è„šæœ¬

1. ç‚¹å‡» **"Add"**ï¼ˆæ·»åŠ ï¼‰æŒ‰é’®
2. é…ç½®å‡½æ•°åç§°å’Œå‚æ•°
3. ç¼–å†™è„šæœ¬é€»è¾‘

### å‚æ•°ç±»å‹

è„šæœ¬æ”¯æŒä¸¤ç§å‚æ•°ç±»å‹ï¼š

| å‚æ•°ç±»å‹ | è¯´æ˜ | ç¤ºä¾‹ |
|----------|------|------|
| **Tag ID** | æ ‡ç­¾ IDï¼Œç”¨äºè·å–æˆ–è®¾ç½®æ ‡ç­¾å€¼ | 'temperature' |
| **Value** | æ•°å€¼æˆ–å­—ç¬¦ä¸²ï¼Œç”¨äºä¼ é€’å‚æ•° | 25.5 æˆ– 'Hello' |

---

## ğŸ“ ç¼–å†™è„šæœ¬é€»è¾‘

### ç³»ç»Ÿè°ƒç”¨å‡½æ•°

FUXA æä¾›äº†ä»¥ä¸‹ç³»ç»Ÿè°ƒç”¨å‡½æ•°ï¼š

| å‡½æ•° | è¯´æ˜ | ç¤ºä¾‹ |
|------|------|------|
| **$setTag** | è®¾ç½®æ ‡ç­¾å€¼ | $setTag(tagId, value) |
| **$getTag** | è·å–æ ‡ç­¾å½“å‰å€¼ | $getTag(tagId) |

### åŸºæœ¬ç¤ºä¾‹

```javascript
// è®¾ç½®æ ‡ç­¾å€¼
function setTemperature(tagId, value) {
  $setTag(tagId, value);
}

// è·å–æ ‡ç­¾å€¼
function getTemperature(tagId) {
  return $getTag(tagId);
}
```

---

## ğŸ§ª æµ‹è¯•è„šæœ¬

### ä½¿ç”¨ console.log

æ‚¨å¯ä»¥ä½¿ç”¨ `console.log` æ–¹æ³•æ¥æµ‹è¯•è„šæœ¬ï¼ŒéªŒè¯é€»è¾‘æ˜¯å¦æ­£ç¡®ã€‚

![æµ‹è¯•è„šæœ¬](images/fuxa-script.gif)

### ç¤ºä¾‹

```javascript
function calculateAverage(tagId1, tagId2) {
  let value1 = $getTag(tagId1);
  let value2 = $getTag(tagId2);
  
  let average = (value1 + value2) / 2;
  
  console.log('Value 1:', value1);
  console.log('Value 2:', value2);
  console.log('Average:', average);
  
  return average;
}
```

---

## ğŸ¯ ä» GUI è°ƒç”¨è„šæœ¬

### åœ¨äº‹ä»¶ä¸­é…ç½®è„šæœ¬è°ƒç”¨

æ‚¨å¯ä»¥ä» GUI çš„ **"Events"**ï¼ˆäº‹ä»¶ï¼‰ä¸­é…ç½®è„šæœ¬çš„è°ƒç”¨ã€‚

![äº‹ä»¶è°ƒç”¨è„šæœ¬](images/fuxa-script2.gif)

### ç¤ºä¾‹

1. é€‰æ‹©ä¸€ä¸ªæ§ä»¶æˆ–å½¢çŠ¶
2. åœ¨å±æ€§é¢æ¿ä¸­æ‰¾åˆ° **"Events"**ï¼ˆäº‹ä»¶ï¼‰
3. æ·»åŠ ä¸€ä¸ªäº‹ä»¶ï¼ˆå¦‚ç‚¹å‡»äº‹ä»¶ï¼‰
4. é€‰æ‹©è¦è°ƒç”¨çš„è„šæœ¬
5. é…ç½®å‚æ•°

---

## âš ï¸ å®šæ—¶å™¨å¤„ç†

### é‡è¦æç¤º

å¦‚æœåœ¨è„šæœ¬ä¸­ä½¿ç”¨å®šæ—¶å™¨ï¼ˆå¦‚ `setInterval`ï¼‰ï¼Œæ­£ç¡®å¤„ç†å®ƒä»¬éå¸¸é‡è¦ã€‚

### é—®é¢˜è¯´æ˜

å¦‚æœåœ¨è„šæœ¬ä¸­æœ‰ `setInterval` å¹¶ä¸”å¤šæ¬¡è¿è¡Œæµ‹è¯•ï¼Œæ¯æ¬¡è°ƒç”¨éƒ½ä¼šåˆ›å»ºä¸€ä¸ªæ–°çš„å®šæ—¶å™¨ï¼Œæ‰§è¡Œç›¸åŒçš„ä»£ç ç‰‡æ®µã€‚æ‚¨éœ€è¦é‡å¯ FUXA æ‰èƒ½æ¸…é™¤è¿™äº›å®šæ—¶å™¨ã€‚

### è§£å†³æ–¹æ¡ˆ

ä¸€ç§å¤„ç†æ–¹æ³•æ˜¯ç»™å®šæ—¶å™¨åˆ†é…ä¸€ä¸ª IDï¼Œå¹¶è¿›è¡Œç®€å•çš„æ£€æŸ¥ä»¥åˆ¤æ–­å®ƒæ˜¯å¦å·²å­˜åœ¨ã€‚

```javascript
// æ£€æŸ¥å®šæ—¶å™¨æ˜¯å¦å­˜åœ¨
if (typeof globalThis.myTimer === 'undefined') globalThis.myTimer = null;

// å¦‚æœå®šæ—¶å™¨ä¸å­˜åœ¨ï¼Œåˆ™åˆ›å»ºå®ƒ
if (!globalThis.myTimer) globalThis.myTimer = setInterval(myTimerFunction, 1000);

// å®šæ—¶å™¨å‡½æ•°
async function myTimerFunction() {
  // æ¯ 1 ç§’æ‰§è¡Œçš„ä»£ç 
  console.log('Timer function executed');
  
  // ç¤ºä¾‹ï¼šè¯»å–æ ‡ç­¾å€¼
  let temperature = $getTag($getTagId('temperature'));
  console.log('Temperature:', temperature);
  
  // ç¤ºä¾‹ï¼šè®¾ç½®æ ‡ç­¾å€¼
  $setTag($getTagId('status'), 1);
}
```

---

## ğŸ’¡ é«˜çº§è„šæœ¬ç¤ºä¾‹

### ç¤ºä¾‹ 1ï¼šæ•°æ®éªŒè¯

```javascript
function validateAndSet(tagId, value, min, max) {
  if (value < min || value > max) {
    console.log('å€¼è¶…å‡ºèŒƒå›´:', value);
    return false;
  }
  
  $setTag(tagId, value);
  console.log('å€¼å·²è®¾ç½®:', value);
  return true;
}
```

### ç¤ºä¾‹ 2ï¼šæ¡ä»¶æ§åˆ¶

```javascript
function controlPump(tagId, threshold) {
  let currentLevel = $getTag($getTagId('tankLevel'));
  
  if (currentLevel < threshold) {
    $setTag($getTagId('pumpStatus'), 1);
    console.log('æ³µå·²å¯åŠ¨');
  } else {
    $setTag($getTagId('pumpStatus'), 0);
    console.log('æ³µå·²åœæ­¢');
  }
}
```

### ç¤ºä¾‹ 3ï¼šæ•°æ®è½¬æ¢

```javascript
function convertTemperature(tagId, fromUnit, toUnit) {
  let value = $getTag(tagId);
  
  if (fromUnit === 'C' && toUnit === 'F') {
    return (value * 9/5) + 32;
  } else if (fromUnit === 'F' && toUnit === 'C') {
    return (value - 32) * 5/9;
  }
  
  return value;
}
```

### ç¤ºä¾‹ 4ï¼šæŠ¥è­¦æ£€æŸ¥

```javascript
function checkAlarms(tagId, highHigh, high, low) {
  let value = $getTag(tagId);
  
  if (value >= highHigh) {
    $setTag($getTagId('alarmLevel'), 3);
    console.log('é«˜é«˜æŠ¥è­¦');
  } else if (value >= high) {
    $setTag($getTagId('alarmLevel'), 2);
    console.log('é«˜æŠ¥è­¦');
  } else if (value <= low) {
    $setTag($getTagId('alarmLevel'), 1);
    console.log('ä½æŠ¥è­¦');
  } else {
    $setTag($getTagId('alarmLevel'), 0);
    console.log('æ­£å¸¸');
  }
}
```

### ç¤ºä¾‹ 5ï¼šæ•°æ®ç»Ÿè®¡

```javascript
function calculateStatistics(tagId) {
  let values = [];
  
  // æ”¶é›†æœ€è¿‘ 10 ä¸ªå€¼
  for (let i = 0; i < 10; i++) {
    values.push($getTag(tagId));
  }
  
  // è®¡ç®—å¹³å‡å€¼
  let sum = values.reduce((a, b) => a + b, 0);
  let average = sum / values.length;
  
  // è®¡ç®—æœ€å¤§å€¼å’Œæœ€å°å€¼
  let max = Math.max(...values);
  let min = Math.min(...values);
  
  console.log('Average:', average);
  console.log('Max:', max);
  console.log('Min:', min);
  
  return { average, max, min };
}
```

---

## ğŸ”§ æ•…éšœæ’é™¤

### å¸¸è§é—®é¢˜

#### â“ è„šæœ¬ä¸æ‰§è¡Œ

**å¯èƒ½åŸå› **ï¼š
- è„šæœ¬æœªæ­£ç¡®é…ç½®
- äº‹ä»¶æœªæ­£ç¡®è§¦å‘
- å‚æ•°é”™è¯¯

**è§£å†³æ–¹æ¡ˆ**ï¼š
1. æ£€æŸ¥è„šæœ¬é…ç½®æ˜¯å¦æ­£ç¡®
2. éªŒè¯äº‹ä»¶è§¦å‘æ¡ä»¶
3. æ£€æŸ¥å‚æ•°æ˜¯å¦æ­£ç¡®

---

#### â“ å®šæ—¶å™¨é‡å¤åˆ›å»º

**å¯èƒ½åŸå› **ï¼š
- æœªæ£€æŸ¥å®šæ—¶å™¨æ˜¯å¦å­˜åœ¨
- å¤šæ¬¡æµ‹è¯•è„šæœ¬

**è§£å†³æ–¹æ¡ˆ**ï¼š
1. ä½¿ç”¨ `globalThis` å­˜å‚¨å®šæ—¶å™¨ ID
2. åœ¨åˆ›å»ºå®šæ—¶å™¨å‰æ£€æŸ¥æ˜¯å¦å­˜åœ¨
3. å¿…è¦æ—¶é‡å¯ FUXA

---

#### â“ æ ‡ç­¾å€¼æœªæ›´æ–°

**å¯èƒ½åŸå› **ï¼š
- æ ‡ç­¾ ID é”™è¯¯
- æƒé™ä¸è¶³
- æ•°æ®ç±»å‹ä¸åŒ¹é…

**è§£å†³æ–¹æ¡ˆ**ï¼š
1. æ£€æŸ¥æ ‡ç­¾ ID æ˜¯å¦æ­£ç¡®
2. éªŒè¯ç”¨æˆ·æƒé™
3. ç¡®è®¤æ•°æ®ç±»å‹æ˜¯å¦åŒ¹é…

---

## ğŸ“š æœ€ä½³å®è·µ

### 1ï¸âƒ£ é”™è¯¯å¤„ç†

```javascript
function safeOperation(tagId, value) {
  try {
    $setTag(tagId, value);
    console.log('æ“ä½œæˆåŠŸ');
  } catch (error) {
    console.error('æ“ä½œå¤±è´¥:', error);
  }
}
```

### 2ï¸âƒ£ æ—¥å¿—è®°å½•

```javascript
function logOperation(operation, tagId, value) {
  console.log('[' + new Date().toISOString() + ']', operation, tagId, value);
}
```

### 3ï¸âƒ£ æ¨¡å—åŒ–è®¾è®¡

```javascript
// æ¨¡å—åŒ–å‡½æ•°
function validateValue(value, min, max) {
  return value >= min && value <= max;
}

function setValue(tagId, value) {
  $setTag(tagId, value);
}

// ç»„åˆä½¿ç”¨
function safeSetValue(tagId, value, min, max) {
  if (validateValue(value, min, max)) {
    setValue(tagId, value);
  }
}
```

### 4ï¸âƒ£ æ€§èƒ½ä¼˜åŒ–

```javascript
// é¿å…é¢‘ç¹è°ƒç”¨
let lastExecutionTime = 0;
const minInterval = 1000; // æœ€å°é—´éš” 1 ç§’

function throttledFunction(tagId, value) {
  const now = Date.now();
  if (now - lastExecutionTime >= minInterval) {
    $setTag(tagId, value);
    lastExecutionTime = now;
  }
}
```

---

## ğŸ‰ æ€»ç»“

é€šè¿‡æœ¬æ•™ç¨‹ï¼Œæ‚¨å·²ç»å­¦ä¼šäº†ï¼š

âœ… è®¿é—®è„šæœ¬é…ç½®  
âœ… åˆ›å»ºå’Œé…ç½®è„šæœ¬  
âœ… ç¼–å†™è„šæœ¬é€»è¾‘  
âœ… æµ‹è¯•è„šæœ¬  
âœ… ä» GUI è°ƒç”¨è„šæœ¬  
âœ… å¤„ç†å®šæ—¶å™¨  
âœ… é«˜çº§è„šæœ¬ç¤ºä¾‹  
âœ… æ•…éšœæ’é™¤  
âœ… åº”ç”¨æœ€ä½³å®è·µ  

ç°åœ¨æ‚¨å¯ä»¥åœ¨ FUXA ä¸­åˆ›å»ºå¼ºå¤§çš„è‡ªåŠ¨åŒ–è„šæœ¬äº†ï¼

---

## ğŸ“š å¿«é€Ÿå‚è€ƒ

### ç³»ç»Ÿå‡½æ•°å¯¹ç…§è¡¨

| å‡½æ•° | è¯´æ˜ | ç¤ºä¾‹ |
|------|------|------|
| **$setTag** | è®¾ç½®æ ‡ç­¾å€¼ | $setTag(tagId, value) |
| **$getTag** | è·å–æ ‡ç­¾å€¼ | $getTag(tagId) |
| **$getTagId** | è·å–æ ‡ç­¾ ID | $getTagId(tagName) |

### å®šæ—¶å™¨å‡½æ•°å¯¹ç…§è¡¨

| å‡½æ•° | è¯´æ˜ | ç¤ºä¾‹ |
|------|------|------|
| **setInterval** | è®¾ç½®é‡å¤æ‰§è¡Œçš„å®šæ—¶å™¨ | setInterval(function, 1000) |
| **setTimeout** | è®¾ç½®å»¶è¿Ÿæ‰§è¡Œçš„å®šæ—¶å™¨ | setTimeout(function, 1000) |
| **clearInterval** | æ¸…é™¤é‡å¤æ‰§è¡Œçš„å®šæ—¶å™¨ | clearInterval(timerId) |
| **clearTimeout** | æ¸…é™¤å»¶è¿Ÿæ‰§è¡Œçš„å®šæ—¶å™¨ | clearTimeout(timerId) |

---

> ğŸ’¡ **æç¤º**ï¼šå»ºè®®åœ¨å¼€å‘ç¯å¢ƒä¸­å……åˆ†æµ‹è¯•è„šæœ¬é€»è¾‘ï¼Œç¡®è®¤æ— è¯¯åå†éƒ¨ç½²åˆ°ç”Ÿäº§ç¯å¢ƒã€‚

---

**å…³æ³¨æˆ‘ä»¬ï¼Œè·å–æ›´å¤šå·¥ä¸šè‡ªåŠ¨åŒ–æŠ€æœ¯å¹²è´§ï¼** ğŸ¯

<div style="display: flex; justify-content: center; align-items: center; gap: 40px; margin: 30px 0;">
    <div style="text-align: center;">
        <img src="images/å¾®ä¿¡å…¬ä¼—å·.jpg" alt="å¾®ä¿¡å…¬ä¼—å·" style="width: 200px; height: 200px; object-fit: contain;">
        <p style="margin: 10px 0 0 0; font-size: 14px; color: #666;">å¾®ä¿¡å…¬ä¼—å·</p>
    </div>
    <div style="text-align: center;">
        <img src="images/å•äººäºŒç»´ç .png" alt="æŠ€æœ¯æ”¯æŒ" style="width: 200px; height: 200px; object-fit: contain;">
        <p style="margin: 10px 0 0 0; font-size: 14px; color: #666;">æŠ€æœ¯æ”¯æŒ</p>
    </div>
</div>

